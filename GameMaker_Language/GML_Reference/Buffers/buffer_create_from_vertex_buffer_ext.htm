<!--?xml version="1.0" encoding="utf-8" ?--><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head>

  <script type="text/javascript" language="JavaScript">
    //<![CDATA[
    function reDo() {
      if (innerWidth != origWidth || innerHeight != origHeight)
        location.reload();
    }
    if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
      origWidth = innerWidth;
      origHeight = innerHeight;
      onresize = reDo;
    }
    onerror = null;
  //]]>
  </script>
  <style type="text/css">/*<![CDATA[*/

    < !-- div.WebHelpPopupMenu {
      position: absolute;
      left: 0px;
      top: 0px;
      z-index: 4;
      visibility: hidden;
    }

    p.WebHelpNavBar {
      text-align: right;
    }

    -->
  
/*]]>*/</style>

  <script type="text/javascript">//<![CDATA[

    gRootRelPath = "../../..";
    gCommonRootRelPath = "../../..";
    gTopicId = "8.2.2.18.0_4";
  
//]]></script>

  <script type="text/javascript" src="../../../template/scripts/rh.min.js"></script>
  <script type="text/javascript" src="../../../template/scripts/common.min.js"></script>
  <script type="text/javascript" src="../../../template/scripts/topic.min.js"></script>
  <script type="text/javascript" src="../../../template/scripts/topicwidgets.min.js"></script>
<script type="text/javascript" src="../../../whxdata/projectsettings.js"></script>
  <link rel="stylesheet" type="text/css" href="../../../template/styles/topic.min.css">
  <link rel="stylesheet" type="text/css" href="../../../template/Charcoal_Grey/topicheader.css">
  <meta name="topic-status" content="Draft">

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>buffer_create_from_vertex_buffer_ext</title>
  <meta name="generator" content="Adobe RoboHelp 2022">
  <link rel="stylesheet" href="../../../assets/css/default.css" type="text/css">
  <script src="../../../assets/scripts/main_script.js" type="module"></script>
  <meta name="rh-authors" content="Mark Alexander">
  <meta name="topic-comment" content="Reference page for buffer_create_from_vertex_buffer_ext">
  <meta name="rh-index-keywords" content="buffer_create_from_vertex_buffer_ext">
  <meta name="search-keywords" content="buffer_create_from_vertex_buffer_ext,buffer_fixed,buffer_grow,buffer_wrap,buffer_fast,buffer_vbuffer">
  <meta name="is_pure" content="true">
<meta name="brsnext" value="GameMaker_Language/GML_Reference/Buffers/buffer_delete.htm"><meta name="brsprev" value="GameMaker_Language/GML_Reference/Buffers/buffer_create_from_vertex_buffer.htm"></head>

<body>
  <div class="topic-header rh-hide" id="rh-topic-header">
    <div class="logo">
    </div>
    <div class="nav">
      <div class="title" title="buffer_create_from_vertex_buffer_ext">
        <span>buffer_create_from_vertex_buffer_ext</span>
      </div>
      <div class="gotohome" title="Click here to see this page in full context">
        <a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a>
      </div>
    </div>
  </div>
  <div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div>



  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1><span data-field="title" data-format="default">buffer_create_from_vertex_buffer_ext</span></h1>
  <p>此函数分配一部分内存作为游戏中的缓冲区，并使用之前创建的 <a href="../Drawing/Primitives/Primitives_And_Vertex_Formats.htm"> 顶点缓冲区 </a> 中一系列顶点的顶点数据填充它。</p>
  <p>该函数返回对缓冲区的引用，该引用应存储在变量中并用于对缓冲区的所有进一步函数调用。该函数获取要使用的顶点缓冲区的引用 (例如，由函数 <span class="inline3_func"><a href="../Drawing/Primitives/vertex_create_buffer.htm">vertex_create_buffer</a></span> 返回)，并使用以下常量来定义缓冲区类型：</p>
  <div data-conref="../../../assets/snippets/Table_Buffer_Type_Constant.hts">
  <table>
    <colgroup>
      <col>
      <col>
    </colgroup>
    <tbody>
      <tr>
        <th colspan="2"><span data-keyref="Type_Constant_Buffer_Type"><a target="_blank" href="buffer_create.htm">缓冲区类型常数</a></span></th>
      </tr>
      <tr>
        <th>常量</th>
        <th>描述</th>
      </tr>
      <tr>
        <td><span class="inline">buffer_fixed</span></td>
        <td>A buffer of fixed size.</td>
      </tr>
      <tr>
        <td><span class="inline">buffer_grow</span></td>
        <td>A buffer that will "grow" dynamically as data is added</td>
      </tr>
      <tr>
        <td><span class="inline">buffer_wrap</span></td>
        <td>A buffer where the data will "wrap". When the data being added reaches the limit of the buffer size, the overwrite will be placed back at the start of the buffer, and further writing will continue from that point.</td>
      </tr>
      <tr>
        <td><span class="inline">buffer_fast</span></td>
        <td>A special "stripped" buffer that is extremely fast to read/write to. Can only be used with <span class="inline">buffer_u8</span> <a href="buffer_write.htm">data types</a>, and <i>must</i> be 1 byte aligned.</td>
      </tr>
    </tbody>
  </table>

</div>
  <p>除了缓冲区类型外，您还必须为缓冲区设置<i>字节对齐</i>。该值将根据您希望存储在缓冲区中的数据而有所不同，在大多数情况下，值为 1 是完全正确的。但是请注意，对于某些操作，特定的对齐是<i>必不可少的</i>，不正确的对齐可能会导致错误(有关对齐的更多详细信息，请参阅<a href="../../../Additional_Information/Guide_To_Using_Buffers.htm">缓冲区对齐</a>)。以下是显示哪些值最适合每种数据类型的通用指南(如有疑问，请使用 1 的对齐方式)：</p>
  <ul class="colour">
    <li>字符串应与 1 字节对齐。</li>
    <li>有符号或无符号 8 位整数可以与任何值对齐，但请注意，对于快速缓冲区 (请参阅 <span class="inline3_func"><a href="buffer_write.htm">buffer_write</a></span>)，它 <i> 必须 </i> 与 1 对齐。</li>
    <li>有符号或无符号的 16 位整数应与 2 字节对齐。</li>
    <li>有符号或无符号的 32 位整数应与 4 字节对齐</li>
    <li>Floats of up to 16bits should be aligned to 2 bytes.</li>
    <li>最多 32 位的浮点数应与 4 字节对齐。</li>
    <li>最多 64 位的浮点数应与 8 字节对齐。</li>
  </ul>
  <p>最后两个参数用于指定要复制到新创建的缓冲区中的顶点数据的范围。起始顶点可以是 0 到顶点数 -1 之间的任意位置，然后给出从该点开始复制的顶点数。您可以在顶点缓冲区上使用函数 <span class="inline3_func"><a href="../Drawing/Primitives/vertex_get_number.htm">vertex_get_number</a></span> 来获取存储的顶点总数。</p>
  <p class="note"><b><span data-conref="../../../assets/snippets/Tag_note.hts"><span class="note"> 注意</span></span></b> 顶点缓冲区是 1 字节对齐的，但您可以根据您想要如何处理数据来创建具有任何对齐方式的缓冲区，因为顶点数据只是原始内存复制到缓冲区。</p>
  <div data-conref="../../../assets/snippets/Note_Buffer_Delete_Dynamic.hts">
  <p class="note"><span data-conref="../../../assets/snippets/Tag_note.hts"><span class="note"> 注意</span></span> 当您不再需要此类动态创建的资源时，请务必将其从内存中删除，以防止内存泄漏，因此当您使用完创建的缓冲区后，应将其释放再次使用 <span class="inline3_func"><a href="buffer_delete.htm">buffer_delete</a></span>。</p>

</div>
  <p>&nbsp;</p>
  <h4>语法:</h4>
  <p class="code"><span data-field="title" data-format="default">buffer_create_from_vertex_buffer_ext</span>(vertex_buffer, type, alignment, start_vertex, num_vertices)</p>
  <table>
    <tbody>
      <tr>
        <th>参数</th>
        <th>类型</th>
        <th>描述</th>
      </tr>
      <tr>
        <td>vertex_buffer</td>
        <td><span data-keyref="Type_ID_Buffer_Vertex"><a target="_blank" href="../Drawing/Primitives/vertex_create_buffer.htm">Vertex Buffer</a></span></td>
        <td>对要使用的顶点缓冲区的引用。</td>
      </tr>
      <tr>
        <td>type</td>
        <td><span data-keyref="Type_Constant_Buffer_Type"><a target="_blank" href="buffer_create.htm">缓冲区类型常数</a></span></td>
        <td>要创建的缓冲区的类型(参见下面的常量列表)。</td>
      </tr>
      <tr>
        <td>alignment</td>
        <td><span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Real</a></span></td>
        <td>缓冲区的字节对齐方式。</td>
      </tr>
      <tr>
        <td>start_vertex</td>
        <td><span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Real</a></span></td>
        <td>起始顶点。</td>
      </tr>
      <tr>
        <td>num_vertices</td>
        <td><span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Real</a></span></td>
        <td>要复制的顶点总数。</td>
      </tr>
    </tbody>
  </table>
  <p>&nbsp;</p>
  <h4>返回:</h4>
  <p class="code"><span data-keyref="Type_ID_Buffer"><a target="_blank" href="buffer_create.htm">Buffer</a></span></p>
  <p>&nbsp;</p>
  <h4>例子:</h4>
  <p class="code">var _v_num = vertex_get_number(model_buff);<br>
    player_buffer = <span data-field="title" data-format="default">buffer_create_from_vertex_buffer_ext</span>(model_buffer, buffer_grow, 1, 0, _v_num - 1);</p>
  <p>上面的代码将内存分配给缓冲区，然后将给定顶点缓冲区中所有顶点的数据复制到其中，返回新缓冲区。它存储在变量 <span class="inline2">player_buffer</span> 中以供将来使用。</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Back: <a href="Buffers.htm">缓冲区</a></div>
        <div style="float:right">Next:&nbsp;<a href="buffer_delete.htm">buffer_delete</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5>
  </div>
  <!-- KEYWORDS
buffer_create_from_vertex_buffer_ext
buffer_fixed
buffer_grow
buffer_wrap
buffer_fast
buffer_vbuffer
-->
  <!-- TAGS
buffer_create_from_vertex_buffer_ext
-->

</body></html>