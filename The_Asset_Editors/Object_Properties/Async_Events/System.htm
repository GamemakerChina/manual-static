<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../../..",gTopicId="6.3.1.2.0_14"</script><script type="text/javascript" src="../../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>System</title><meta name="generator" content="Adobe RoboHelp 2022"><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Page detailing the System async event."><meta name="rh-index-keywords" content="Objects - Async System Event"><meta name="search-keywords" content="System,Gamepad Event,Xbox Live Event,UWP Event,Virtual Keyboard Event,Audio System Event,ev_async_system_event"><link rel="stylesheet" type="text/css" href="../../../assets/css/default.css"><script src="../../../assets/scripts/main_script.js" type="module"></script><meta name="brsnext" value="The_Asset_Editors/Object_Properties/Gesture_Events.htm"><meta name="brsprev" value="The_Asset_Editors/Object_Properties/Async_Events/Steam.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="System"><span>System</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1><span data-field="title" data-format="default">系统</span></h1><p><img alt="System Event" class="center" src="../../../assets/Images/Asset_Editors/Async_System.png">这个事件只能由来自系统级事件（如检测游戏手柄或自动登录Xbox Live）的<a class="tooltip" title="回调仅是一个函数，该函数先运行，然后在完成分配的工作后触发另一个函数（或代码块）。例如，功能sprite_add()将在加载精灵后在异步Image Loaded事件中触发回调。">回调</a>触发，它将返回一个存储在变量<span class="inline2"><a href="../../../GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a></span>中的<a href="../../../GameMaker_Language/GML_Reference/Data_Structures/DS_Maps/DS_Maps.htm">DS Map</a>，根据触发回调的系统级事件，包含不同的键/值对。这些事件是</p><h2>游戏手柄</h2><p>当这个事件被触发时，游戏手柄被连接或断开，它将返回<span class="inline">async_load</span>地图中的以下键/值对之一。</p><ul class="dropspotlist"><li class="dropspot">"<span class="inline">event_type</span>" - 收到的系统事件的类型，它将是以下字符串之一：<ul><li><span>"<span class="inline">gamepad discovered</span>" - 当系统报告有新的游戏手柄被连接时发生</span></li><li><span>"<span class="inline">gamepad lost</span>" - 当系统与游戏手柄失去连接时发生</span></li></ul></li><li class="dropspot">"<span class="inline">pad_index</span>" - 被添加或删除的游戏手柄的索引。</li></ul><p>这个事件现在允许你把所有的游戏手柄检查逻辑从Step事件或Alarm事件中移到系统事件中，并且只在实际需要时运行。</p><p class="note"><b><span data-conref="../../../assets/snippets/Tag_important.hts"><span class="important">重要</span></span>&nbsp;</b>除非你的游戏代码中至少有一个<a href="../../../GameMaker_Language/GML_Reference/Game_Input/GamePad_Input/Gamepad_Input.htm"><span class="inline">gamepad_*</span></a>&nbsp;函数或<a href="../../../Drag_And_Drop/Drag_And_Drop_Reference/Gamepad/Gamepad_Actions.htm">GML Visual action</a>，否则该事件不会被触发。只有在项目中使用这些函数时，运行器才会初始化游戏手柄子系统，所以如果它们不存在，添加/删除游戏手柄将不会触发系统事件。</p><h2>虚拟键盘</h2><p>当这个事件被触发时，虚拟键盘被打开或关闭，它将在 <span class="inline2"><a href="../../../GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a></span> 映射中返回以下键/值对：</p><ul class="dropspotlist"><li class="dropspot">"<span class="inline">event_type</span>" - 收到的系统事件的类型，对于虚拟键盘来说，它将是"<span class="inline">virtual keyboard status</span>"</li><li class="dropspot">"<span class="inline">screen_height</span>" - 虚拟键盘的高度（像素）。如果键盘是不可见的，这将是0。</li><li class="dropspot">"<span class="inline">keyboard_status</span>" - 键盘的当前状态，返回以下列字符串之一:<ul><li>"hiding"</li><li>"hidden"</li><li>"showing"</li><li>"visible"</li></ul></li></ul><p>有关虚拟键盘的更多信息，请参阅<a href="../../../GameMaker_Language/GML_Reference/Game_Input/Virtual_Keys_And_Keyboards/Virtual_Keys_And_Keyboards.htm">虚拟按键和虚拟键盘</a>。</p><h2>音频系统状态</h2><p>这个事件类型是专门为使用 HTML5 目标时使用的，因为每次网络音频上下文状态改变时，它都会被触发。这意味着，如果你有，例如，一段循环的背景音乐，那么你可以根据这个事件的触发，暂停它或停止并重新启动它。这可以通过在 <span class="inline2"><a href="../../../GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a></span> 映射中寻找以下键 / 值对来检查：</p><ul class="dropspotlist"><li class="dropspot">"<span class="inline">event_type</span>" - 收到的系统事件的类型，如果音频系统已经初始化或者上下文已经改变，则为字符串"<span class="inline">audio_system_status</span>"。</li></ul><p>如果这个事件类型被触发，那么在 <span class="inline2"><a href="../../../GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a></span> 地图中会有一个额外的键：</p><ul class="dropspotlist"><li class="dropspot">"<span class="inline">status</span>" - 音频系统的状态，它将是以下两个字符串之一</li><li class="dropspot">"<span class="inline">available</span>" - 音频系统已被初始化，可以播放声音</li><li class="dropspot">"<span class="inline">unavailable</span>" - 音频系统没有被初始化，或者当前上下文没有运行，所以不能播放声音（所有的声音播放函数将返回<span class="inline2">-1</span>）</li></ul><p>关于音频的具体功能的更多信息，请参阅<a href="../../../GameMaker_Language/GML_Reference/Asset_Management/Audio/Audio.htm">音频</a>。</p><p class="note"><b><span data-conref="../../../assets/snippets/Tag_note.hts"><span class="note">注意</span></span>&nbsp;</b>虽然这个事件是为HTML5目标设计的，但它也会在所有其他平台上被触发，但在所有平台上（除了HTML5），它只会在游戏开始时在音频引擎第一次初始化时被触发一次。</p><h2>杂项</h2><p>移动目标（Android、iOS和tvOS）上，当应用程序被重新带入焦点时，会触发一个事件。它的 <span class="inline2"><a href="../../../GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a></span> 映射包含一个单一的键。</p><ul class="colour"><li><span class="inline">"event_type"</span> : <span class="inline">"onResume"</span></li></ul><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back: <a href="../Async_Events.htm">异步事件</a></div><div style="float:right">Next: <a href="Audio_Playback.htm">音频播放</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>