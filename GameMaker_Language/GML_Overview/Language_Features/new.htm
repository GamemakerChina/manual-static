<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../../..",gTopicId="8.2.1.3.0_14"</script><script type="text/javascript" src="../../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>new</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../../assets/css/default.css" type="text/css"><script src="../../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Page outlining the new function"><meta name="rh-index-keywords" content="new"><meta name="search-keywords" content="new"><meta name="brsnext" value="GameMaker_Language/GML_Overview/Language_Features/delete.htm"><meta name="brsprev" value="GameMaker_Language/GML_Overview/Language_Features/throw.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="new"><span>new</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1>new</h1><p><span class="inline">new</span> 运算可以用来用一个函数来创建一个结构，该函数会在给定参数下被调用。然后，该函数可以用参数中的变量填充该结构--就像实例的创建事件将为实例设置初始变量一样--然后 <span class="inline">new</span> 操作符将返回该结构。在使用该操作符之前，需要注意的是，给出的函数<i>必须被标记为<span class="inline">构造</span>函数</i>，否则 <span class="inline">new</span> 操作符将不会创建结构（下面的代码示例显示了这一点，更多信息请参见<a href="../Structs.htm">结构</a>页面）。</p><p class="note"><span class="note">注意</span>您可以使用运行时函数 <a href="../../GML_Reference/Variable_Functions/instanceof.htm"><span class="inline">instanceof()</span></a> 检查结构以找出使用哪个函数创建它。</p><p>该运算符具有以下语法：</p><p class="code"><span>&lt;variable&gt; =</span> new &lt;function&gt; (&lt;argument&gt;, &lt;argument&gt;, ...);</p><p>当您将 new 运算符与函数一起使用时，它将返回存储在给定变量中的结构引用，允许您访问该结构以及函数在其中创建的任何变量。</p><p>以下示例显示了一个已定义为用作构造函数的函数：</p><p class="code">function init_struct(_a, _b, _c) constructor<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;a = _a;<br>&nbsp;&nbsp;&nbsp;&nbsp;b = _b;<br>&nbsp;&nbsp;&nbsp;&nbsp;c = _c;<br>}</p><p>然后可以将此函数与 <span class="inline">new</span> 运算符一起使用来创建结构并使用设置为函数中使用的参数值的变量填充它，如下所示：</p><p class="code">mystruct = new init_struct(10, 100, "Hello World");</p><p>请务必注意，对任何<em>未</em>标记为构造函数的函数调用 new 将导致<a href="../../../Additional_Information/Errors/Runner_Errors.htm">运行时异常</a>。</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back: <a href="../Language_Features.htm">Language&nbsp;Features</a></div><div style="float:right">Next: <a href="delete.htm">delete</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>