<!--?xml version="1.0" encoding="utf-8" ?--><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head>

  <script type="text/javascript" language="JavaScript">
    //<![CDATA[
    function reDo() {
      if (innerWidth != origWidth || innerHeight != origHeight)
        location.reload();
    }
    if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
      origWidth = innerWidth;
      origHeight = innerHeight;
      onresize = reDo;
    }
    onerror = null;
  //]]>
  </script>
  <style type="text/css">/*<![CDATA[*/

    < !-- div.WebHelpPopupMenu {
      position: absolute;
      left: 0px;
      top: 0px;
      z-index: 4;
      visibility: hidden;
    }

    p.WebHelpNavBar {
      text-align: right;
    }

    -->
  
/*]]>*/</style>

  <script type="text/javascript">//<![CDATA[

    gRootRelPath = "../../..";
    gCommonRootRelPath = "../../..";
    gTopicId = "8.2.2.21.0_2";
  
//]]></script>

  <script type="text/javascript" src="../../../template/scripts/rh.min.js"></script>
  <script type="text/javascript" src="../../../template/scripts/common.min.js"></script>
  <script type="text/javascript" src="../../../template/scripts/topic.min.js"></script>
  <script type="text/javascript" src="../../../template/scripts/topicwidgets.min.js"></script>
<script type="text/javascript" src="../../../whxdata/projectsettings.js"></script>
  <link rel="stylesheet" type="text/css" href="../../../template/styles/topic.min.css">
  <link rel="stylesheet" type="text/css" href="../../../template/Charcoal_Grey/topicheader.css">
  <meta name="topic-status" content="Draft">

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>debug_event</title>
  <meta name="generator" content="Adobe RoboHelp 2020">
  <link rel="stylesheet" href="../../../assets/css/default.css" type="text/css">
  <script src="../../../assets/scripts/main_script.js" type="module"></script>
  <meta name="rh-authors" content="Mark Alexander">
  <meta name="topic-comment" content="Reference page for debug_event">
  <meta name="rh-index-keywords" content="debug_event">
  <meta name="search-keywords" content="debug_event">
<meta name="brsnext" value="GameMaker_Language/GML_Reference/Debugging/debug_get_callstack.htm"><meta name="brsprev" value="GameMaker_Language/GML_Reference/Debugging/debug_mode.htm"></head>

<body>
  <div class="topic-header rh-hide" id="rh-topic-header">
    <div class="logo">
    </div>
    <div class="nav">
      <div class="title" title="debug_event">
        <span>debug_event</span>
      </div>
      <div class="gotohome" title="Click here to see this page in full context">
        <a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a>
      </div>
    </div>
  </div>
  <div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div>



  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1><span data-field="title" data-format="default">debug_event</span></h1>
  <p>此函数生成一个自定义调试事件，当游戏在<a href="../../../Introduction/Debugging.htm">调试模式</a>下运行时，该事件将显示在<a href="../../../IDE_Tools/The_Debugger.htm">调试器</a>的图表查看中。如果您需要在调试模式下在<i>而不是</i>时显示消息，请使用 <span class="inline3_func"><a href="show_debug_message.htm">show_debug_message</a></span>。</p>
  <p>该函数还将接受五个保留字符串，以帮助使用外部应用程序(如Visual Studio)执行调试。这些字符串是：</p>
  <ul class="colour">
    <li>"<span class="inline">OutputDebugOn</span>" - 这启用了对 <span class="inline">Windows</span> 目标的 <b>OutputDebugString</b> 的调用，这意味着所有调试输出-您在输出窗口中看到的所有内容-都可以通过 Visual Studio 或第三方应用程序查看。</li>
    <li>"<span class="inline">OutputDebugOff</span>" - 禁用上述行为。</li>
    <li>"<span class="inline">BreakOnError</span>" - 此选项仅适用于 <b>Windows YYC</b> 构建，这意味着如果运行时检测到错误，项目将 <i> 不会 </i> 显示常见的代码错误屏幕，而是继续运行并崩溃。这使您可以在调试时查看 Visual Studio 中的堆栈跟踪。</li>
    <li>"<span class="inline">ResourceCounts</span>" - 列出所有当前活动的资源，如数据结构、时间源、表面等。还返回一个结构 (信息如下)。将可选的 <span class="inline2">silent</span> 参数设置为 <span class="inline2">true</span> 以仅返回结构。</li>
    <li>"<span class="inline">DumpMemory</span>" - 提供有关当前内存使用情况的信息。还返回结构 (下面给出的信息)。&nbsp;将可选的 <span class="inline2">silent</span> 参数设置为 <span class="inline2">true</span> 以仅返回结构。</li>
  </ul>
  <p>&nbsp;</p>
  <p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down" href="#"><span data-open-text="true" data-skip-index="true">ResourceCounts</span><span data-close-text="true">ResourceCounts</span> 资源计数</a></p>
  <div class="droptext" data-targetname="drop-down">
    <p class="dropspot">当您使用 <span class="inline2">"ResourceCounts"</span> 参数调用 <span class="inline2">debug_event</span> 时，它将返回一个结构，其中包含有关游戏中所有活动资源的信息。</p>
    <p class="dropspot">每个资源都用三个属性表示：</p>
    <ul class="colour">
      <li class="dropspot"><span class="inline2">"&lt;resource&gt;Count"</span>: 调用函数时存在的此类资源的数量</li>
      <li class="dropspot"><span class="inline2">"&lt;resource&gt;MaxIndex"</span>: 资源存在的最大有效整数索引</li>
      <li class="dropspot"><span class="inline2">"&lt;resource&gt;ArrayAllocatedSize"</span>: 为给定资源类型创建的最大资源数量</li>
    </ul>
    <p class="dropspot">该结构具有以下成员：</p>
    <ul class="colour">
      <li class="dropspot"><span class="inline2">listCount</span></li>
      <li class="dropspot"><span class="inline2">listMaxIndex</span></li>
      <li class="dropspot"><span class="inline2">listArrayAllocatedSize</span></li>
      <li class="dropspot"><span class="inline2">mapCount</span></li>
      <li class="dropspot"><span class="inline2">mapMaxIndex</span></li>
      <li class="dropspot"><span class="inline2">mapArrayAllocatedSize</span></li>
      <li class="dropspot"><span class="inline2">queueCount</span></li>
      <li class="dropspot"><span class="inline2">queueMaxIndex</span></li>
      <li class="dropspot"><span class="inline2">queueArrayAllocatedSize</span></li>
      <li class="dropspot"><span class="inline2">gridCount</span></li>
      <li class="dropspot"><span class="inline2">gridMaxIndex</span></li>
      <li class="dropspot"><span class="inline2">gridArrayAllocatedSize</span></li>
      <li class="dropspot"><span class="inline2">priorityCount</span></li>
      <li class="dropspot"><span class="inline2">priorityMaxIndex</span></li>
      <li class="dropspot"><span class="inline2">priorityArrayAllocatedSize</span></li>
      <li class="dropspot"><span class="inline2">stackCount</span></li>
      <li class="dropspot"><span class="inline2">stackMaxIndex</span></li>
      <li class="dropspot"><span class="inline2">stackArrayAllocatedSize</span></li>
      <li class="dropspot"><span class="inline2">mpGridCount</span></li>
      <li class="dropspot"><span class="inline2">mpGridMaxIndex</span></li>
      <li class="dropspot"><span class="inline2">mpGridArrayAllocatedSize</span></li>
      <li class="dropspot"><span class="inline2">bufferCount</span></li>
      <li class="dropspot"><span class="inline2">bufferMaxIndex</span></li>
      <li class="dropspot"><span class="inline2">bufferArrayAllocatedSize</span></li>
      <li class="dropspot"><span class="inline2">surfaceCount</span></li>
      <li class="dropspot"><span class="inline2">audioEmitterCount</span></li>
      <li class="dropspot"><span class="inline2">audioEmitterMaxIndex</span></li>
      <li class="dropspot"><span class="inline2">audioEmitterArrayAllocatedSize</span></li>
      <li class="dropspot"><span class="inline2">partSystemCount</span></li>
      <li class="dropspot"><span class="inline2">partSystemMaxIndex</span></li>
      <li class="dropspot"><span class="inline2">partSystemArrayAllocatedSize</span></li>
      <li class="dropspot"><span class="inline2">partEmitterCount</span></li>
      <li class="dropspot"><span class="inline2">partTypeCount</span></li>
      <li class="dropspot"><span class="inline2">partTypeMaxIndex</span></li>
      <li class="dropspot"><span class="inline2">partTypeArrayAllocatedSize</span></li>
      <li class="dropspot"><span class="inline2">timeSourceCount</span></li>
      <li class="dropspot"><span class="inline2">spriteCount</span></li>
      <li class="dropspot"><span class="inline2">pathCount</span></li>
      <li class="dropspot"><span class="inline2">fontCount</span></li>
      <li class="dropspot"><span class="inline2">roomCount</span></li>
      <li class="dropspot"><span class="inline2">timelineCount</span></li>
    </ul>
    <p class="dropspot">&nbsp;</p>
    <ul class="colour">
    </ul>
  </div>
  <p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down1" href="#"><span data-open-text="true" data-skip-index="true">DumpMemory </span><span data-close-text="true">DumpMemory </span> 转储内存</a></p>
  <div class="droptext" data-targetname="drop-down1">
    <p class="dropspot">当您使用 <span class="inline2">"DumpMemory"</span> 参数调用 <span class="inline2">debug_event</span> 时，它将返回一个结构，其中包含有关游戏内存使用的信息。</p>
    <p class="dropspot">结构的成员将根据平台的不同而有所不同，但是所有平台在结构中至少具有以下值(以字节为单位)：</p>
    <ul class="colour">
      <li class="dropspot"><span class="inline2">totalUsed</span>: 您的游戏目前使用了多少内存</li>
      <li class="dropspot"><span class="inline2">free</span>: 有多少已分配的内存未使用</li>
      <li class="dropspot"><span class="inline2">peakUsage</span>: 您的游戏自启动以来使用的最大内存量</li>
    </ul>
    <p class="dropspot">在每个平台上测量这些值的方式是不同的。</p>
    <ul class="colour">
    </ul>
  </div>
  <p>&nbsp;</p>
  <h4>语法:</h4>
  <p class="code"><span data-field="title" data-format="default">debug_event</span>(string, [silent]);</p>
  <table>
    <tbody>
      <tr>
        <th>参数</th>
        <th>类型</th>
        <th>描述</th>
      </tr>
      <tr>
        <td>string</td>
        <td><span data-keyref="Type_String"><a target="_blank" href="../../../../GameMaker_Language/GML_Overview/Data_Types.htm">String</a></span></td>
        <td>要使用的自定义调试事件字符串或五个保留字符串之一。</td>
      </tr>
      <tr>
        <td>silent</td>
        <td><span data-keyref="Type_Bool"><a target="_blank" href="../../../../GameMaker_Language/GML_Overview/Data_Types.htm">Boolean</a></span></td>
        <td><span data-conref="../../../assets/snippets/Tag_optional.hts"><span class="optional">可选</span></span> 此参数使函数以结构形式将结果静默返回给运行器，而不是将值打印到控制台。默认为 <span class="inline2">false</span>。</td>
      </tr>
    </tbody>
  </table>
  <p>&nbsp;</p>
  <h4>返回:</h4>
  <p class="code"><span data-keyref="Type_Struct"><a target="_blank" href="../../../../GameMaker_Language/GML_Overview/Structs.htm">Struct</a></span>&nbsp;(for some options) or&nbsp;<span data-keyref="Type_Void">N/A</span></p>
  <p>&nbsp;</p>
  <h4><b>示例1：自定义字符串</b></h4>
  <p class="code">if !surface_exists(global.EffectsSurface)<br>
    {<br>
    &nbsp; &nbsp; <span data-field="title" data-format="default">debug_event</span>("Recreating Effects Surface");<br>
    &nbsp; &nbsp; global.EffectsSurface = surface_create(room_width, room_height);<br>
    }</p>
  <p>上面的代码检查表面是否存在，如果不存在，则在调试器的图形视图中触发调试事件(游戏必须在调试模式下运行才能显示)，并重新创建表面。</p>
  <p>&nbsp;</p>
  <h4>示例2：保留字符串</h4>
  <p class="code">var _counts =&nbsp;<span data-field="title" data-format="default">debug_event</span>("ResourceCounts");</p>
  <p>上面的代码触发了一个调试事件，消息为 "ResourceCounts"。因为这是一个保留字符串，所以资源计数被输出到控制台，并且也在结构中返回。此结构存储在临时变量 <span class="inline2">_counts</span> 中。要禁止输出到控制台，请将第二个参数设置为 <span class="inline2">true</span>：</p>
  <p class="code">var _counts =&nbsp;<span data-field="title" data-format="default">debug_event</span>("ResourceCounts", true);</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Back:&nbsp;<a href="Debugging.htm">调试</a></div>
        <div style="float:right">Next:&nbsp;<a href="debug_get_callstack.htm">debug_get_callstack</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2023 All Rights Reserved</span></h5>
  </div>
  <!-- KEYWORDS
debug_event
-->
  <!-- TAGS
debug_event
-->

</body></html>