<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../../..",gTopicId="8.2.1.3.0_3"</script><script type="text/javascript" src="../../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>do / until</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../../assets/css/default.css" type="text/css"><script src="../../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Page outlining the do / until functions"><meta name="rh-index-keywords" content="do,until"><meta name="search-keywords" content="do,until"><meta name="brsnext" value="GameMaker_Language/GML_Overview/Language_Features/for.htm"><meta name="brsprev" value="GameMaker_Language/GML_Overview/Language_Features/while.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="do / until"><span>do / until</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1>do / until</h1><p><span class="inline">do</span>函数是对一个或多个<a class="tooltip" title="在编程中，语句是用编程语言合法编写的单行代码，表示要执行的操作。语句可能具有自己的内部组件，包括表达式，运算符和函数。语句的一个示例是A = B +5。GameMakerStudio 2程序不过是一系列一起执行任务（如移动玩家）的一个或多个语句的序列。">语句</a><span class="glossextra"></span> 进行多次迭代的另一种方式，它实际上是一个"<span class="inline">do...until</span>"语句，因为您要告诉<span data-keyref="GameMaker Name">GameMaker</span>在特定的<a class="tooltip" title="表达式是一个或多个常量，变量，运算符和/或函数的组合，这些常量根据特定的优先级和关联规则进行解释以返回另一个值。一个简单的表达式是（5 + 5），它返回10。">表达式</a>返回<span class="inline">true</span>之前执行某些操作，所以不能只使用其中一个语句。它具有以下形式：</p><p class="code">do<br>{<br>&nbsp; &nbsp; &lt;statement&gt;;<br>&nbsp; &nbsp; &lt;statement&gt;;<br>&nbsp; &nbsp; ...<br>}<br>until (&lt;expression&gt;);</p><p>语句(可以是大括号内的多个语句的代码块<span class="inline"></span>)被执行，直到发现表达式为<span class="inline">true</span>，并且初始语句<strong>总是被至少执行一次</strong>。下面你可以看到一个使用<span class="inline">do...until</span>的典型方法的例子。</p><p class="code">do<br>{<br>&nbsp;&nbsp;&nbsp;&nbsp;x = random(room_width);<br>&nbsp;&nbsp;&nbsp;&nbsp;y = random(room_height);<br>}<br>until (place_free(x, y));</p><p>上述代码试图将当前对象放置在一个自由的位置上，并将至少设置一次x/y变量，然后根据需要进行多次<a class="tooltip" title="迭代是对项目代码中的一组操作的一次遍历。计算机编程中一种迭代形式是通过循环。循环将重复一段代码，直到满足条件为止，然后循环可以继续进行。每次计算机运行一个循环，就称为迭代。简单来说，迭代是一遍又一遍地重复执行特定代码段以执行特定操作的过程。">迭代</a><span class="glossextra">s</span>，直到<span class="inline">place_free()</span>表达式返回<span class="inline">true</span>。</p><p><strong>什么时候应该使用<span class="inline">do</span>/<span class="inline">until</span>循环？</strong>当您希望重复一个或多个语句，但不知道必须重复多少次时，应该使用该循环，并希望确保在循环结束之前至少运行<em>次</em>语句。</p><p>你也可以在你的<span class="inline">do</span>循环中使用<a href="break.htm"><span class="inline">break</span></a>和<a href="continue.htm"><span class="inline">continue</span></a>语句。使用<span class="inline">break</span>将立即退出循环，并在循环结束后继续处理事件或函数中的任何代码，例如。</p><p class="code">var _id = noone;<br>do<br>{<br>&nbsp; &nbsp; _id = list[| 0];<br>&nbsp; &nbsp; if (instance_exists(_id))<br>&nbsp; &nbsp; {<br>&nbsp; &nbsp; &nbsp; &nbsp; _break;<br>&nbsp; &nbsp; }<br>&nbsp; &nbsp; ds_list_delete(list, 0);<br>}<br>until (ds_list_empty(list));<br><br>target = _id;</p><p>在上面的代码中，我们创建了一个局部变量，并将其设置为持有关键字<a href="../Instance_Keywords.htm">noone</a>。然后我们执行一个<span class="inline">do/until</span>循环，检查DS列表的第一个位置，看它是否有一个有效的实例ID，如果有，我们<span class="inline">中断</span>循环，否则列表位置的值被删除。循环结束后(无论是通过<span class="inline">break</span>还是因为列表为空)，本地变量的值被分配给实例变量<span class="inline">target</span>。</p><p>在<span class="inline">do/until</span>循环中使用continue的一个例子是:</p><p class="code">do<br>{<br>&nbsp; &nbsp; var _x = random(room_width);<br>&nbsp; &nbsp; var _y = random(room_height);<br>&nbsp;&nbsp;&nbsp;&nbsp;if (instance_position(_x, y, obj_Enemy)<br>&nbsp;&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp; &nbsp; instance_create_layer(_x, _y, "Instances", obj_Enemy);<br>}<br>until (instance_count(obj_Enemy) &gt;= 10);</p><p>此代码将生成随机房间位置，然后检查对象<span class="inline">obj_Enemy</span>的实例是否存在于该位置。如果是，则使用<span class="inline">继续</span>终止当前循环迭代，并启动新的迭代;如果不是，则在随机位置创建对象<span class="inline">obj_Enemy</span>的实例。只有当房间中有10个或更多对象实例时，循环才会终止。</p><p>最后一个注意事项：小心<span class="inline">do</span>循环，因为您可以轻松地让它们永远循环，在这种情况下，您的游戏将挂起，不再对任何用户输入做出反应，它们将不得不强制关闭。</p><p>更多关于循环关键字的例子，请参见<a href="repeat.htm"><span class="inline">repeat</span></a>,<a href="while.htm"><span class="inline">while</span></a>,和<a href="for.htm"><span class="inline">for</span></a>章节。</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back: <a href="../Language_Features.htm">Language&nbsp;Features</a></div><div style="float:right">Next: <a href="for.htm">for</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>