<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../..",gTopicId="6.3.1.0_1"</script><script type="text/javascript" src="../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Event Order</title><meta name="generator" content="Adobe RoboHelp 2022"><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Page detailing the async events."><meta name="rh-index-keywords" content="Objects - Event Order"><meta name="search-keywords" content="event order"><link rel="stylesheet" type="text/css" href="../../assets/css/default.css"><script src="../../assets/scripts/main_script.js" type="module"></script><meta name="brsnext" value="The_Asset_Editors/Object_Properties/Other_Events.htm"><meta name="brsprev" value="The_Asset_Editors/Object_Properties/Object_Events.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="Event Order"><span>Event Order</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1><span data-field="title" data-format="default">事件顺序</span></h1><p>在考虑 <span data-keyref="GameMaker Name">GameMaker</span> 中的事件时，应注意<strong>无法清楚说明每个步骤中所有事件将发生的确切顺序</strong>，这仅仅是因为它取决于 <span data-keyref="GameMaker Name">GameMaker</span> 的内部工作方式，并且随着软件的开发，这可能会随着软件的开发或基于运行游戏的平台而发生变化。但是，某些事件将<em>始终</em>以相同的顺序运行。</p><h2 id="upon_entering_a_room">进入房间后</h2><p>总是以相同方式发生的第一组事件是第一次进入房间时发生的事件。不同事件的触发顺序是：</p><ul class="colour"><li>根据房间的 <a href="../Room_Properties/Room_Properties.htm#creation_order">实例创建顺序</a> ，依次创建所有实例。具体来说，对于每个实例：<ul><li>它被创建(相当于调用 <span class="inline3_func"><a href="../../GameMaker_Language/GML_Reference/Asset_Management/Instances/instance_create_depth.htm">instance_create_depth</a></span> / <span class="inline3_func"><a href="../../GameMaker_Language/GML_Reference/Asset_Management/Instances/instance_create_layer.htm">instance_create_layer</a></span> 在代码中)：<ul><li>初始化实例的 <a href="Object_Variables.htm">对象变量</a> 。</li><li>将为实例执行 <strong>创建事件</strong> 。</li></ul></li><li>它执行它的 <strong>实例创建代码</strong> (如果有的话)。</li></ul></li><li><strong>游戏开始事件</strong>-对于从<a href="../Rooms.htm">房间编辑器</a>放置在房间中的所有实例，此事件在游戏的第一个房间中触发一次(请注意，调用<span class="inline3_func"><a href="../../GameMaker_Language/GML_Reference/General_Game_Control/game_restart.htm">game_restart</a></span>将再次触发此事件)。</li><li><strong>房间创建代码</strong>-这是在<a href="../Rooms.htm">房间编辑器</a>中编写的首次进入房间时的一次性代码。</li><li><strong>所有实例的房间启动事件</strong>-事件的"其他"类别之一，将为所有实例触发，<a href="../../GameMaker_Language/GML_Reference/Asset_Management/Instances/Instance_Variables/persistent.htm">持久</a>或其他。</li></ul><p class="note"><span data-conref="../../assets/snippets/Tag_note.hts"><span class="note">注意</span></span>您还可以通过在<a href="../Room_Properties/Layer_Properties.htm">实例层属性</a>窗口的列表中上下移动特定实例来设置在<a href="../Rooms.htm">房间编辑器</a>中创建特定实例的顺序。</p><h2 id="every_step_frame">每一步/帧</h2><p>除了这些特定事件之外，游戏步骤中的事件也总是以相同的顺序发生。但是，事件中实例的顺序并不总是得到保证，并且可能会在不同的 GameMaker 版本和目标平台之间有所不同。</p><p>作为一般规则，您可以依赖下面列出的事件顺序，但不能依赖房间中的实例执行某个事件的顺序。</p><p>例如，您将在下面看到"步"事件总是在"步开始"事件之后执行，但是您不能保证，例如，Object2 总是在 Object1 之后执行其步事件。如果您需要这样的执行顺序，则建议使用不同的事件(例如，如果您需要在 Object1 的步之后执行它，则将 Object2 的步代码放在步结束中)。</p><p>因此，当您的代码依赖于游戏中每个步骤的特定时间时，请使用下面列出的事件。简单地说，首先执行所有开始步骤事件，然后执行所有步骤事件，然后执行所有结束步骤事件，然后执行所有绘制事件，等等。</p><ul class="colour"><li><strong>开始步事件</strong></li><li><a href="../Timelines.htm"><strong>时间线</strong></a></li><li><a href="../../GameMaker_Language/GML_Reference/Time_Sources/Time_Sources.htm"><strong>时间源</strong></a><ul><li><strong>"瞬间" (更新)</strong></li><li><strong>回调</strong><ul><li><span class="inline2">time_source_global</span> 的子项 (请参阅&nbsp;<a href="../../GameMaker_Language/GML_Reference/Time_Sources/Built_In_Time_Sources.htm">内置时间源</a>)</li><li>由 <span class="inline2"><a href="../../GameMaker_Language/GML_Reference/Time_Sources/call_later.htm">call_later</a></span></li><li>派生的时间源<span class="inline2">time_source_game</span> 的子项(请参阅&nbsp;<a href="../../GameMaker_Language/GML_Reference/Time_Sources/Built_In_Time_Sources.htm">内置时间源</a>)</li></ul></li></ul></li><li><a href="../../GameMaker_Language/GML_Reference/Asset_Management/Instances/Instance_Variables/alarm.htm"><strong>计时器</strong></a></li><li><strong>步骤事件</strong>(注意，步骤事件在实例被放置到新位置之前执行，包括在跟随路径时)</li><li><strong>结束步事件</strong></li></ul><p>当所有步事件完成后，GameMaker 会在同一个游戏步骤中为所有实例执行绘制事件。在一个特定的事件(例如绘制结束)中，实例运行该事件的顺序取决于图层的顺序，例如深度最高的图层的实例最先绘制，深度最低的图层最后绘制。</p><p class="note"><span data-conref="../../assets/snippets/Tag_note.hts"><span class="note">注意</span></span> 深度最高的图层(首先绘制)显示在房间编辑器的<a href="../Room_Properties/Layer_Properties.htm">图层列表</a>的底部，而深度最低的图层显示在顶部(因为它"更接近"查看器)。</p><p>每个绘制事件都按此顺序(基于 <a href="../../GameMaker_Language/GML_Reference/Asset_Management/Instances/Instance_Variables/depth.htm">depth</a> 值)绘制实例，然后继续到下一个事件，重复相同的实例顺序(例如，从"绘制开始"移动到"绘制"，然后移动到"绘制结束")。</p><p>这是绘制事件的顺序：</p><ul class="colour"><li><strong>绘制前事件</strong></li><li><strong>绘制开始事件</strong></li><li><strong>绘制事件</strong></li><li><strong>绘制结束事件</strong></li><li><strong>绘制后事件</strong></li><li><strong>绘制GUI开始事件</strong></li><li><strong>绘制GUI事件</strong></li><li><strong>绘制GUI结束事件</strong></li></ul><p>有关这些事件如何与 <span data-keyref="GameMaker Name">GameMaker</span> 的绘制相关的更多详细信息，请参阅<a href="Draw_Events.htm">绘制事件</a>。</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back:&nbsp;<a href="Object_Events.htm">对象事件</a></div><div style="float:right">Next:&nbsp;<a href="Other_Events.htm">其他事件</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>