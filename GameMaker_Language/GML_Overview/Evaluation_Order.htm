<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../..",gTopicId="8.2.1.2_3"</script><script type="text/javascript" src="../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Evaluation Order</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../assets/css/default.css" type="text/css"><script src="../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Page outlining the Evaluation Order of arguments"><meta name="rh-index-keywords" content="Evaluation Order"><meta name="search-keywords" content="Evaluation Order"><meta name="brsnext" value="GameMaker_Language/GML_Overview/Accessors.htm"><meta name="brsprev" value="GameMaker_Language/GML_Overview/Instance_Keywords.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="Evaluation Order"><span>Evaluation Order</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1>运算顺序</h1><p>当使用GameMaker语言编程你的游戏时，你应该意识到函数调用参数<strong>并不能保证计算顺序</strong>。这意味着代码中函数的运行顺序会因平台而异，因此应该以显式的方式编写它们。这是由于不同目标平台之间的优化差异，例如在Windows目标函数参数可能从右向左计算，但在HTML5目标上，它们可能从左向右计算。因此，为了避免任何问题，你最好不要在一个函数调用的参数中调用多个函数，因为你可能会建立对求值顺序的依赖。</p><p>要了解这意味着什么，考虑以下代码，它有一个<a href="Script_Functions.htm">脚本函数</a> "<span class="inline">buffer_get_info</span>"，它调用几个<a href="Runtime_Functions.htm">运行时函数</a>并使用它们作为参数:</p><p class="code">buffer_seek(buff, buffer_seek_start, 0);<br>buffer_get_info(buffer_read(buff, buffer_s8), buffer_read(buff, buffer_s16),buffer_read(buff, buffer_s16));</p><p>现在，这里的问题是，在某些平台上，<i>最后的</i> <span class="inline">buffer_read()</span>将被<i>先调用</i>，因此脚本的所有参数都是错误的，因为数据是从缓冲区以“相反”的顺序读取的，正如您所理解的那样。这在这里产生了连锁反应，影响了<span class="inline">buffer_read()</span>函数的所有进一步值，因此传递给这个脚本函数的所有参数都是错误的!</p><p>要避免这种情况，您应该<i>以所需的顺序显式调用函数，并将返回的值存储在变量中，如下所示：</i></p><p class="code">var val[0] = buffer_read(buff, buffer_s8);<br>var val[1] = buffer_read(buff, buffer_s16);<br>var val[2] = buffer_read(buff, buffer_s16);<br>buffer_get_info(val[0], val[1], val[2]);</p><p>虽然它看起来似乎是一种更详细的方法，但它保持了一切清晰，并避免了任何可能的运算顺序问题。</p><p>使用<a class="tooltip" title="表达式是一个或多个常量，变量，运算符和/或函数的组合，这些常量根据特定的优先级和关联规则进行解释以返回另一个值。一个简单的表达式是（5 + 5），它返回10。">表达式</a><span class="glossextra"></span> 时也应注意，因为它们的计算顺序将根据要编译到的目标而改变。因此，在代码中使用表达式时，请确保使用括号<span class="inline">()</span>来正确控制操作顺序。这对于确保您的游戏在所有目标平台游戏中的正确行为非常重要，并且对于HTML5平台来说<i>是必不可少的</i>。<a href="Expressions_And_Operators.htm">表达式</a>上的页面对此进行了更详细的说明。</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back: <a href="GML_Overview.htm">GML&nbsp;Overview</a></div><div style="float:right">Next:&nbsp;<a href="Accessors.htm">访问器</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>