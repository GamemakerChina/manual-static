<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../..",gTopicId="6.2.0_5"</script><script type="text/javascript" src="../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>HTML5 Code Injection</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../assets/css/default.css" type="text/css"><script src="../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Gurpreet S. Matharoo"><meta name="topic-comment" content="Page detailing how HTML5 code injection works"><meta name="rh-index-keywords" content="Extensions - HTML5 Code Injection"><meta name="search-keywords" content="html5 code injection, javascript, html"><meta name="brsnext" value="The_Asset_Editors/Extension_Creation/Extended_Examples.htm"><meta name="brsprev" value="The_Asset_Editors/Extension_Creation/iOS_Extensions.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="HTML5 Code Injection"><span>HTML5 Code Injection</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1><span data-field="title" data-format="default">HTML5 代码注入</span></h1><p>您可以通过扩展将自定义 HTML 注入到游戏的 <span class="inline2">index.html</span> 文件中。这可以通过在扩展的编辑器中点击"平台设置"下的 "HTML5" 来完成：</p><p><img class="center" src="../../assets/Images/Asset_Editors/Editor_Extensions_HTML5.png"></p><h2>插入标签</h2><p>在"代码注入"窗口中，您可以为您的 <span class="inline2">index.html</span> 文件添加自定义的 HTML。通过使用以下标记，将此类 HTML 插入到 <span class="inline2">index.html</span> 文件的不同部分：</p><table><colgroup><col style="width:50%"><col style="width:50%"></colgroup><tbody><tr><th>Tag</th><th>描述</th></tr><tr><td><span class="inline">GM_HTML5_PreHead</span></td><td>HTML is inserted after the <span class="inline2">&lt;head&gt;</span> tag</td></tr><tr><td><span class="inline">GM_HTML5_PostHead</span></td><td>HTML is inserted after the <span class="inline2">&lt;/head&gt;</span> tag</td></tr><tr><td><span class="inline">GM_HTML5_PreStyle</span></td><td>HTML is inserted inside <span class="inline2">&lt;head&gt; &lt;/head&gt;</span>, but before <span class="inline2">&lt;style&gt;</span></td></tr><tr><td><span class="inline">GM_HTML5_PostStyle</span></td><td>HTML is inserted inside <span class="inline2">&lt;head&gt; &lt;/head&gt;</span>, but after <span class="inline2">&lt;/style&gt;</span></td></tr><tr><td><span class="inline">GM_HTML5_PreBody</span></td><td>HTML is inserted before the <span class="inline2">&lt;body&gt;</span> tag</td></tr><tr><td><span class="inline">GM_HTML5_PostBody</span></td><td>HTML is inserted after the <span class="inline2">&lt;/body&gt;</span> tag</td></tr></tbody></table><p>以下是注入到上述一些标记中的 HTML 代码示例：</p><p><img class="center" src="../../assets/Images/Asset_Editors/Editor_Extensions_HTML5_Example.png"></p><p>多个扩展名可以将代码注入到同一标记中，但是不能保证它们插入到最终的 HTML 文件中的顺序。</p><h2>变量</h2><p>在注入的 HTML5 代码中，您可以使用 GameMaker 提供的变量。您可以在上面的示例中看到这样的变量，它们包装在 <span class="inline2">${ }</span> 中。</p><p>您还可以使用 <span class="inline2">${YYEXTOPT_HTML5Injection_OPTIONNAME}</span> 语法读取您的自定义扩展选项。</p><p>以下内置变量可以与 <span class="inline2">${VARIABLE}</span> 语法一起使用：</p><table><tbody><tr><th>变量</th><th>描述</th></tr><tr><td><span class="inline">GM_HTML5_BrowserTitle</span></td><td>The title of the browser window</td></tr><tr><td><span class="inline">GM_HTML5_BackgroundColour</span></td><td>The background colour of the page</td></tr><tr><td><span class="inline">GM_HTML5_GameWidth</span></td><td>The width of the game's canvas (in pixels)</td></tr><tr><td><span class="inline">GM_HTML5_GameHeight</span></td><td>The height of the game's canvas (in pixels)</td></tr><tr><td><span class="inline">GM_HTML5_GameFolder</span></td><td>The name of the folder containing the HTML file</td></tr><tr><td><span class="inline">GM_HTML5_GameFilename</span></td><td>The name of the HTML file</td></tr><tr><td><span class="inline">GM_HTML5_CacheBust</span></td><td>A random value used for <a href="https://www.keycdn.com/support/what-is-cache-busting">cache-busting</a>; can be added as a URL parameter in custom links to prevent the browser from getting the cached version of a file</td></tr></tbody></table><h2>模板 HTML 文件</h2><p>您可以从<a href="../../Settings/Building_via_Command_Line.htm">运行时目录</a>下的 <span class="inline2">runtime-[version]/html5/index.html</span> 下获取模板 <span class="inline2">index.html</span> 文件。您可以在此处查看模板文件，以了解标签的插入位置。您可以制作修改后的副本并将其用于您的游戏，方法是将其添加为<a href="../../Settings/Included_Files.htm">包含文件</a>并在&nbsp;<a href="../../Settings/Game_Options/HTML5.htm#h">HTML5&nbsp;游戏选项</a>中选择它。</p><p>模板 HTML 文件将包含一些以 <span class="inline2">GM_HTML5_Inject*</span> 开头的标记。它们由 <span data-keyref="GameMaker Name">GameMaker</span> 用来从 <a href="../../Settings/Game_Options/HTML5.htm#h">HTML5 游戏选项</a>中注入值，因此不能用于插入自定义代码。</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back: <a href="../Extensions.htm">The Extension Editor</a></div><div style="float:right">Next:&nbsp;<a href="Extended_Examples.htm">示例代码</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>