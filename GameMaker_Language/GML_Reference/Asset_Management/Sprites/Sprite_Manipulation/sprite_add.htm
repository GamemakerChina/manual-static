<!--?xml version="1.0" encoding="utf-8" ?--><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head>

  <script type="text/javascript" language="JavaScript">
    //<![CDATA[
    function reDo() {
      if (innerWidth != origWidth || innerHeight != origHeight)
        location.reload();
    }
    if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
      origWidth = innerWidth;
      origHeight = innerHeight;
      onresize = reDo;
    }
    onerror = null;
  //]]>
  </script>
  <style type="text/css">/*<![CDATA[*/

    < !-- div.WebHelpPopupMenu {
      position: absolute;
      left: 0px;
      top: 0px;
      z-index: 4;
      visibility: hidden;
    }

    p.WebHelpNavBar {
      text-align: right;
    }

    -->
  
/*]]>*/</style>

  <script type="text/javascript">//<![CDATA[

    gRootRelPath = "../../../../..";
    gCommonRootRelPath = "../../../../..";
    gTopicId = "8.2.2.3.3.2.0_7";
  
//]]></script>

  <script type="text/javascript" src="../../../../../template/scripts/rh.min.js"></script>
  <script type="text/javascript" src="../../../../../template/scripts/common.min.js"></script>
  <script type="text/javascript" src="../../../../../template/scripts/topic.min.js"></script>
  <script type="text/javascript" src="../../../../../template/scripts/topicwidgets.min.js"></script>
<script type="text/javascript" src="../../../../../whxdata/projectsettings.js"></script>
  <link rel="stylesheet" type="text/css" href="../../../../../template/styles/topic.min.css">
  <link rel="stylesheet" type="text/css" href="../../../../../template/Charcoal_Grey/topicheader.css">
  <meta name="topic-status" content="Draft">

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>sprite_add</title>
  <meta name="generator" content="Adobe RoboHelp 2020">
  <link rel="stylesheet" href="../../../../../assets/css/default.css" type="text/css">
  <script src="../../../../../assets/scripts/main_script.js" type="module"></script>
  <meta name="rh-authors" content="Mark Alexander">
  <meta name="topic-comment" content="Page explaining the function sprite_add">
  <meta name="rh-index-keywords" content="sprite_add">
  <meta name="search-keywords" content="sprite_add">
<meta name="brsnext" value="GameMaker_Language/GML_Reference/Asset_Management/Sprites/Sprite_Manipulation/sprite_replace.htm"><meta name="brsprev" value="GameMaker_Language/GML_Reference/Asset_Management/Sprites/Sprite_Manipulation/sprite_exists.htm"></head>

<body>
  <div class="topic-header rh-hide" id="rh-topic-header">
    <div class="logo">
    </div>
    <div class="nav">
      <div class="title" title="sprite_add">
        <span>sprite_add</span>
      </div>
      <div class="gotohome" title="Click here to see this page in full context">
        <a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a>
      </div>
    </div>
  </div>
  <div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div>



  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1><span data-field="title" data-format="default">sprite_add</span></h1>
  <p>With this function you can add an image as a sprite, loading it from an external source where the image file to be loaded should <b>always</b> be in either <span class="inline">*.png</span>, <span class="inline">*.gif</span>, <span class="inline">*.jpg/jpeg</span> or <span class="inline">*.json</span> format (<span class="inline">*.json</span> files are used for loading <a href="../Skeletal_Animation/Skeletal_Animation.htm">skeleton animation sprites</a> made with Spine). The function returns the new sprite index which must then be used in all further code&nbsp;that relates to the sprite. If you use this function with HTML5 or are getting an image from a&nbsp;URL, this function will also generate an&nbsp;<a href="../../../../../The_Asset_Editors/Object_Properties/Async_Events/Image_Loaded.htm">Image Loaded</a>&nbsp;asynchronous event.</p>
  <p>要转换为动画精灵的所有图像-<span class="inline">*.gif</span>除外。(见下图)-应具有<a href="../../../../../The_Asset_Editors/Sprite_Properties/Sprite_Strips.htm">条带</a>格式(见下图)，并将按照规则 <b>精灵宽度=条带宽度/子图像</b> 将其拆分为指定数量的子图像。</p>
  <p><img alt="Example Sprite Strip" class="center" src="../../../../../assets/Images/Scripting_Reference/GML/Reference/Sprites/spr_strip.png"></p>
  <p>正如您在上图中所看到的，精灵被放置在深紫色的背景上，这可以通过将“ removeBack ”参数设置为<span class="inline2">true</span>来删除。它的工作原理是检查精灵的<i>左下角</i>像素的颜色，然后将其用作要删除的颜色。例如，在上面的图像中，如果我们将左下角的像素颜色设置为绿色，则精灵的所有绿色部分都将被删除，而紫色背景的其余部分将被忽略。</p>
  <p>当启用 "removeback" 时，源图像的 Alpha 通道被忽略，这意味着除 " 背景色 " 之外的所有像素都变得完全不透明。</p>
  <p>如果您选择“ RemoveBack ”选项，您可能还希望<span data-keyref="GameMaker Name">GameMaker</span>通过将“ Smooth ”参数设置为<span class="inline2">true</span>来平滑精灵的边缘。所有这些都是在精灵的背景被移除后，在精灵的边缘周围创建一个半透明的边界。</p>
  <p>Finally you can also specify the x and y <i>origin</i> for the sprite. This is the point where the sprite is "fixed" onto the instance that uses it, and is always calculated as relative to the (0,0) top left corner of one sprite sub-image. So, for example, a sprite that is 32 x 32 pixels with these values set to (16,16) will have its origin in the center.</p>
  <p>如果您正在添加一个<span class="inline">*.GIF</span>格式图像，则只需指定文件名和图像编号(第一帧的图像编号应为1)，并且可以将所有其他参数保留为0，注意<b>只会加载GIF的第一个图像</b>。对于<span class="inline">*.JSON</span>精灵，图像编号应为1，并且“ RemoveBack ”和“ Smooth ”设置将被忽略。</p>
  <p>By default all new sprites have their bounding boxes calculated automatically (the exact bounding box will depend on the size and transparency of the sprite), however you may wish to customise this, in which case you should also use the function <span class="inline3_func"><a href="sprite_collision_mask.htm">sprite_collision_mask</a></span>.</p>
  <p>需要注意的是，以这种方式添加精灵时所使用的内存将比您预期的要大。这是因为<span data-keyref="GameMaker Name">GameMaker</span>会将精灵存储为纹理页<i>，并且</i>它还会存储在GPU内存中，因此总内存将大于相同精灵的图像文件的预期内存。</p>
  <p class="note"><b><span data-conref="../../../../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span></b>&nbsp;When you load a sprite into <span data-keyref="GameMaker Name">GameMaker</span> you must remember to remove it again (with <span class="inline3_func"><a href="sprite_delete.htm">sprite_delete</a></span>) when no longer needed, otherwise there is risk of a memory leak which will slow down and eventually crash your game.</p>
  <p class="note"><b><span data-conref="../../../../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span></b>&nbsp;On <b>iOS</b>, if you are loading an included file from a folder, i.e.&nbsp;with a path something like <span class="inline2">"Backgrounds/background1.png"</span>, you do NOT need to include the folder as part of the path and simply supplying the file name is sufficient. On all other platforms you must supply the folder(s) as part of the path to the file.</p>
  <p class="note"><b><span data-conref="../../../../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span></b>&nbsp;On <b>HTML5</b>, if you are loading a sprite from a secure server you may need to set the cross-origin type and use a relative path instead of an absolute path. See&nbsp;<span class="inline3_func"><a href="../../../Asynchronous_Functions/HTTP/http_set_request_crossorigin.htm">http_set_request_crossorigin</a></span> for more details.</p>
  <p>&nbsp;</p>
  <h4>语法:</h4>
  <p class="code"><span data-field="title" data-format="default">sprite_add</span>(fname, imgnumb, removeback, smooth, xorig, yorig);</p>
  <table>
    <tbody>
      <tr>
        <th>参数</th>
        <th>类型</th>
        <th>描述</th>
      </tr>
      <tr>
        <td>fname</td>
        <td><span data-keyref="Type_String"><a target="_blank" href="../../../../../../GameMaker_Language/GML_Overview/Data_Types.htm">String</a></span></td>
        <td>要添加的文件的名称(字符串文件路径)。</td>
      </tr>
      <tr>
        <td>imgnum</td>
        <td><span data-keyref="Type_Real"><a target="_blank" href="../../../../../../GameMaker_Language/GML_Overview/Data_Types.htm">Real</a></span></td>
        <td>用于指示子图像的数量(1表示单个图像或<span class="inline">*.GIF</span>)。</td>
      </tr>
      <tr>
        <td>removeback</td>
        <td><span data-keyref="Type_Bool"><a target="_blank" href="../../../../../../GameMaker_Language/GML_Overview/Data_Types.htm">Boolean</a></span></td>
        <td>指示是否将具有背景色的所有像素(左下像素)设置为透明。</td>
      </tr>
      <tr>
        <td>smooth</td>
        <td><span data-keyref="Type_Bool"><a target="_blank" href="../../../../../../GameMaker_Language/GML_Overview/Data_Types.htm">Boolean</a></span></td>
        <td>指示透明时是否平滑边缘。</td>
      </tr>
      <tr>
        <td>xorig</td>
        <td><span data-keyref="Type_Real"><a target="_blank" href="../../../../../../GameMaker_Language/GML_Overview/Data_Types.htm">Real</a></span></td>
        <td>指示原点在精灵中的X位置。</td>
      </tr>
      <tr>
        <td>yorig</td>
        <td><span data-keyref="Type_Real"><a target="_blank" href="../../../../../../GameMaker_Language/GML_Overview/Data_Types.htm">Real</a></span></td>
        <td>指示原点在精灵中的Y位置。</td>
      </tr>
    </tbody>
  </table>
  <p>&nbsp;</p>
  <h4>返回:</h4>
  <p class="code"><span data-keyref="Type_Asset_Sprite"><a target="_blank" href="../../../../../../The_Asset_Editors/Sprites.htm">Sprite Asset</a></span></p>
  <p>&nbsp;</p>
  <h4>例子:</h4>
  <p class="code">spr = <span data-field="title" data-format="default">sprite_add</span>("player_5.png", 16, true, true, 0, 0);</p>
  <p>The above code loads a sprite into the game and stores its index in the variable <span class="inline2">spr</span>.</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Back: <a href="Sprite_Manipulation.htm">精灵操作</a></div>
        <div style="float:right">Next:&nbsp;<a href="sprite_add_ext.htm">sprite_add_ext</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2023 All Rights Reserved</span></h5>
  </div>
  <!-- KEYWORDS
sprite_add
-->
  <!-- TAGS
sprite_add
-->

</body></html>