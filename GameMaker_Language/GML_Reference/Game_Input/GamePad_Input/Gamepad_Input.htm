<!--?xml version="1.0" encoding="utf-8" ?--><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head>

  <script type="text/javascript" language="JavaScript">
    //<![CDATA[
    function reDo() {
      if (innerWidth != origWidth || innerHeight != origHeight)
        location.reload();
    }
    if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
      origWidth = innerWidth;
      origHeight = innerHeight;
      onresize = reDo;
    }
    onerror = null;
  //]]>
  </script>
  <style type="text/css">/*<![CDATA[*/

    < !-- div.WebHelpPopupMenu {
      position: absolute;
      left: 0px;
      top: 0px;
      z-index: 4;
      visibility: hidden;
    }

    p.WebHelpNavBar {
      text-align: right;
    }

    -->
  
/*]]>*/</style>

  <script type="text/javascript">//<![CDATA[

    gRootRelPath = "../../../..";
    gCommonRootRelPath = "../../../..";
    gTopicId = "8.2.2.8.5";
  
//]]></script>

  <script type="text/javascript" src="../../../../template/scripts/rh.min.js"></script>
  <script type="text/javascript" src="../../../../template/scripts/common.min.js"></script>
  <script type="text/javascript" src="../../../../template/scripts/topic.min.js"></script>
  <script type="text/javascript" src="../../../../template/scripts/topicwidgets.min.js"></script>
<script type="text/javascript" src="../../../../whxdata/projectsettings.js"></script>
  <link rel="stylesheet" type="text/css" href="../../../../template/styles/topic.min.css">
  <link rel="stylesheet" type="text/css" href="../../../../template/Charcoal_Grey/topicheader.css">
  <meta name="topic-status" content="Draft">

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Gamepad Input</title>
  <meta name="generator" content="Adobe RoboHelp 2020">
  <link rel="stylesheet" href="../../../../assets/css/default.css" type="text/css">
  <script src="../../../../assets/scripts/main_script.js" type="module"></script>
  <meta name="rh-authors" content="Mark Alexander">
  <meta name="topic-comment" content="Reference section for Gamepad Input">
  <meta name="rh-index-keywords" content="gp_face1,gp_face2,gp_face3,gp_face4,gp_shoulderl,gp_shoulderlb,gp_shoulderr,gp_shoulderrb,gp_select,gp_start,gp_stickl,gp_stickr,gp_padu,gp_padd,gp_padl,gp_padr,gp_axislh,gp_axislv,gp_axisrh,gp_axisrv,gp_axis_acceleration_x,gp_axis_acceleration_y,gp_axis_acceleration_z,gp_axis_angular_velocity_x,gp_axis_angular_velocity_y,gp_axis_angular_velocity_z,gp_axis_orientation_x,gp_axis_orientation_y,gp_axis_orientation_z,gp_axis_orientation_w">
  <meta name="search-keywords" content="Gamepad Input,gamepads,gp_face1,gp_face2,gp_face3,gp_face4,gp_shoulderl,gp_shoulderlb,gp_shoulderr,gp_shoulderrb,gp_select,gp_start,gp_stickl,gp_stickr,gp_padu,gp_padd,gp_padl,gp_padr,gp_axislh,gp_axislv,gp_axisrh,gp_axisrv,gp_axis_acceleration_x,gp_axis_acceleration_y,gp_axis_acceleration_z,gp_axis_angular_velocity_x,gp_axis_angular_velocity_y,gp_axis_angular_velocity_z,gp_axis_orientation_x,gp_axis_orientation_y,gp_axis_orientation_z,gp_axis_orientation_w">
<meta name="brsnext" value="GameMaker_Language/GML_Reference/Game_Input/GamePad_Input/gamepad_is_supported.htm"><meta name="brsprev" value="GameMaker_Language/GML_Reference/Game_Input/Gesture_Input/gesture_rotate_angle.htm"></head>

<body>
  <div class="topic-header rh-hide" id="rh-topic-header">
    <div class="logo">
    </div>
    <div class="nav">
      <div class="title" title="Gamepad Input">
        <span>Gamepad Input</span>
      </div>
      <div class="gotohome" title="Click here to see this page in full context">
        <a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a>
      </div>
    </div>
  </div>
  <div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div>



  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>游戏手柄输入</h1>
  <p><b></b><span data-keyref="GameMaker Name">GameMaker</span>具有许多专用函数，可用于检测来自多个连接的游戏手柄的模拟和数字控件。这些函数的工作原理类似于<a href="../Device_Input/Device_Input.htm">设备输入</a>，因为您可以检测到多达四个不同的XInput游戏垫连接 (最多8个DirectInput游戏手柄)，并使用相同的函数处理每个输入。请注意，将游戏手柄插入设备 (或将其删除) 后，将触发异步<a href="../../../../The_Asset_Editors/Object_Properties/Async_Events.htm">系统事件</a>，您可以在其中使用适当的函数处理情况。</p>
  <p>游戏手柄 “插槽” 是从 0 向上索引的，而游戏手柄分配的实际插槽将取决于多种因素，尤其是运行项目的操作系统。在<strong>Windows</strong>目标上，包括 0-3 在内的插槽<i>仅适用于 Xinput 游戏手柄</i>，即：Xbox360 控制器和兼容产品。但是，您也可以查看<i>DirectInput</i>游戏手柄的插槽 4-11(含)，这意味着通过这些插槽连接时，您可以检测到许多其他型号的控制器。在其他平台上，可以在操作系统分配的<em>任何</em>插槽上检测到 pad，这些插槽可能是插槽 3 或插槽 20 或更多。例如，<strong>Android</strong>设备会将蓝牙游戏手柄存储在插槽中，然后在将来为该游戏手柄保留该插槽，无论它是否连接，因此<em>不能</em>假设单个连接的游戏手柄已连接到插槽 0，因为事实可能并非如此。</p>
  <p>值得注意的是，当在Windows上使用DirectInput游戏手柄或在其他平台上使用通用游戏手柄时，下面给出的常量<strong>可能与您在按下按钮时所期望的完全匹配</strong>，这是由于控制器制造商实现API的零散和非标准化方式。因此，建议您在游戏中有某种游戏手柄设置屏幕，人们可以根据来自任何连接设备的输入重新定义游戏手柄按钮，以缓解任何问题 (有游戏手柄 “映射” 函数可以帮助在Windows桌面，Ubuntu，macOS，和Android的目标，而在所有其他的，你将需要做到这一点自己使用代码)。</p>
  <h2>输入常数</h2>
  <p>使用游戏手柄函数时，输入可以来自<strong>axes</strong>、<strong>buttons</strong>或<strong>hats</strong>，<span data-keyref="GameMaker Name">GameMaker</span>会将其分配给以下内置常量(注意 “十字键” 通常只能在非标准控制器上检测到)：</p>
  <table>
    <tbody>
      <tr>
        <th colspan="2"><span data-keyref="Type_Constant_Gamepad_Button"><a target="_blank" href="../../../../../GameMaker_Language/GML_Reference/Game_Input/GamePad_Input/gamepad_axis_value.htm">游戏手柄按钮常数</a></span></th>
      </tr>
      <tr>
        <th>常量</th>
        <th>描述</th>
      </tr>
      <tr>
        <td><span class="inline">gp_face1</span></td>
        <td>Top button 1 (this maps to the <i>"A"</i> on an Xbox 360 controller and the <i>cross</i> on a PS controller)</td>
      </tr>
      <tr>
        <td><span class="inline">gp_face2</span></td>
        <td>Top button 2 (this maps to the <i>"B"</i> on an Xbox 360 controller and the <i>circle</i> on a PS controller)</td>
      </tr>
      <tr>
        <td><span class="inline">gp_face3</span></td>
        <td>Top button 3 (this maps to the <i>"X"</i> on an Xbox 360 controller and the <i>square</i> on a PS controller)</td>
      </tr>
      <tr>
        <td><span class="inline">gp_face4</span></td>
        <td>Top button 4 (this maps to the <i>"Y"</i> on an Xbox 360 controller and the <i>triangle</i> on a PS controller)</td>
      </tr>
      <tr>
        <td><span class="inline">gp_shoulderl</span></td>
        <td>Left shoulder button</td>
      </tr>
      <tr>
        <td><span class="inline">gp_shoulderlb</span></td>
        <td>Left shoulder trigger</td>
      </tr>
      <tr>
        <td><span class="inline">gp_shoulderr</span></td>
        <td>Right shoulder button</td>
      </tr>
      <tr>
        <td><span class="inline">gp_shoulderrb</span></td>
        <td>Right shoulder trigger</td>
      </tr>
      <tr>
        <td><span class="inline">gp_select</span></td>
        <td>The select button (on a DS4 controller, this triggers when you press the touchpad down)</td>
      </tr>
      <tr>
        <td><span class="inline">gp_start</span></td>
        <td>The start button (this is the "options" button on a PS4 controller)</td>
      </tr>
      <tr>
        <td><span class="inline">gp_stickl</span></td>
        <td>The left stick pressed (as a button)</td>
      </tr>
      <tr>
        <td><span class="inline">gp_stickr</span></td>
        <td>The right stick pressed (as a button)</td>
      </tr>
      <tr>
        <td><span class="inline">gp_padu</span></td>
        <td>D-pad up</td>
      </tr>
      <tr>
        <td><span class="inline">gp_padd</span></td>
        <td>D-pad down</td>
      </tr>
      <tr>
        <td><span class="inline">gp_padl</span></td>
        <td>D-pad left</td>
      </tr>
      <tr>
        <td><span class="inline">gp_padr</span></td>
        <td>D-pad right</td>
      </tr>
    </tbody>
  </table>
  <table>
    <colgroup>
      <col>
      <col>
    </colgroup>
    <tbody>
      <tr>
        <th colspan="2"><span data-keyref="Type_Constant_Gamepad_Axis"><a target="_blank" href="../../../../../GameMaker_Language/GML_Reference/Game_Input/GamePad_Input/gamepad_axis_value.htm">游戏手柄轴常数</a></span></th>
      </tr>
      <tr>
        <th>常量</th>
        <th>描述</th>
      </tr>
      <tr>
        <td><span class="inline">gp_axislh</span></td>
        <td>Left stick horizontal axis (analog)</td>
      </tr>
      <tr>
        <td><span class="inline">gp_axislv</span></td>
        <td>Left stick vertical axis (analog)</td>
      </tr>
      <tr>
        <td><span class="inline">gp_axisrh</span></td>
        <td>Right stick horizontal axis (analog)</td>
      </tr>
      <tr>
        <td><span class="inline">gp_axisrv</span></td>
        <td>Right stick vertical axis (analog)</td>
      </tr>
      <tr>
        <th colspan="2">以下常量只能与 PS4 或 PS5 上的 DualSense 游戏手柄一起使用</th>
      </tr>
      <tr>
        <td><span class="inline">gp_axis_acceleration_x</span>*</td>
        <td>The gamepad's acceleration on the X axis</td>
      </tr>
      <tr>
        <td><span class="inline">gp_axis_acceleration_y</span>*</td>
        <td>The gamepad's acceleration on the Y axis</td>
      </tr>
      <tr>
        <td><span class="inline">gp_axis_acceleration_z</span>*</td>
        <td>The gamepad's acceleration on the Z axis</td>
      </tr>
      <tr>
        <td><span class="inline">gp_axis_angular_velocity_x</span>*</td>
        <td>The gamepad's angular velocity on the X axis</td>
      </tr>
      <tr>
        <td><span class="inline">gp_axis_angular_velocity_y</span>*</td>
        <td>The gamepad's angular velocity on the Y axis</td>
      </tr>
      <tr>
        <td><span class="inline">gp_axis_angular_velocity_z</span>*</td>
        <td>The gamepad's angular velocity on the Z axis</td>
      </tr>
      <tr>
        <td><span class="inline">gp_axis_orientation_x</span>*</td>
        <td>The gamepad's X orientation</td>
      </tr>
      <tr>
        <td><span class="inline">gp_axis_orientation_y</span>*</td>
        <td>The gamepad's Y orientation</td>
      </tr>
      <tr>
        <td><span class="inline">gp_axis_orientation_z</span>*</td>
        <td>The gamepad's Z orientation</td>
      </tr>
      <tr>
        <td><span class="inline">gp_axis_orientation_w</span>*</td>
        <td>The gamepad's W orientation</td>
      </tr>
    </tbody>
  </table>
  <p class="note"><span class="note">注意</span>游戏手柄的<strong>方向</strong>是一个<a href="https://en.wikipedia.org/wiki/Quaternion" title="Quaternion">四元数</a>，这就是为什么它有四个值(X，y，Z和w)。<br><br>*这些常量仅在PS4和PS5上受支持，在其他平台上使用时，输入函数将返回<span class="inline">0</span>，即使使用DualSense游戏手柄也是如此。</p>
  <p>为了更好地了解每个常量代表控制器的哪一部分，您可以参考标准XInput游戏手柄的以下图像:</p>
  <p><img alt="Xinput gamepad illustration" class="center" src="../../../../assets/Images/Scripting_Reference/GML/Reference/Game_Input/GamePad.png"></p>
  <h2>函数</h2>
  <p>下面，您可以找到所有gamepad函数的列表：</p>
  <ul class="colour">
    <li><a href="gamepad_is_supported.htm">gamepad_is_supported</a></li>
    <li><a href="gamepad_is_connected.htm">gamepad_is_connected</a></li>
    <li><a href="gamepad_get_guid.htm">gamepad_get_guid</a></li>
    <li><a href="gamepad_get_device_count.htm">gamepad_get_device_count</a></li>
    <li><a href="gamepad_get_description.htm">gamepad_get_description</a></li>
    <li><a href="gamepad_get_button_threshold.htm">gamepad_get_button_threshold</a></li>
    <li><a href="gamepad_get_axis_deadzone.htm">gamepad_get_axis_deadzone</a></li>
    <li><a href="gamepad_get_option.htm">gamepad_get_option</a></li>
    <li><a href="gamepad_set_button_threshold.htm">gamepad_set_button_threshold</a></li>
    <li><a href="gamepad_set_axis_deadzone.htm">gamepad_set_axis_deadzone</a></li>
    <li><a href="gamepad_set_vibration.htm">gamepad_set_vibration</a></li>
    <li><a href="gamepad_set_colour.htm">gamepad_set_colour</a></li>
    <li><a href="gamepad_set_option.htm">gamepad_set_option</a></li>
    <li><a href="gamepad_axis_count.htm">gamepad_axis_count</a></li>
    <li><a href="gamepad_axis_value.htm">gamepad_axis_value</a></li>
    <li><a href="gamepad_button_check.htm">gamepad_button_check</a></li>
    <li><a href="gamepad_button_check_pressed.htm">gamepad_button_check_pressed</a></li>
    <li><a href="gamepad_button_check_released.htm">gamepad_button_check_released</a></li>
    <li><a href="gamepad_button_count.htm">gamepad_button_count</a></li>
    <li><a href="gamepad_button_value.htm">gamepad_button_value</a></li>
    <li><a href="gamepad_hat_count.htm">gamepad_hat_count</a></li>
    <li><a href="gamepad_hat_value.htm">gamepad_hat_value</a></li>
  </ul>
  <p>&nbsp;</p>
  <p>以下游戏板函数也存在，并且用于将内置常数重新映射到给定游戏手柄的直接物理输入。这些函数仅适用于 Windows 桌面、Ubuntu、macOS 和 Android 目标平台，在 Windows 上仅对直接输入设备有效。<span data-keyref="GameMaker Name">GameMaker</span>提供基于<a href="https://github.com/gabomdq/SDL_GameControllerDB" target="_blank">SDL Gamepad Controller DB</a>的多种不同游戏手柄的映射，但由于控制器类型和品牌数量巨大，无法将 GML 常量映射到每个品牌和型号的正确输入，因此使用这些函数，您可以创建自己的自定义映射。</p>
  <ul class="colour">
    <li><a href="gamepad_get_mapping.htm">gamepad_get_mapping</a></li>
    <li><a href="gamepad_test_mapping.htm">gamepad_test_mapping</a></li>
    <li><a href="gamepad_remove_mapping.htm">gamepad_remove_mapping</a></li>
  </ul>
  <p>&nbsp;</p>
  <p>值得注意的是，直接输入游戏手柄以<i>合作模式</i>运行，这意味着您的游戏只有在前台应用程序时才能访问它们，反过来，如果游戏失去焦点，则会导致直接输入控制器 “丢失”，然后在重新聚焦时再次 “找到” (这可以在系统事件中检测到并处理)。同样，当游戏不在焦点中时，不会检测到来自游戏手柄的输入，并且我们建议您使用函数<a href="../../OS_And_Compiler/os_is_paused.htm"><span class="inline">os_is_pauzed()</span></a>或<a href="../../Cameras_And_Display/The_Game_Window/window_has_focus.htm"><span class="inline">window_has_focus()</span></a>来检测到这一点，并暂停游戏或类似在游戏失去焦点时被按住的任何按钮将保持被按住的状态，直到游戏重新获得焦点。</p>
  <h2>兼容性</h2>
  <p>以下列表显示了当前跨平台的兼容性(请注意，这将随着以后的更新而改变)：</p>
  <ul class="colour">
    <li><strong>Windows</strong>完全支持，一次最多允许12个连接的设备 (编号从0到11，其中0- 3是XInput设备，4- 11是DirectInput设备)。还允许重新映射控制器常数。</li>
    <li><strong>macOS</strong>最多允许同时连接 4 台设备，而这些设备只能是 Playstation3 或 Xbox 360 类型。请注意，Mac Game Options 中的 “为 Mac AppStore 构建” 选项需要关闭，才能使用键盘支持。还允许重新映射控制器常量。</li>
    <li><strong>Ubuntu</strong>也支持 Gamepad 输入，但你可能需要从 Ubuntu 仓库中安装其他库。你可以通过打开命令行终端并键入以下内容来轻松做到这一点(这将安装对操纵杆/游戏手柄以及操纵杆/游戏手柄 API 本身的 GUI 支持——<i>不允许</i>重新映射控制器常量)： <p class="code">sudo apt-get install jstest-gtk<br> sudo apt-get install joystick.</p></li>
    <li>使用游戏手柄的<strong>HTML5</strong>游戏被大多数主要浏览器支持，但<i>Safari</i>除外。不允许<i>重新映射控制器常量。</i></li>
    <li>Web浏览器仅在按下按钮或移动轴时检测游戏手柄，因此在游戏开始时可能无法使用。这适用于<strong>GX.games</strong>和<strong>HTML</strong>目标平台。</li>
    <li>通过iCade机柜，GamePad支持也扩展到了<strong>iOS</strong>。左轴映射到操纵杆控制器(尽管输入是数字的，而不是模拟的)，四个“面”按钮映射到机柜前面的按钮，四个肩部按钮映射到机柜后面的按钮。</li>
    <li><strong>Android</strong>(和<strong>Amazon Fire</strong>)导出支持Nyko控制器和通用蓝牙控制器，但仅当启用它们时，这意味着您必须勾选Android游戏选项的<a href="../../../../Settings/Game_Options/Android.htm">常规</a>部分中的iCade/Bluetooth选项。它们需要API级别12才能完全工作，需要注意的是，<span data-keyref="GameMaker Name">GameMaker</span>会将与您的设备配对的任何蓝牙设备注册为已连接，无论其是否实际连接。因此，在分配和检查“插槽”时应考虑到这一点。请注意，也允许重新映射控制器常量。</li>
    <li>在<strong>PS4</strong>上，如果要使用触摸板跟踪，需要使用<a href="../Device_Input/Device_Input.htm"><span class="inline">device_mouse_*</span></a>按钮。不允许<i>重新映射控制器常量。</i></li>
    <li><strong>Xbox One</strong>和<strong>任天堂开关</strong>目标完全支持游戏手柄，但不允许重新映射控制器常数<i>。</i></li>
  </ul>
  <p>理想情况下，在<i>所有</i>目标平台上，您要枚举可用的游戏手柄 “插槽” 列表，然后检查它们以查看是否检测到任何设备，如下:</p>
  <p class="code">var _maxpads = gamepad_get_device_count();<br>
    <br>
    for (var i = 0; i &lt; _maxpads; i++)<br>
    {<br>
    &nbsp; &nbsp; if (gamepad_is_connected(i))<br>
    &nbsp; &nbsp; {<br>
    &nbsp; &nbsp; &nbsp; &nbsp; // do stuff with pad "i"<br>
    &nbsp; &nbsp; }<br>
    }
  </p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Back: <a href="../Game_Input.htm">游戏输入</a></div>
        <div style="float:right">Next: <a href="../Virtual_Keys_And_Keyboards/Virtual_Keys_And_Keyboards.htm">Virtual Keys and Virtual Keyboards</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2023 All Rights Reserved</span></h5>
  </div>
  <!-- KEYWORDS
Gamepad Input Functions
gp_face1
gp_face2
gp_face3
gp_face4
gp_shoulderl
gp_shoulderlb
gp_shoulderr
gp_shoulderrb
gp_select
gp_start
gp_stickl
gp_stickr
gp_padu
gp_padd
gp_padl
gp_padr
gp_axislh
gp_axislv
gp_axisrh
gp_axisrv
gp_axis_acceleration_x
gp_axis_acceleration_y
gp_axis_acceleration_z
gp_axis_angular_velocity_x
gp_axis_angular_velocity_y
gp_axis_angular_velocity_z
gp_axis_orientation_x
gp_axis_orientation_y
gp_axis_orientation_z
gp_axis_orientation_w
-->
  <!-- TAGS
gamepad_functions
-->

</body></html>