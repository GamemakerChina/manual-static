<!--?xml version="1.0" encoding="utf-8" ?--><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head>

  <script type="text/javascript" language="JavaScript">
    //<![CDATA[
    function reDo() {
      if (innerWidth != origWidth || innerHeight != origHeight)
        location.reload();
    }
    if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
      origWidth = innerWidth;
      origHeight = innerHeight;
      onresize = reDo;
    }
    onerror = null;
  //]]>
  </script>
  <style type="text/css">/*<![CDATA[*/

    < !-- div.WebHelpPopupMenu {
      position: absolute;
      left: 0px;
      top: 0px;
      z-index: 4;
      visibility: hidden;
    }

    p.WebHelpNavBar {
      text-align: right;
    }

    -->
  
/*]]>*/</style>

  <script type="text/javascript">//<![CDATA[

    gRootRelPath = "../../..";
    gCommonRootRelPath = "../../..";
    gTopicId = "8.2.2.21.1";
  
//]]></script>

  <script type="text/javascript" src="../../../template/scripts/rh.min.js"></script>
  <script type="text/javascript" src="../../../template/scripts/common.min.js"></script>
  <script type="text/javascript" src="../../../template/scripts/topic.min.js"></script>
  <script type="text/javascript" src="../../../template/scripts/topicwidgets.min.js"></script>
<script type="text/javascript" src="../../../whxdata/projectsettings.js"></script>
  <link rel="stylesheet" type="text/css" href="../../../template/styles/topic.min.css">
  <link rel="stylesheet" type="text/css" href="../../../template/Charcoal_Grey/topicheader.css">
  <meta name="topic-status" content="Draft">
<link rel="stylesheet" type="text/css" href="../../../assets/css/default.css"><script src="../../../../assets/scripts/main_script.js"></script>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="generator" content="Adobe RoboHelp 2022">
  <title>The Debug Overlay</title>
  <meta name="topic-status" content="Draft">
  <link rel="stylesheet" type="text/css" href="../../../assets/css/default.css">
  <meta name="rh-authors" content="Bart Teunis">
  <meta name="topic-comment" content="Reference page for the debug overlay">
  <meta name="template" content="../../../assets/masterpages/Manual_Page.htt">
  <meta name="search-keywords" content="debug,overlay">
  <meta name="rh-index-keywords" content="The Debug Overlay">
</head>

<body>
  <div class="topic-header rh-hide" id="rh-topic-header">
    <div class="logo">
    </div>
    <div class="nav">
      <div class="title" title="The Debug Overlay">
        <span>The Debug Overlay</span>
      </div>
      <div class="gotohome" title="Click here to see this page in full context">
        <a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a>
      </div>
    </div>
  </div>
  <div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div>



  <div>
  </div>
  <div>
  <h1><span data-field="title" data-format="default">调试覆盖视图</span> The Debug Overlay</h1>
  <p><span data-field="title" data-format="default">调试覆盖视图 </span>是一个游戏内的叠加视图，显示有关游戏的各种实时调试信息。</p>
  <p>默认情况下，它包括以下三个窗口：<strong>FPS(帧数)</strong>(默认打开)、<strong>Log(日志)</strong>和<strong>Audio(音频)</strong>。此外，它还在右上角显示<span data-keyref="GameMaker Name">GameMaker</span>版本，以及项目的版本和名称。</p>
  <p><span data-field="title" data-format="default">调试覆盖视图</span>可以使用函数<span class="inline3_func"><a href="show_debug_overlay.htm">show_debug_overlay</a></span>和<span class="inline3_func"><a href="show_debug_log.htm">show_debug_log</a></span>访问调试视图，第一个函数在<strong>FPS</strong>窗口打开时打开，第二个函数在<strong>Log</strong>窗口打开时打开。</p>
  <p>你可以在<span data-field="title" data-format="default">调试视图中</span>使用<span class="inline3_func"><a href="dbg_view.htm">dbg_view</a> </span> 来自定义你自己的视图。调试视图可以使用<span class="inline3_func"><a href="dbg_section.htm">dbg_section</a></span>添加节，您可以向其中添加控件，如滑块，字符串输入框等。这些允许您通过使用 <span class="inline3_func"><a href="../Variable_Functions/ref_create.htm">ref_create</a></span>创建的引用来更改变量的值。<strong>Debug</strong>菜单下的 <strong>DebugView</strong>选项决定自定义视图是否可见。所有的调试视图都列在<strong>views</strong>菜单下，可以在这里切换它们的可见性。</p>
  <p><img class="center" height="381" src="../../../assets/Images/Scripting_Reference/GML/Reference/Debug/debug_overlay_1.png" width="1322"></p>
  <h2 id="debug">Debug</h2>
  <h3 id="fps">FPS</h3>
  <p>此窗口的标题栏显示纹理交换的当前数量、顶点批处理的数量、当前FPS(<span class="inline2"><a href="fps_real.htm">fps_real</a></span>)以及显示堆叠时间值的栏：</p>
  <p><img class="center" src="../../../assets/Images/Scripting_Reference/GML/Reference/Debug/debug_overlay_fps.png"></p>
  <p class="note"><span data-conref="../../../assets/snippets/Tag_note.hts"><span class="note">注意</span></span> 纹理交换和顶点批处理永远不会为零，默认下会显示2或3的值，因为即使有一个空房间和没有对象<span data-keyref="GameMaker Name">GameMaker</span>仍然需要绘制和批处理东西。</p>
  <p>在此窗口中，您有两个部分：一个图表和一个条形图。</p>
  <p>默认情况下，图形显示FPS(<span class="inline2"><a href="fps_real.htm">fps_real</a></span>)，其中水平轴是自打开FPS菜单以来经过的时间量，垂直轴是帧时间(以秒为单位)。</p>
  <p><img class="center" src="../../../assets/Images/Scripting_Reference/GML/Reference/Debug/debug_overlay_graph_1.png"></p>
  <p><strong>帧时间 FrameTime</strong>值是处理每个帧所用的时间，以秒为单位。此值应小于单个帧所需的时间。如果游戏速度是例如设置为60 FPS，则每帧最多可占用1/60 = 0.0166……秒。如果超过这个时间，则意味着<span data-keyref="GameMaker Name">GameMaker</span>仍在处理当前帧，而它应该已经在处理下一帧。因此，(真实的)FPS将低于游戏速度。</p>
  <p>启用 <strong>堆叠 Stacked</strong>选项可显示<span data-keyref="GameMaker Name">GameMaker</span>执行的特定处理类型的时间值：</p>
  <p><img class="center" src="../../../assets/Images/Scripting_Reference/GML/Reference/Debug/debug_overlay_graph_2.png"></p>
  <p>这些是：</p>
  <ul class="colour">
    <li><strong>垃圾收集器 Garbage Collector</strong>：<a href="../Garbage_Collection/Garbage_Collection.htm">垃圾回收器</a>所用的时间</li>
    <li><strong>IO&amp;YoYo</strong>：用于输入/输出(<a href="../Game_Input/Keyboard_Input/Keyboard_Input.htm">键盘</a>、<a href="../Game_Input/Mouse_Input/Mouse_Input.htm">鼠标</a>、<a href="../Game_Input/GamePad_Input/Gamepad_Input.htm">游戏手柄</a>、<a href="../Networking/Networking.htm">网络</a>)和一些操作系统处理的时间</li>
    <li><strong>更新 Update</strong>：游戏更新循环所花费的时间(步骤事件等)</li>
    <li><strong>绘制 Draw</strong>：绘制花费的时间(绘制事件)</li>
    <li><strong>文本 Text</strong>：文本在<a href="../Asset_Management/Sequences/Sequences.htm">序列</a>中所花费的时间</li>
    <li><strong>滚动 Scroll</strong>：处理<a href="../Asset_Management/Rooms/Rooms.htm">房间</a>和<a href="../Drawing/Videos/Videos.htm">视频</a>中的滚动背景所花费的时间</li>
  </ul>
  <p>您可以单击右上角的每个值(在其彩色框旁边)以切换其可见性。</p>
  <p><strong>历史记录</strong>栏控制图形中可见的水平范围。您可以将其设置为1到30秒。</p>
  <h3 id="log">Log</h3>
  <p>此窗口显示输出日志，与IDE中<a href="../../../Introduction/The_Output_Window.htm">"输出窗口"</a>下显示的输出日志相同。</p>
  <p>使用<span class="inline3_func"><a href="show_debug_message.htm">show_debug_message</a></span>和<span class="inline3_func"><a href="../Strings/show_debug_message_ext.htm">show_debug_message_ext</a></span>显示的所有调试消息也显示在此处。</p>
  <p><img class="center" src="../../../assets/Images/Scripting_Reference/GML/Reference/Debug/debug_overlay_console.png"></p>
  <p>窗口底部的文本字段允许您提供基本的控制台输入：</p>
  <ul class="Disc">
    <li>你可以写一个全局变量名来打印它的值，或者写一个全局函数名来执行它，用空格分隔参数(例如<span class="inline2">func arg0 arg1</span>)</li>
    <li>控制台存储您最后命令的历史记录。按向上和向下箭头键浏览前面的命令。</li>
    <li>控制台还支持自动完成功能，您可以通过按Tab键来访问该功能，当光标位于超过2个字符的单词上时，将显示该功能。向上键和向下键选择下拉框中的选项，然后Escape关闭自动完成：</li>
  </ul>
  <p><img class="center" src="../../../assets/Images/Scripting_Reference/GML/Reference/Debug/debug_overlay_console_autocomplete.png"></p>
  <p class="note"><span data-conref="../../../assets/snippets/Tag_note.hts"><span class="note">注意</span></span>当您在控制台输入中键入命令时，<span data-keyref="GameMaker Name">GameMaker</span>会继续根据您提供的<a href="../Game_Input/Keyboard_Input/Keyboard_Input.htm">键盘输入</a>触发事件，这意味着您的游戏仍会接收输入。</p>
  <p>输入遵循几个规则：</p>
  <ul class="colour">
    <li>如果第一个词是一个全局函数，那么它将使用给定的参数执行。</li>
    <li>如果第一个词是一个内置变量，则打印其值。</li>
  </ul>
  <p>第一个单词之后的所有后续单词都将转换为作为参数传递给函数的值，如下所示：</p>
  <ul>
    <li>首先，它试图将其解释为一个全局范围值，如果找到一个，则将其作为参数传入</li>
    <li>如果是资产名称，则传递对该资产的引用</li>
    <li><span class="inline2">true</span>和<span class="inline2">false</span>可用于布尔值</li>
    <li>如果它是一个数字，则传递一个实数（real）</li>
    <li>任何用双引号<span class="inline2">""</span>括起来的文本都被视为字符串</li>
    <li>不遵循上述规则的任何其他内容都被视为字符串</li>
  </ul>
  <p class="note"><span data-conref="../../../assets/snippets/Tag_note.hts"><span class="note">注意</span> </span>所有脚本都在<a href="../../GML_Overview/Variables/Global_Variables.htm#global">global</a>结构的范围内执行。</p>
  <p>一个简单的命令看起来像这样：</p>
  <p class="code">show_debug_message "Hello World!"</p>
  <p class="note"><span data-conref="../../../assets/snippets/Tag_warning.hts"><span class="warning">警告</span></span>此处不应添加括号。如果像在<span data-keyref="GML_Code">GML代码</span>中一样在此处添加它们，则函数将不会执行，并且会出现一行<span class="inline2">ERROR : unknown command（错误：未知命令）</span>将显示在输出中。</p>
  <p>最后，您可以<strong>清除</strong>输出并<strong>将其内容复制</strong>到剪贴板。</p>
  <h3 id="audio">Audio</h3>
  <p>此窗口显示与游戏中播放的音频相关的调试信息。</p>
  <p>图形显示音频线程上最近的输出缓冲区。这是<span data-keyref="GameMaker Name">GameMaker</span>在所有混合和处理之后发送到音频设备的输出信号。</p>
  <p>图中的横轴是缓冲区中的帧号，纵轴是振幅，通常在-1到1之间。</p>
  <p><img class="center" src="../../../assets/Images/Scripting_Reference/GML/Reference/Debug/debug_overlay_audio.png">底部的列表显示了当前正在播放或可能播放声音的每个声音"源"。列显示以下值：</p>
  <ul class="colour">
    <li><strong>source</strong>：源的ID</li>
    <li><strong>buffer</strong>：附加到此源的缓冲区的ID</li>
    <li><strong>numProcessed</strong>: 源播放过的缓冲区队列的数量(在某些时候会被清理)</li>
    <li><strong>numQueued</strong>：在此源上排队的缓冲区数(包括已处理的缓冲区)</li>
    <li><strong>gain</strong>：源增益为16位值(0-65535)</li>
    <li><strong>name</strong>：资产的名称。动态创建的资源(如缓冲区声音)不会显示名称。</li>
    <li><strong>pos</strong>：源当前播放位置(以帧为单位)</li>
  </ul>
  <p>这些源受<span class="inline3_func"><a href="../Asset_Management/Audio/audio_channel_num.htm">audio_channel_num</a></span>值的限制。</p>
  <h3 id="debug_view">调试视图</h3>
  <p>这将切换使用<span class="inline3_func"><a href="dbg_view.htm">dbg_view</a></span>创建的所有自定义调试视图的可见性。</p>
  <h2 id="debug_views">视图 Views</h2>
  <p>此菜单列出了您使用<span class="inline3_func"><a href="dbg_view.htm">dbg_view</a></span>创建的所有自定义调试视图。</p>
  <p>如果视图设置为可见，则每个菜单项都会显示调试视图的名称，并在右侧显示一个复选标记。单击菜单项可切换此调试视图的可见性。</p>
  <p class="note"><span data-conref="../../../assets/snippets/Tag_note.hts"><span class="note">注意</span> </span>必须启用"调试"菜单的<a href="The_Debug_Overlay.htm#debug_view">DebugView</a>设置，才能显示任何自定义调试视图。</p>
  <p><img class="center" src="../../../assets/Images/Scripting_Reference/GML/Reference/Debug/debug_overlay_custom_views.png"></p>
  <h3 id="creating_debug_views">创建调试视图</h3>
  <p>创建自定义<em></em>调试视图，使用<span class="inline3_func"><a href="dbg_view.htm">dbg_view</a></span>：</p>
  <p class="code">custom_dbgview = dbg_view("Custom Debug View", true);</p>
  <p>第一个参数是它的名称，第二个参数是它的可见性。可以传递可选参数以自定义其位置和大小。</p>
  <p>在调试视图中，可以使用<span class="inline3_func"><a href="dbg_section.htm">dbg_section</a></span>创建节：</p>
  <p class="code">custom_section = dbg_section("Custom Section");</p>
  <p>您可以向这些部分添加控件，这些控件通过使用<span class="inline3_func"><a href="../Variable_Functions/ref_create.htm">ref_create</a></span>创建的引用显示和/或修改它们链接到的值。</p>
  <p>可以创建对所有类型变量的引用。每个控件支持对一个或多个数据类型的引用。</p>
  <p class="note"><span><span data-conref="../../../assets/snippets/Tag_important.hts"><span class="important">重要</span> </span>变量必须存在于<a href="../../GML_Overview/Structs.htm#struct">结构</a>或<a href="../Asset_Management/Instances/Instances.htm">实例</a></span><span>中，因为调试视图只声明一次，因此<em>无法</em>显示局部变量。</span></p>
  <p>从视觉上看，控件被布置在一个网格中，该网格包含两列：大多数控件跨越两列，有些控件仅跨越一列。通过调用<span class="inline3_func"><a href="dbg_same_line.htm">dbg_same_line</a></span>，可以将两个单列控件放在一行上：</p>
  <p class="code">button1 = function()<br>
    {<br>
    &nbsp; &nbsp; show_debug_message("Button1 clicked!");<br>
    }<br>
    <br>
    ref = ref_create(self, "button1");<br>
    dbg_text("This text will go here");<br>
    dbg_same_line();<br>
    dbg_button("Button1", ref);
  </p>
  <p class="note"><span data-conref="../../../assets/snippets/Tag_note.hts"><span class="note">注意</span> </span>在创建节之前创建的调试控件将添加到名为<span data-keyref="DebugSection_Name_Default">"Default"(默认)</span>的新节中。在创建调试视图之前创建的调试节将添加到调试视图<span data-keyref="DebugView_Name_Default">"Default"</span>中。</p>
  <p>以上代码行将在<span data-field="title" data-format="default">调试覆盖</span>中显示以下窗口：</p>
  <p><img class="center" src="../../../assets/Images/Scripting_Reference/GML/Reference/Debug/debug_overlay_custom_debug_view.png"></p>
  <h2 id="system">系统 System</h2>
  <p>此菜单包含两个与调试覆盖相关的设置：</p>
  <ul class="colour">
    <li><strong>比例 Scale</strong>-调试覆盖的比例系数，默认值为<strong>x<span data-keyref="DebugOverlay_Scale_Default">1</span></strong></li>
    <li><strong>透明度 Alpha</strong>-用于绘制叠加的Alpha值，默认值为<strong><span data-keyref="DebugOverlay_Alpha_Default">0.8</span></strong></li>
  </ul>
  <h2 id="func_ref">函数参考 Function Reference</h2>
  <h3 id="func_ref_toggling">切换 Toggling</h3>
  <ul class="colour">
    <li><a href="show_debug_overlay.htm">show_debug_overlay</a> 显示调试覆盖图</li>
    <li><a href="show_debug_log.htm">show_debug_log</a> 显示调试日志</li>
    <li><a href="is_debug_overlay_open.htm">is_debug_overlay_open</a> 检查调试覆盖图</li>
  </ul>
  <h3 id="func_ref_views">视图 Views</h3>
  <ul class="colour">
    <li><a href="dbg_view.htm">dbg_view</a> 视图</li>
    <li><a href="dbg_view_delete.htm">dbg_view_delete</a> 视图删除</li>
    <li><a href="dbg_section.htm">dbg_section</a> 节</li>
    <li><a href="dbg_section_delete.htm">dbg_section_delete</a> 节删除</li>
  </ul>
  <h3 id="func_ref_controls">控制 Controls</h3>
  <ul class="colour">
    <li><a href="dbg_button.htm">dbg_button</a>  按钮</li>
    <li><a href="dbg_checkbox.htm">dbg_checkbox</a> 复选框</li>
    <li><a href="dbg_colour.htm">dbg_colour</a> 颜色</li>
    <li><a href="dbg_drop_down.htm">dbg_drop_down</a> 下拉</li>
    <li><a href="dbg_same_line.htm">dbg_same_line</a> 同行</li>
    <li><a href="dbg_slider.htm">dbg_slider</a> 滑块</li>
    <li><a href="dbg_sprite.htm">dbg_sprite</a> 精灵</li>
    <li><a href="dbg_text.htm">dbg_text</a> 文本</li>
    <li><a href="dbg_text_input.htm">dbg_text_input</a> 输入</li>
    <li><a href="dbg_watch.htm">dbg_watch</a> 监视</li>
  </ul>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div>Back:&nbsp;<a href="Debugging.htm">调试</a></div>
        <div>Next:&nbsp;<a href="show_debug_overlay.htm">show_debug_overlay</a></div>
      </div>
    </div>
    <h5><span data-conref="../../../assets/snippets/Copyright_Notice_AutoUpdate.hts">© Copyright <span data-keyref="Company Name">YoYo Games</span>&nbsp;<span data-keyref="Company Structure Suffix">Ltd.</span>&nbsp;<span data-field="date" data-format="YYYY">2023</span> All Rights Reserved</span></h5>
  </div>

</div>
  <!-- KEYWORDS
-->
  <!-- TAGS
-->

</body></html>