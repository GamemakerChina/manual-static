<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../../../..",gTopicId="8.2.2.3.5"</script><script type="text/javascript" src="../../../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Audio</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../../../assets/css/default.css" type="text/css"><script src="../../../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Page outlining the different functions and variables associated with Audio"><meta name="rh-index-keywords" content=""><meta name="search-keywords" content="Audio"><meta name="brsnext" value="GameMaker_Language/GML_Reference/Asset_Management/Audio/Audio_Properties.htm"><meta name="brsprev" value="GameMaker_Language/GML_Reference/Asset_Management/Tilsets/tileset_get_info.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="Audio"><span>Audio</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1><span data-field="title" data-format="default">Audio</span></h1><p><span data-keyref="GameMaker Name">GameMaker</span>拥有一个基于<span class="inline">*.ogg</span>、<span class="inline">*.mp3</span>和<span class="inline">*.wav</span>声音格式的完整音频引擎。</p><p><a href="../../../../The_Asset_Editors/Sounds.htm">添加到 IDE</a>的这些类型的声音可以通过下面所示的音频函数在您的游戏中使用。</p><p>对于比基本音效或播放一首音乐更复杂的事情，您可以参考高级音频功能，它可以让您修改声音的播放方式。还有一系列更专业的功能专用于流音频、定位音频(提供 3D 声音)、分组音频、同步音频和音频效果。</p><div data-conref="../../../../assets/snippets/Note_HTML5_Web_Audio.hts"><p class="note"><b><span data-conref="../../../../assets/snippets/Tag_important.hts"><span class="important">重要信息</span></span></b>在 HTML5 目标上使用音频时，您应该注意并非所有浏览器都支持网络音频，因此在运行时可能不会为您的项目播放任何声音。您可以通过以下链接大致了解网络音频支持：<a href="https://caniuse.com/audio-api" target="_blank">我可以使用网络音频吗？</a>。</p></div><div class="minitoc" data-minitoc-targetid="drop-down1" style=""><p class="minitoc-caption" href="#" style="">内容</p><ol class="minitoc-list" style=""><li><a href="#using_audio" class="minitoc-list-item">使用音频</a></li><li><a href="#advanced_audio" class="minitoc-list-item">高级音频</a></li><li><a href="#web_audio" class="minitoc-list-item">网络音频</a></li><li><a href="#function_refere" class="minitoc-list-item">功能参考</a></li></ol></div><h2 id="using_audio">使用音频</h2><h3>播放声音</h3><p>播放声音最直接的方法是使用<span class="inline2"><a href="audio_play_sound.htm">audio_play_sound</a></span>：</p><p class="code">audio_play_sound(snd_Explode, 10, false);</p><p>您至少必须提供<span data-keyref="Type_Asset_Sound"><a target="_blank" href="../../../../The_Asset_Editors/Sounds.htm">声音资源</a></span>、新声音实例的优先级以及声音是否应循环播放。</p><p>另一种播放声音的方法是使用<span class="inline2"><a href="audio_play_sound_ext.htm">audio_play_sound_ext</a></span>。此函数与<span class="inline2"><a href="audio_play_sound.htm">audio_play_sound</a></span>相同，但允许您在结构中传递各种音频参数。使用此函数，您只需通过结构体的"sound"键提供<span data-keyref="Type_Asset_Sound"><a target="_blank" href="../../../../The_Asset_Editors/Sounds.htm">声音资源</a></span>：</p><p class="code">audio_play_sound_ext({ sound: snd_Explode&nbsp;});</p><p><span>此处优先级将默认为 0，并且声音不会循环播放。您可以在结构中提供<a href="audio_play_sound_ext.htm">附加键</a>来更改声音的属性。</span></p><div data-conref="../../../../assets/snippets/Note_Triggers_Audio_Playback_Event.hts"><p class="note"><span data-conref="../../../../assets/snippets/Tag_note.hts"><span class="note">注意</span></span>当声音停止播放时，会触发一个<a href="../../../../The_Asset_Editors/Object_Properties/Async_Events/Audio_Playback_Ended.htm">音频播放结束</a>事件。</p></div><h3>声音实例(声音)</h3><p>函数<span class="inline2"><a href="audio_play_sound.htm">audio_play_sound</a></span>和<span class="inline2"><a href="audio_play_sound_ext.htm">audio_play_sound_ext</a></span>创建声音的新<em>实例</em>(也称为"语音")并返回其 ID：</p><p class="code">ins_sound = audio_play_sound(snd_Explode, 10, false);</p><p>您可以在函数中使用此声音<strong>实例</strong>ID 来更改<strong>实例</strong>级别的音频属性(或直接将它们作为可选参数传递)。这只会更改该特定声音实例的属性。</p><p>如果您将声音<strong>资产</strong>ID 传递给函数，<strong>资产</strong>级别的音频属性将设置为给定值。</p><p class="note"><span data-conref="../../../../assets/snippets/Tag_note.hts"><span class="note">注意</span></span><span class="inline2"><a href="audio_play_sound_at.htm">audio_play_sound_at</a></span>和<span class="inline2"><a href="Audio_Emitters/audio_play_sound_on.htm">audio_play_sound_on</a></span>的工作方式相同，也返回它们创建的声音实例的 ID。</p><p class="note"><span data-conref="../../../../assets/snippets/Tag_tip.hts"><span class="tip">提示</span></span>默认情况下，声音实例/声音的最大数量为<span data-keyref="Max_Audio_Channels_Default">128</span>。可以使用函数<span class="inline2"><a href="audio_channel_num.htm">audio_channel_num</a></span>更改此值。</p><h3 id="h">音频属性</h3><p>每种声音都具有应用于不同"级别"的基本属性。根据属性，它可以充当乘数，也可以覆盖在前一级别设置的值。</p><p>这些音频属性是：</p><ul class="Disc"><li><a href="audio_sound_gain.htm"><strong>增益</strong></a>：这是音量的乘数。资产级别增益的默认值是<a href="../../../../The_Asset_Editors/Sounds.htm">声音编辑器</a>中"音量"滑块的值。所有其他级别的默认值为 1。还可以使用<a href="Audio_Effects/Audio_Effects.htm">音频效果</a>添加增益。</li><li><a href="audio_sound_pitch.htm"><strong>音调</strong></a>：这是声音音调的乘数。所有级别的音调默认值均设置为 1。</li><li><a href="audio_sound_set_track_position.htm"><strong>偏移/轨道位置</strong></a>：这是距开始播放的音轨起点的偏移量。如果在实例级别设置该值，它将覆盖在资产级别设置的值。默认情况下，这是 0(即无偏移)。</li><li><a href="audio_sound_set_listener_mask.htm"><strong>监听器掩码</strong></a>：这是一个位掩码值，用于确定收听音频的监听器。默认值为 1(或<span class="inline2">0x01</span>)，代表默认侦听器。</li></ul><p>有关所有音频属性、级别及其值计算方式的概述，请参阅<a href="Audio_Properties.htm">音频属性概述</a>。</p><p class="note"><span data-conref="../../../../assets/snippets/Tag_note.hts"><span class="note">注意</span></span>您可以传递给<span class="inline2">audio_play_sound_*</span>函数的可选参数设置属性的实例级值。</p><h3>音频循环</h3><p>可以通过将声音设置为循环来使其循环播放。这可以在使用任意<span class="inline2">audio_play_sound_*</span>函数播放声音时完成：</p><p class="code">ins_sound = audio_play_sound(snd_Engine, 100, true);</p><p>或者之后，当声音已经播放时，使用函数<span class="inline3_func"><a href="Audio_Loop_Points/audio_sound_loop.htm">audio_sound_loop</a></span>：</p><p class="code">audio_sound_loop(ins_sound, true);</p><p>默认情况下，声音从开始到结束循环。可以分别使用<span class="inline3_func"><a href="Audio_Loop_Points/audio_sound_loop_start.htm">audio_sound_loop_start</a></span>和<span class="inline3_func"><a href="Audio_Loop_Points/audio_sound_loop_end.htm">audio_sound_loop_end</a></span>更改开始位置和结束位置，也可以在声音播放时进行更改(即<span class="inline2">ins_sound</span>指的是以下声音实例)<span class="inline3_func"><a href="audio_is_playing.htm">audio_is_playing</a></span>返回<span class="inline2">true</span>)。</p><p>如果声音设置为循环，则当曲目位置到达循环结束位置时，它将从开始位置继续播放。</p><p class="note"><span data-conref="../../../../assets/snippets/Tag_important.hts"><span class="important">重要</span></span>循环结束位置<em>必须</em>超过循环开始位置。例外情况是循环结束的值 0.0，它标记声音的结束(即<span class="inline3_func"><a href="audio_sound_length.htm">audio_sound_length</a></span>)。</p><p>请参阅：<a href="Audio_Loop_Points/Audio_Loop_Points.htm">音频循环点</a></p><h3>音频效果</h3><p>最后，您可以向播放的音频添加效果，例如混响、回声、延迟等。</p><p>音频效果是使用<span class="inline2"><a href="Audio_Effects/audio_effect_create.htm">audio_effect_create</a></span>创建的，然后分配给音频总线的效果槽之一。您始终可以为其分配效果的音频总线是主音频总线<span class="inline2"><a href="Audio_Effects/audio_bus_main.htm">audio_bus_main</a></span>。</p><p>See:&nbsp;<a href="Audio_Effects/Audio_Effects.htm">音频效果</a></p><h2 id="advanced_audio">高级音频</h2><h3>音频发射器和监听器</h3><p>如果您需要位置音频或应在三维环境中播放的音频，您可以使用<a href="Audio_Emitters/Audio_Emitters.htm">音频发射器</a>和<a href="Audio_Listeners/Audio_Listeners.htm">音频监听器</a>。</p><p class="note"><span data-conref="../../../../assets/snippets/Tag_note.hts"><span class="note">注意</span></span><a href="Audio_Emitters/Audio_Emitters.htm">音频发射器</a>引入了另一个级别的增益、音高和听者遮罩参数。</p><h3>音频组</h3><p>所有声音资源(流式音频除外)都属于单个<a href="../../../../Settings/Audio_Groups.htm">音频组</a>。音频组中的声音可以同时加载和卸载。</p><p>音频组有自己的增益系数(请参阅<span class="inline2"><a href="Audio_Groups/audio_group_set_gain.htm">audio_group_set_gain</a></span>/<span class="inline2"><a href="Audio_Groups/audio_group_get_gain.htm">audio_group_get_gain</a></span>)</p><p class="note"><span data-conref="../../../../assets/snippets/Tag_note.hts"><span class="note">注意</span></span>默认情况下，所有声音都会添加到音频组<span class="inline2"><a href="Audio_Groups/audiogroup_default.htm">audiogroup_default</a></span>。</p><h3>音频流</h3><p><span data-keyref="GameMaker Name">GameMaker</span>支持直接从 .ogg 文件加载流式音频。为此，您可以使用<span class="inline2"><a href="audio_create_stream.htm">audio_create_stream</a></span>和<span class="inline2"><a href="audio_destroy_stream.htm">audio_destroy_stream</a></span>。</p><h3>同步组</h3><p>对于应在每个样本级别完美同步播放的音频，<span data-keyref="GameMaker Name">GameMaker</span>具有同步组。有关详细信息，请参阅<a href="Audio_Synchronisation/Audio_Synchronisation.htm">音频同步</a>。</p><h2 id="web_audio">网络音频</h2><p>为 HTML5 目标平台创建游戏时，音频引擎需要<b>网络音频</b>支持，这意味着有时您的音频无法按您期望的时间或方式播放。这是因为当您玩游戏时，Web Audio 上下文可能未运行或停止运行。造成这种情况的原因在浏览器之间甚至同一浏览器的不同版本之间差异很大，因此检测网络音频上下文状态何时发生变化非常重要，例如：检测上下文何时发生变化以及暂停/开始循环音频(如背景音乐)。</p><p>为了帮助解决此问题，<span data-keyref="GameMaker Name">GameMaker</span>有两种不同的方法来检测网络音频上下文状态的变化，即使用以下函数：</p><ul class="colour"><li><a href="audio_system_is_available.htm">audio_system_is_available</a></li></ul><p>或使用<b>异步系统事件</b>，每当网络音频状态发生变化时就会触发该事件。在这种情况下，您将获得内置的<span class="inline2"><a href="../../../GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a></span>DS 映射，其中填充了键"<span class="inline">event_type</span>"，如果该映射是一个字符串，则该映射将保存字符串"<span class="inline">audio_system_status</span>"音频事件。当此键存在时，还会有另一个"<span class="inline">status</span>"键，其状态为"<span class="inline">available</span>"或"<span class="inline">unavailable</span>"。</p><p>欲了解更多信息，请参阅以下部分：</p><ul class="colour"><li><a href="../../../../The_Asset_Editors/Object_Properties/Async_Events/System.htm">异步系统事件</a></li></ul><p class="note"><span data-conref="../../../../assets/snippets/Tag_note.hts"><span class="note">注意</span></span>此事件将在<i>所有</i>平台上触发，但在除 HTML5 之外的所有平台上，只会在游戏开始时音频引擎首次初始化时触发一次。</p><p>要检查是否可以使用网络音频播放音频，您可以使用<span class="inline2"><a href="audio_sound_is_playable.htm">audio_sound_is_playable</a></span>。</p><h2 id="function_refere">功能参考</h2><h3>Asset Info</h3><ul class="colour"><li><a href="audio_exists.htm">audio_exists</a></li><li><a href="audio_get_name.htm">audio_get_name</a></li><li><a href="audio_get_type.htm">audio_get_type</a></li><li><a href="audio_sound_length.htm">audio_sound_length</a></li><li><a href="audio_sound_is_playable.htm">audio_sound_is_playable</a></li></ul><h3>播放声音</h3><ul class="colour"><li><a href="audio_play_sound.htm">audio_play_sound</a></li><li><a href="audio_play_sound_ext.htm">audio_play_sound_ext</a></li><li><a href="audio_play_sound_at.htm">audio_play_sound_at</a></li><li><a href="audio_pause_sound.htm">audio_pause_sound</a></li><li><a href="audio_pause_all.htm">audio_pause_all</a></li><li><a href="audio_resume_sound.htm">audio_resume_sound</a></li><li><a href="audio_resume_all.htm">audio_resume_all</a></li><li><a href="audio_stop_sound.htm">audio_stop_sound</a></li><li><a href="audio_stop_all.htm">audio_stop_all</a></li><li><a href="audio_is_playing.htm">audio_is_playing</a></li><li><a href="audio_is_paused.htm">audio_is_paused</a></li></ul><h3>音频属性</h3><ul class="colour"><li><a href="audio_sound_gain.htm">audio_sound_gain</a></li><li><a href="audio_sound_get_gain.htm">audio_sound_get_gain</a></li><li><a href="audio_sound_pitch.htm">audio_sound_pitch</a></li><li><a href="audio_sound_get_pitch.htm">audio_sound_get_pitch</a></li><li><a href="audio_sound_set_track_position.htm">audio_sound_set_track_position</a></li><li><a href="audio_sound_get_track_position.htm">audio_sound_get_track_position</a></li><li><a href="audio_sound_set_listener_mask.htm">audio_sound_set_listener_mask</a></li><li><a href="audio_sound_get_listener_mask.htm">audio_sound_get_listener_mask</a></li></ul><h3><a href="Audio_Loop_Points/Audio_Loop_Points.htm">音频循环点</a></h3><ul class="colour"><li><a href="Audio_Loop_Points/audio_sound_loop.htm">audio_sound_loop</a></li><li><a href="Audio_Loop_Points/audio_sound_get_loop.htm">audio_sound_get_loop</a></li><li><a href="Audio_Loop_Points/audio_sound_loop_start.htm">audio_sound_loop_start</a></li><li><a href="Audio_Loop_Points/audio_sound_get_loop_start.htm">audio_sound_get_loop_start</a></li><li><a href="Audio_Loop_Points/audio_sound_loop_end.htm">audio_sound_loop_end</a></li><li><a href="Audio_Loop_Points/audio_sound_get_loop_end.htm">audio_sound_get_loop_end</a></li></ul><h3>配置</h3><ul class="colour"><li><a href="audio_master_gain.htm">audio_master_gain</a></li><li><a href="audio_set_master_gain.htm">audio_set_master_gain</a></li><li><a href="audio_get_master_gain.htm">audio_get_master_gain</a></li><li><a href="audio_channel_num.htm">audio_channel_num</a></li><li><a href="audio_falloff_set_model.htm">audio_falloff_set_model</a></li><li><a href="audio_system_is_available.htm">audio_system_is_available</a></li><li><a href="audio_system_is_initialised.htm">audio_system_is_initialised</a></li></ul><h3>调试</h3><ul class="colour"><li><a href="audio_debug.htm">audio_debug</a></li></ul><h3>增益转换</h3><ul class="colour"><li><a href="lin_to_db.htm">lin_to_db</a></li><li><a href="db_to_lin.htm">db_to_lin</a></li></ul><h3>音频流</h3><ul class="colour"><li><a href="audio_create_stream.htm">audio_create_stream</a></li><li><a href="audio_destroy_stream.htm">audio_destroy_stream</a></li></ul><h3>高级音频</h3><ul class="colour"><li><a href="Audio_Emitters/Audio_Emitters.htm">Audio Emitters</a></li><li><a href="Audio_Listeners/Audio_Listeners.htm">Audio Listeners</a></li><li><a href="Audio_Effects/Audio_Effects.htm">音频效果</a></li><li><a href="Audio_Groups/Audio_Groups.htm">音频组</a></li><li><a href="Audio_Buffers/Audio_Buffers.htm">Audio Buffers</a></li><li><a href="Audio_Synchronisation/Audio_Synchronisation.htm">Audio Synchronisation</a></li></ul><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back:&nbsp;<a href="../Asset_Management.htm">资源管理</a></div><div style="float:right">Next:&nbsp;<a href="../Paths/Paths.htm">路径</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>