<!--?xml version="1.0" encoding="utf-8" ?--><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head>

  <script type="text/javascript" language="JavaScript">
    //<![CDATA[
    function reDo() {
      if (innerWidth != origWidth || innerHeight != origHeight)
        location.reload();
    }
    if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
      origWidth = innerWidth;
      origHeight = innerHeight;
      onresize = reDo;
    }
    onerror = null;
  //]]>
  </script>
  <style type="text/css">/*<![CDATA[*/

    < !-- div.WebHelpPopupMenu {
      position: absolute;
      left: 0px;
      top: 0px;
      z-index: 4;
      visibility: hidden;
    }

    p.WebHelpNavBar {
      text-align: right;
    }

    -->
  
/*]]>*/</style>

  <script type="text/javascript">//<![CDATA[

    gRootRelPath = "../..";
    gCommonRootRelPath = "../..";
    gTopicId = "6.3.1.2";
  
//]]></script>

  <script type="text/javascript" src="../../template/scripts/rh.min.js"></script>
  <script type="text/javascript" src="../../template/scripts/common.min.js"></script>
  <script type="text/javascript" src="../../template/scripts/topic.min.js"></script>
  <script type="text/javascript" src="../../template/scripts/topicwidgets.min.js"></script>
<script type="text/javascript" src="../../whxdata/projectsettings.js"></script>
  <link rel="stylesheet" type="text/css" href="../../template/styles/topic.min.css">
  <link rel="stylesheet" type="text/css" href="../../template/Charcoal_Grey/topicheader.css">
  <meta name="topic-status" content="Draft">

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Async Events</title>
  <meta name="generator" content="Adobe RoboHelp 2022">
  <meta name="rh-authors" content="Mark Alexander">
  <meta name="topic-comment" content="Page detailing the async events.">
  <meta name="rh-index-keywords" content="Objects - Async Events">
  <meta name="search-keywords" content="Async Events,asynchronous,image loaded,audio playback,audio recording,cloud,dialog,http,in-app-purchase,networking,push notification,save/load,social,steam,system,audio playback ended">
  <link rel="stylesheet" type="text/css" href="../../assets/css/default.css">
  <script src="../../assets/scripts/main_script.js" type="module"></script>
<meta name="brsnext" value="The_Asset_Editors/Object_Properties/Async_Events/Audio_Playback.htm"><meta name="brsprev" value="The_Asset_Editors/Object_Properties/Draw_Events.htm"></head>

<body>
  <div class="topic-header rh-hide" id="rh-topic-header">
    <div class="logo">
    </div>
    <div class="nav">
      <div class="title" title="Async Events">
        <span>Async Events</span>
      </div>
      <div class="gotohome" title="Click here to see this page in full context">
        <a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a>
      </div>
    </div>
  </div>
  <div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div>



  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1><span data-field="title" data-format="default">异步事件</span></h1>
  <p><img alt="The Async Event" class="center" height="322" src="../../assets/Images/Asset_Editors/Editor_Objects_Async.png" width="344"></p>
  <p>异步事件是指当<span data-keyref="GameMaker Name">GameMaker</span>从外部源(可以是Web或运行游戏的设备)接收到<a class="tooltip" title="回调仅是一个函数，该函数先运行，然后在完成分配的工作后触发另一个函数（或代码块）。例如，功能sprite_add()将在加载精灵后在异步Image Loaded事件中触发回调。">回调</a>时触发的事件。</p>
  <p>基本上，你告诉<span data-keyref="GameMaker Name">GameMaker</span>做一些事情-比如加载一个图像-它会开始这样做。作为一个例子，让我们假设你想从一个外部文件添加一个精灵。这可以<em>同步</em>或<em>异步</em>完成。要同步完成这一点，你使用函数<span class="inline3_func"><a href="../../GameMaker_Language/GML_Reference/Asset_Management/Sprites/Sprite_Manipulation/sprite_add.htm">sprite_add</a></span>：</p>
  <p class="code">var _new_big_sprite = sprite_add("my_new_sprite_image.png", 1, false, true, 0, 0);<br>
    <br>
    // A lot more code below this line that all needs to be executed&nbsp;on time to keep a steady FPS
  </p>
  <p>但是这个函数有一个缺点，因为它会立即<em>完全加载精灵<em></em>。下一行代码只有在加载完成后才会执行！如果你只是添加一个小精灵，这可能不会被注意到，但是当加载一个大精灵或许多小精灵时，可能会冻结你的游戏。</em></p>
  <p><span data-keyref="GameMaker Name">GameMaker</span> 也有 <em> 异步 </em> 工作的内置函数。使用这些函数，<span data-keyref="GameMaker Name">GameMaker</span> 只会 <em> 开始 </em> 执行您要求的操作，但不会停止执行代码，直到完成。它会继续在后台处理您的 GameMaker 请求，并继续正常运行游戏的其余代码。当请求完成时，一个回调将被发送到 <span data-keyref="GameMaker Name">GameMaker</span>，并且为该类型的回调定义的任何异步事件将被触发。</p>
  <p>在<span class="inline3_func"><a href="../../GameMaker_Language/GML_Reference/Asset_Management/Sprites/Sprite_Manipulation/sprite_add.htm">sprite_add</a></span>的示例中，您可以使用其异步对应项<span class="inline3_func"><a href="../../GameMaker_Language/GML_Reference/Asset_Management/Sprites/Sprite_Manipulation/sprite_add_ext.htm">sprite_add_ext</a></span>来<em>开始</em>加载sprite，然后触发一个sprite事件：</p>
  <p class="code">var _new_big_sprite = sprite_add_ext("my_new_sprite_image.png", 1, 0, 0, true);<br>
    <br>
    // A lot more code below this line that will be executed almost instantly after the call to sprite_add_ext
  </p>
  <p class="code_heading">异步图像加载事件</p>
  <p class="code">/// "The sprite you requested has finished loading"</p>
  <p>还有其他一些情况，您不希望游戏等待可能需要大量时间才能完成的事情完成，例如向Web服务器发出HTTP请求。</p>
  <p>您不必总是先自己调用函数才能接收异步事件形式的回调，例如，当游戏手柄连接或断开连接时，将触发异步 <a href="Async_Events/System.htm">System</a> 事件。 为此，您不必先调用函数。</p>
  <p>请注意，异步事件会为 <em> 所有 </em> 具有它们的实例触发，这与键盘事件非常相似，因此您可以在一个实例中执行 <span class="inline3_func"><a href="../../GameMaker_Language/GML_Reference/Asynchronous_Functions/HTTP/http_get.htm">http_get</a></span> 调用，但在另一个实例中使用 <strong> 异步 HTTP 事件 </strong> 来处理回调。</p>
  <p class="note"><span data-conref="../../assets/snippets/Tag_note.hts"><span class="note">注意</span></span>您应该注意，由于浏览器中的XSS保护，从跨域加载资源的请求和尝试会被阻止，并且在使用以下任何事件时可能会返回空白结果。</p>
  <p>有多种类型的事件与异步事件类别相关联，它们都在以下部分中进行了解释：</p>
  <p class="note"><span data-conref="../../assets/snippets/Tag_note.hts"><span class="note">注意</span></span>以下部分中提到的变量 <span class="inline2"><a href="../../GameMaker_Language/GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a></span> <strong>仅在这些事件中有效</strong>，因为它指向的 <a href="../../GameMaker_Language/GML_Reference/Data_Structures/DS_Maps/DS_Maps.htm">DS map</a> 在事件开始时创建，然后在结束时再次删除，并且该变量在所有其他时间都会重置为值 <span class="inline2">-1</span>。</p>
  <ul class="colour">
    <li><a href="Async_Events/Audio_Playback.htm">音频回放</a></li>
    <li><a href="Async_Events/Audio_Playback_Ended.htm">音频播放结束</a></li>
    <li><a href="Async_Events/Audio_Recording.htm">音频录制</a></li>
    <li><a href="Async_Events/Cloud.htm">云</a></li>
    <li><a href="Async_Events/Dialog.htm">对话框</a></li>
    <li><a href="Async_Events/HTTP.htm">HTTP</a></li>
    <li><a href="Async_Events/IAP.htm">在应用程序购买</a></li>
    <li><a href="Async_Events/Image_Loaded.htm">图像加载</a></li>
    <li><a href="Async_Events/Networking.htm">联网</a></li>
    <li><a href="Async_Events/Push_Notifications.htm">推送通知</a></li>
    <li><a href="Async_Events/Save_Load.htm">保存/加载</a></li>
    <li><a href="Async_Events/Social.htm">社交</a></li>
    <li><a href="Async_Events/Steam.htm">Steam</a></li>
    <li><a href="Async_Events/System.htm">系统</a></li>
  </ul>
  <p>&nbsp;</p>
  <p>如果你正在为不同的平台做扩展，你可能希望从你的扩展函数中回调一个或多个异步事件。为此，你可以找到下面的表格，列出每个内部事件名称常量和它们对应的ID值。</p>
  <p class="note"><span data-conref="../../assets/snippets/Tag_note.hts"><span class="note">注意</span></span>这些事件常量<b>仅</b>用于扩展！</p>
  <p>&nbsp;</p>
  <table id="async_event_constants" style="caption-side: top">
    <caption>Async Event Constants</caption>
    <tbody>
      <tr>
        <th width="40%">常量</th>
        <th>值</th>
      </tr>
      <tr>
        <td><b>EVENT_OTHER_WEB_IMAGE_LOAD&nbsp;</b></td>
        <td style="text-align: center"><span style="text-align:center;">60</span></td>
      </tr>
      <tr>
        <td><span style="text-align:center;"><b>EVENT_OTHER_WEB_SOUND_LOAD&nbsp;</b></span></td>
        <td style="text-align: center"><span style="text-align:center;">61</span></td>
      </tr>
      <tr>
        <td><span style="text-align:center;"><b>EVENT_OTHER_WEB_ASYNC&nbsp;</b></span></td>
        <td style="text-align: center"><span style="text-align:center;">62</span></td>
      </tr>
      <tr>
        <td><span style="text-align:center;"><b>EVENT_OTHER_DIALOG_ASYNC&nbsp;</b></span></td>
        <td style="text-align: center"><span style="text-align:center;">63</span></td>
      </tr>
      <tr>
        <td><span style="text-align:center;"><b>EVENT_OTHER_WEB_IAP&nbsp;</b></span></td>
        <td style="text-align: center"><span style="text-align:center;">66</span></td>
      </tr>
      <tr>
        <td><span style="text-align:center;"><b>EVENT_OTHER_WEB_CLOUD&nbsp;</b></span></td>
        <td style="text-align: center"><span style="text-align:center;">67</span></td>
      </tr>
      <tr>
        <td><span style="text-align:center;"><b>EVENT_OTHER_WEB_NETWORKING&nbsp;</b></span></td>
        <td style="text-align: center"><span style="text-align:center;">68</span></td>
      </tr>
      <tr>
        <td><span style="text-align:center;"><b>EVENT_OTHER_WEB_STEAM&nbsp;</b></span></td>
        <td style="text-align: center">69</td>
      </tr>
      <tr>
        <td><span style="text-align:center;"><b>EVENT_OTHER_SOCIAL&nbsp;</b></span></td>
        <td style="text-align: center"><span style="text-align:center;">70</span></td>
      </tr>
      <tr>
        <td><span style="text-align:center;"><b>EVENT_OTHER_PUSH_NOTIFICATION&nbsp;</b></span></td>
        <td style="text-align: center"><span style="text-align:center;">71</span></td>
      </tr>
      <tr>
        <td><span style="text-align:center;"><b>EVENT_OTHER_ASYNC_SAVE_LOAD&nbsp;</b></span></td>
        <td style="text-align: center"><span style="text-align:center;">72</span></td>
      </tr>
      <tr>
        <td><span style="text-align:center;"><b>EVENT_OTHER_AUDIO_RECORDING&nbsp;</b></span></td>
        <td style="text-align: center"><span style="text-align:center;">73</span></td>
      </tr>
      <tr>
        <td><span style="text-align:center;"><b>EVENT_OTHER_AUDIO_PLAYBACK&nbsp;</b></span></td>
        <td style="text-align: center"><span style="text-align:center;">74</span></td>
      </tr>
      <tr>
        <td><span style="text-align:center;"><b>EVENT_OTHER_SYSTEM_EVENT&nbsp;</b></span></td>
        <td style="text-align: center"><span style="text-align:center;">75</span></td>
      </tr>
      <tr>
        <td><strong>EVENT_OTHER_MESSAGE_EVENT&nbsp;</strong></td>
        <td style="text-align: center">76</td>
      </tr>
    </tbody>
  </table>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Back: <a href="Object_Events.htm">对象事件</a></div>
        <div style="float:right">Next: <a href="Gesture_Events.htm">手势事件</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5>
  </div>
  <!-- KEYWORDS
Asynchronous Events
Asynchronous Image Loaded Event
Asynchronous Dialogue Event
Asynchronous HTTP Event
Asynchronous IAP Event
Asynchronous Cloud Event
Asynchronous Networking Event
Asynchronous Steam Event
Asynchronous Social Event
Asynchronous Push Notification Event
Asynchronous Audio Recording Event
Asynchronous Audio Playback Event
Asynchronous System
Asynchronous System (Gamepads) 
Asynchronous System (XBox Live)
async_load
ugc_result_success
achievement_challenge_received
achievement_challenge_completed_by_remote
achievement_challenge_completed
achievement_challenge_launched
network_type_connect
network_type_disconnect
network_type_data
network_type_non_blocking_connect
ev_web_image_load
ev_web_sound_load
ev_web_async
ev_dialog_async
ev_web_iap
ev_web_cloud
ev_web_networking
ev_web_steam
ev_social
ev_push_notification
ev_async_save_load
ev_audio_recording
ev_audio_playback
ev_system_event
ev_broadcast_message
-->
  <!-- TAGS
aync_events
-->

</body></html>