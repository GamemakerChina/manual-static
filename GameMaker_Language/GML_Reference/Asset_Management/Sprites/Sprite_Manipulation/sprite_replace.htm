<!--?xml version="1.0" encoding="utf-8" ?--><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head>

  <script type="text/javascript" language="JavaScript">
    //<![CDATA[
    function reDo() {
      if (innerWidth != origWidth || innerHeight != origHeight)
        location.reload();
    }
    if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
      origWidth = innerWidth;
      origHeight = innerHeight;
      onresize = reDo;
    }
    onerror = null;
  //]]>
  </script>
  <style type="text/css">/*<![CDATA[*/

    < !-- div.WebHelpPopupMenu {
      position: absolute;
      left: 0px;
      top: 0px;
      z-index: 4;
      visibility: hidden;
    }

    p.WebHelpNavBar {
      text-align: right;
    }

    -->
  
/*]]>*/</style>

  <script type="text/javascript">//<![CDATA[

    gRootRelPath = "../../../../..";
    gCommonRootRelPath = "../../../../..";
    gTopicId = "8.2.2.3.3.2.0_10";
  
//]]></script>

  <script type="text/javascript" src="../../../../../template/scripts/rh.min.js"></script>
  <script type="text/javascript" src="../../../../../template/scripts/common.min.js"></script>
  <script type="text/javascript" src="../../../../../template/scripts/topic.min.js"></script>
  <script type="text/javascript" src="../../../../../template/scripts/topicwidgets.min.js"></script>
<script type="text/javascript" src="../../../../../whxdata/projectsettings.js"></script>
  <link rel="stylesheet" type="text/css" href="../../../../../template/styles/topic.min.css">
  <link rel="stylesheet" type="text/css" href="../../../../../template/Charcoal_Grey/topicheader.css">
  <meta name="topic-status" content="Draft">

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>sprite_replace</title>
  <meta name="generator" content="Adobe RoboHelp 2022">
  <link rel="stylesheet" href="../../../../../assets/css/default.css" type="text/css">
  <script src="../../../../../assets/scripts/main_script.js" type="module"></script>
  <meta name="rh-authors" content="Mark Alexander">
  <meta name="topic-comment" content="Page explaining the function sprite_replace">
  <meta name="rh-index-keywords" content="sprite_replace">
  <meta name="search-keywords" content="sprite_replace">
<meta name="brsnext" value="GameMaker_Language/GML_Reference/Asset_Management/Sprites/Sprite_Manipulation/sprite_duplicate.htm"><meta name="brsprev" value="GameMaker_Language/GML_Reference/Asset_Management/Sprites/Sprite_Manipulation/sprite_add.htm"></head>

<body>
  <div class="topic-header rh-hide" id="rh-topic-header">
    <div class="logo">
    </div>
    <div class="nav">
      <div class="title" title="sprite_replace">
        <span>sprite_replace</span>
      </div>
      <div class="gotohome" title="Click here to see this page in full context">
        <a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a>
      </div>
    </div>
  </div>
  <div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div>



  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1>sprite_replace</h1>
  <p>此函数的工作方式几乎与<a href="sprite_add.htm"><span class="inline">sprite_add()</span></a>完全相同，唯一的不同之处在于，它不是返回正在导入的精灵的索引，而是覆盖以前创建的精灵索引。使用此函数时，您应该使用已创建并存储在变量中的精灵索引，而不是使用资源树精灵资源，该变量使用其他函数，如<a href="sprite_add.htm"><span class="inline">sprite_add()</span></a>或<a href="sprite_create_from_surface.htm"><span class="inline">sprite_create_from_surface()</span></a>，或甚至<a href="sprite_duplicate.htm"><span class="inline">sprite_duplicate()</span></a>。您<i>可以使用此函数</i>替换游戏资源中的精灵，但这样做意味着您将丢失要替换的精灵的引用ID，无论您是否调用<span class="inline">game_restart()</span>，因此不建议这样做。无论替换哪个精灵，此函数都将<b>为精灵创建一个新的纹理页面</b>，因此在使用它时应小心，因为它可能会增加渲染所需的纹理交换数量，从而对性能产生不利影响。</p>
  <p>要加载的图像文件应 <b> 始终 </b> 在 <span class="inline">*.png</span> 格式和所有要转换为动画精灵的图像都应该具有“条带”格式(见下图)。它们将按照规则 <b> 精灵宽度 = 条带宽度 / 子图像 </b> 分割为指定数量的子图像。</p>
  <p><img alt="Example Sprite Strip" class="center" src="../../../../../assets/Images/Scripting_Reference/GML/Reference/Sprites/spr_strip.png"></p>
  <p>正如您在上图中所看到的，精灵被放置在深紫色的背景上，这可以通过将“ removeBack ”参数设置为<span class="inline">true</span>来删除。它的工作原理是检查精灵的<i>左下</i>像素的颜色，然后将其用作要删除的颜色。例如，在上面的图像中，如果我们将左下角的像素颜色设置为绿色，则精灵的所有绿色部分都将被删除，而紫色背景的其余部分将被忽略。</p>
  <p>如果您选择“removeback”选项，您可能还希望 <span data-keyref="GameMaker Name">GameMaker</span> 通过将“smooth”参数设置为 <span class="inline">true</span> 来平滑精灵的边缘。所有这些都是在精灵的背景被移除后，在精灵的边缘创建一个半透明的边界。</p>
  <p>最后，您还可以为精灵指定X和Y<i>原点</i>。这是精灵被“固定”到使用它的实例上的点，并且总是相对于一个精灵子图像的左上角0，0来计算。因此，例如，将这些值设置为(16，16)的32 X 32像素的精灵将使其原点位于中心。</p>
  <p>默认情况下，所有新的精灵都会自动计算其边界框(确切的边界框将取决于精灵的大小和透明度)，但是您可能希望对此进行自定义，在这种情况下，您还应该使用函数 <a href="sprite_collision_mask.htm"><span class="inline">sprite_collision_mask()</span></a>。</p>
  <div data-conref="../../../../../assets/snippets/Note_File_Handling_Limitations.hts">
  <p class="note"><span data-conref="../../../../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span>&nbsp;Depending on the target platform that is chosen you are limited as to where you can save and load files from. See&nbsp;<a href="../../../../../Additional_Information/The_File_System.htm">The File System</a>&nbsp;for more information.</p>

</div>
  <p class="note"><span data-conref="../../../../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span>&nbsp;You should be aware that if you are using this function in your HTML5 target game to load resources from an external server, then, due to XSS protection in browsers, attempts to load resources from across domains can be blocked and may appear to return blank results.</p>
  <p>&nbsp;</p>
  <h4>语法:</h4>
  <p class="code">sprite_replace(ind, fname, imgnumb, removeback, smooth, xorig, yorig);</p>
  <table>
    <tbody>
      <tr>
        <th>参数</th>
        <th>类型</th>
        <th>描述</th>
      </tr>
      <tr>
        <td>ind</td>
        <td><span data-keyref="Type_Asset_Sprite"><a target="_blank" href="../../../../../../The_Asset_Editors/Sprites.htm">Sprite Asset</a></span></td>
        <td>要永久替换的精灵的索引。</td>
      </tr>
      <tr>
        <td>fname</td>
        <td><span data-keyref="Type_String"><a target="_blank" href="../../../../../../GameMaker_Language/GML_Overview/Data_Types.htm">String</a></span></td>
        <td>要创建新精灵的图像的文件名。</td>
      </tr>
      <tr>
        <td>imgnumb</td>
        <td><span data-keyref="Type_Real"><a target="_blank" href="../../../../../../GameMaker_Language/GML_Overview/Data_Types.htm">Real</a></span></td>
        <td>精灵将被水平分割的帧数。将1用于单个图像或<span class="inline">*.GIF</span>。</td>
      </tr>
      <tr>
        <td>removeback</td>
        <td><span data-keyref="Type_Bool"><a target="_blank" href="../../../../../../GameMaker_Language/GML_Overview/Data_Types.htm">Boolean</a></span></td>
        <td>指示是否将具有背景色的所有像素(左下像素)设置为透明。</td>
      </tr>
      <tr>
        <td>smooth</td>
        <td><span data-keyref="Type_Bool"><a target="_blank" href="../../../../../../GameMaker_Language/GML_Overview/Data_Types.htm">Boolean</a></span></td>
        <td>指示是否平滑边缘。</td>
      </tr>
      <tr>
        <td>xorig</td>
        <td><span data-keyref="Type_Real"><a target="_blank" href="../../../../../../GameMaker_Language/GML_Overview/Data_Types.htm">Real</a></span></td>
        <td>原点的X坐标，相对于精灵的左上角。</td>
      </tr>
      <tr>
        <td>yorig</td>
        <td><span data-keyref="Type_Real"><a target="_blank" href="../../../../../../GameMaker_Language/GML_Overview/Data_Types.htm">Real</a></span></td>
        <td>原点的Y坐标，相对于精灵的左上角。</td>
      </tr>
    </tbody>
  </table>
  <p>&nbsp;</p>
  <h4>返回</h4>
  <p class="code"><span data-keyref="Type_Void">N/A</span></p>
  <p>&nbsp;</p>
  <h4>例子:</h4>
  <p class="code">sprite_replace(spr_banner, "gravemaker.png", 1, false, false, 0, 0);</p>
  <p>上面的代码将“ SPR_横幅”中索引的图像资源替换为从外部源加载的另一个图像资源。</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Back: <a href="Sprite_Manipulation.htm">精灵操作</a></div>
        <div style="float:right">Next:&nbsp;<a href="sprite_duplicate.htm">sprite_duplicate</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2023 All Rights Reserved</span></h5>
  </div>
  <!-- KEYWORDS
sprite_replace
-->
  <!-- TAGS
sprite_replace
-->

</body></html>