<!--?xml version="1.0" encoding="utf-8" ?--><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head>

  <script type="text/javascript" language="JavaScript">
    //<![CDATA[
    function reDo() {
      if (innerWidth != origWidth || innerHeight != origHeight)
        location.reload();
    }
    if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
      origWidth = innerWidth;
      origHeight = innerHeight;
      onresize = reDo;
    }
    onerror = null;
  //]]>
  </script>
  <style type="text/css">/*<![CDATA[*/

    < !-- div.WebHelpPopupMenu {
      position: absolute;
      left: 0px;
      top: 0px;
      z-index: 4;
      visibility: hidden;
    }

    p.WebHelpNavBar {
      text-align: right;
    }

    -->
  
/*]]>*/</style>

  <script type="text/javascript">//<![CDATA[

    gRootRelPath = "../..";
    gCommonRootRelPath = "../..";
    gTopicId = "8.2.1.1";
  
//]]></script>

  <script type="text/javascript" src="../../template/scripts/rh.min.js"></script>
  <script type="text/javascript" src="../../template/scripts/common.min.js"></script>
  <script type="text/javascript" src="../../template/scripts/topic.min.js"></script>
  <script type="text/javascript" src="../../template/scripts/topicwidgets.min.js"></script>
<script type="text/javascript" src="../../whxdata/projectsettings.js"></script>
  <link rel="stylesheet" type="text/css" href="../../template/styles/topic.min.css">
  <link rel="stylesheet" type="text/css" href="../../template/Charcoal_Grey/topicheader.css">
  <meta name="topic-status" content="Draft">

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Variables And Variable Scope</title>
  <meta name="generator" content="Adobe RoboHelp 2022">
  <link rel="stylesheet" href="../../assets/css/default.css" type="text/css">
  <script src="../../assets/scripts/main_script.js" type="module"></script>
  <meta name="rh-authors" content="Mark Alexander">
  <meta name="topic-comment" content="Page outlining variables and their scoping in GML">
  <meta name="rh-index-keywords" content="Variables And Variable Scope">
  <meta name="search-keywords" content="variables,scope,local variables,instance variables,global variables">
<meta name="brsnext" value="GameMaker_Language/GML_Overview/Variables/Local_Variables.htm"><meta name="brsprev" value="GameMaker_Language/GML_Overview/Runtime_Functions.htm"></head>

<body>
  <div class="topic-header rh-hide" id="rh-topic-header">
    <div class="logo">
    </div>
    <div class="nav">
      <div class="title" title="Variables And Variable Scope">
        <span>Variables And Variable Scope</span>
      </div>
      <div class="gotohome" title="Click here to see this page in full context">
        <a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a>
      </div>
    </div>
  </div>
  <div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div>



  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1><span data-field="title" data-format="default">变量和变量作用域</span></h1>
  <p><i>变量</i>是大多数编程操作的基本单位。像任何编程语言一样，<b>GML</b>使用它们。</p>
  <p>它们用于将信息存储在设备内存中以供以后(或即时)使用，并指定名称，以便您可以在<a href="Runtime_Functions.htm">运行时</a>和<a href="Script_Functions.htm">脚本函数</a>中引用它们。</p>
  <p><b>GML</b>中的变量可以存储许多不同的<a href="Data_Types.htm">数据类型(Data Types)</a>，例如实数(例如：100、2.456575、-56等)、字符串(例如："Hello world！")、整数(例如：1，556，-7)，或布尔值(<span class="inline">true</span>或<span class="inline">false</span>)，以及其他东西：</p>
  <p class="code">var _num = 126.4545;<br>
    var _str = "Hello World";<br>
    new_num = _num * 100;<br>
    global.my_string = _str + " I said";</p>
  <p>也可以使用变量保存从函数返回的值，例如：</p>
  <p class="code">var _id = instance_nearest(x, y, obj_Tree);<br>
    root = sqrt(1000);<br>
    global.str = string_upper("Hello World");</p>
  <p>因此，变量是我们可以命名并用于存储值以供以后在一个或多个操作中使用的东西。</p>
  <p>一个很好的"真实的世界"变量的例子是某物的速度，例如：汽车的速度。汽车的速度显然是<em>可变的</em>，因为在某个时间点，汽车将静止不动(即其速度等于0)，在另一时间点汽车将行驶(即，其速度大于0)。当汽车加速或减速时，它的速度会改变。因此，如果您想在<span data-keyref="GameMaker Name">GameMaker</span>游戏中存储汽车的速度，则可以将其存储在<strong>变量</strong>中。在游戏中，你可以。当游戏开始时，将变量设置为0，并在您希望汽车改变其速度时更改它。</p>
  <h2>分配和命名规则</h2>
  <p>在<b>GML</b>中分配变量时，变量的名称必须以字母或下划线符号"_"开头，并且只能包含字母、数字和下划线符号"_"，最大长度为64个符号。因此，有效变量是<span class="inline">fish</span>、<span class="inline">foo_bar</span>、<span class="inline">num 1</span>或<span class="inline">_str</span>，而无效变量是<span class="inline">6 fish</span>、<span class="inline">foo bar</span>或<span class="inline">*num</span>。</p>
  <p>现在，在许多编程语言中，您需要在使用变量之前创建变量"赋值"。这基本上意味着您告诉计算机您希望用于变量的名称，并为其分配一个初始值。然后在内存中为变量指定一个位置，以存储值或对其执行操作。分配变量的形式为：</p>
  <p class="code">&lt;variable&gt; = &lt;expression&gt;;</p>
  <p>表达式可以是简单的值，但也可以更加复杂，因此，与其为变量赋值，还可以使用<span class="inline"><b>+=</b></span>将值添加到变量的当前值，例如：</p>
  <p class="code">a = 100;&nbsp;&nbsp;&nbsp;// Assigning a simple value<br>
    b = 200;<br>
    c = 300;<br>
    a += b;&nbsp;&nbsp;&nbsp;&nbsp;// Assigning with operation<br>
    a = b + c; // Assigning with expression</p>
  <p class="note"><span class="note">注意</span>GameMaker语言还将接受"<span class="inline">:=</span>"作为赋值，尽管这通常不是最常用的方法：</p>
  <p class="code">&lt;variable&gt; := &lt;expression&gt;;</p>
  <p>类似地,您可以使用减 <span class="inline"><b>-=</b></span>, 乘 <span class="inline"><b>*=</b></span>, 除 <span class="inline"><b>/=</b></span>, 或者使用位操作符使用 <span class="inline"><b>|=</b></span>, <span class="inline"><b>&amp; =</b></span>,或 <span class="inline"><b>^=</b></span>.您还可以使用<i></i><span class="inline"><b>++</b></span>, <span class="inline"><b>--</b></span>从一个值添加或减去1。有关更多信息，请参见<a href="Expressions_And_Operators.htm">表达式和运算符</a>一节。</p>
  <p>请注意，您<i>无法</i>执行以下操作(或任何变更)：</p>
  <p class="code">a = b = c = 4;</p>
  <p>相反，应该按如下方式进行：</p>
  <p class="code">a = 4;<br>
    b = 4;<br>
    c = 4;</p>
  <h2>变量作用域</h2>
  <p>上面显示的变量赋值都是<strong>实例(instance)</strong>变量，但是当你用<span data-keyref="GameMaker Name">GameMaker</span>编程时，实际上还有四个其他的主要变量类别，每个变量类别都有自己的<strong>作用域</strong>(这可以被认为是它的操作区域，或范围)。不同类型的变量及其作用域都在下面的页面中概述：</p>
  <ul class="colour">
    <li><a href="Variables/Local_Variables.htm">局部变量</a></li>
    <li><a href="Variables/Instance_Variables.htm">实例变量</a></li>
    <li><a href="Variables/Global_Variables.htm">全局变量</a></li>
    <li><a href="Functions/Static_Variables.htm">静态变量</a></li>
    <li><a href="Variables/Constants.htm">常量</a></li>
  </ul>
  <h2>内置变量</h2>
  <p>GameMaker语言也有多个不同的内置变量，这些变量可以具有上述任何作用域(<i>局部(local)</i>除外)。这些变量是特殊的，因为它们默认作为游戏世界中的对象和房间的一部分被包括在内。一些内置的全局变量列在上面提到的章节中，以及手册中关于精灵、房间、对象等的不同部分。还概述了在每种情况下可用的内置变量。</p>
  <p>内置实例变量的示例有：</p>
  <ul class="colour">
    <li><span class="inline"><a href="../GML_Reference/Asset_Management/Sprites/Sprite_Instance_Variables/sprite_index.htm">sprite_index</a></span> 精灵索引</li>
    <li><a href="../GML_Reference/Asset_Management/Paths/Path_Variables/path_index.htm"><span class="inline">path_scale</span></a> 路径缩放</li>
    <li><a href="../GML_Reference/Asset_Management/Instances/Instance_Variables/speed.htm"><span class="inline">speed</span></a> 速度</li>
  </ul>
  <p>内置全局变量的例子有：</p>
  <ul class="colour">
    <li><span class="inline"><a href="../GML_Reference/Cameras_And_Display/Cameras_And_Viewports/view_xport.htm">view_xport</a></span> 视口x坐标</li>
    <li><span class="inline"><a href="../GML_Reference/Asset_Management/Instances/instance_count.htm">instance_count</a></span> 实例数量</li>
    <li><span class="inline"><a href="../GML_Reference/Asset_Management/Rooms/room.htm">room</a></span> 房间</li>
  </ul>
  <p>大多数内置变量都可以像其他变量一样进行更改和设置，有些甚至可以是<a href="Arrays.htm">数组(Arrays)</a>，只是你不必像创建常规变量那样设置它们，因为它们已经被初始化为默认值。</p>
  <h2>变量函数</h2>
  <p>最后，还有一些专门用于设置、获取或以某种方式检查变量的函数，可从以下页面获得：</p>
  <ul class="colour">
    <li><a href="../GML_Reference/Variable_Functions/Variable_Functions.htm">变量函数</a></li>
  </ul>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Back: <a href="GML_Overview.htm">GML&nbsp;Overview</a></div>
        <div style="float:right">Next:&nbsp;<a href="Data_Types.htm">数据类型</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2023 All Rights Reserved</span></h5>
  </div>
  <!-- KEYWORDS
variables
variables - built-in
variables - scope
declaring variables
scope
built-in variables
-->
  <!-- TAGS
variables
-->

</body></html>