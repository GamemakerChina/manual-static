<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../../..",gTopicId="8.2.2.12.1.0_20"</script><script type="text/javascript" src="../../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><link rel="stylesheet" type="text/css" href="../../../assets/css/default.css"><script src="../../../../assets/scripts/main_script.js"></script><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="generator" content="Adobe RoboHelp 2022"><title>call_later</title><meta name="topic-status" content="Draft"><link rel="stylesheet" type="text/css" href="../../../assets/css/default.css"><script src="../../../assets/scripts/main_script.js" type="module"></script><meta name="template" content="../../../assets/masterpages/Manual_Keyword_Page.htt"><meta name="rh-authors" content="Bart Teunis"><meta name="topic-comment" content="Reference page for call_later"><meta name="rh-index-keywords" content="call_later"><meta name="search-keywords" content="call_later"><meta name="brsnext" value="GameMaker_Language/GML_Reference/Time_Sources/call_cancel.htm"><meta name="brsprev" value="GameMaker_Language/GML_Reference/Time_Sources/time_seconds_to_bpm.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="call_later"><span>call_later</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><div></div><div><h1>call_later</h1><p>此函数在指定时间之后或特定时间间隔之后触发回调函数。它通过创建<span data-keyref="Type_Resource_TimeSource">时间源</span>(请参见<a href="Time_Sources.htm">时间源</a>)来执行此操作。</p><p>要取消回调函数，请参阅 <a href="call_cancel.htm">call_cancel</a>。</p><p class="note"><span class="important">重要</span> 虽然此函数返回实际时间源，但它不能与时间源函数一起使用，因为 <a href="call_later.htm">call_later</a> 和 <a href="call_cancel.htm">call_cancel</a> 使用的时间源是 " 不可见的" - 它们不会出现作为任何内置时间源的子级，不能与其他时间源函数一起使用。不过，它们包含在 <a href="../Debugging/debug_event.htm">debug_event("ResourceCou<span class="inline"></span>nts")</a> 返回的时间源计数中。</p><h2>参数</h2><p>下面是这个函数的参数明细：</p><h3><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down2" href="#"><span data-open-text="true" data-skip-index="true">时期</span><span data-close-text="true">时期</span></a></h3><div class="droptext" data-targetname="drop-down2"><p class="dropspot">这是一段时间，可以用秒或帧表示，具体取决于下一个参数中指定的单位。</p><p class="dropspot">使用帧作为单位时，句点必须是整数。非整数值向下舍入 (浮点)，但低于 1 的值除外，这些值向上舍入为 1。</p></div><h3><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down3" href="#"><span data-open-text="true" data-skip-index="true">单位</span><span data-close-text="true">单位</span></a></h3><div class="droptext" data-targetname="drop-down3"><p class="dropspot">这是周期所用的单位，可以是 <span class="inline2">time_source_units_seconds</span> 或 <span class="inline2">time_source_units_frames</span>。</p><p class="dropspot">请参阅：<a href="Time_Source_Units.htm">时间源单位</a></p><p class="dropspot">通过使用<span class="inline"><a href="time_bpm_to_seconds.htm">time_bpm_to_seconds()</a></span>，可以使用"每分钟-毫秒(BPM)"值。</p></div><h3><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down4" href="#"><span data-open-text="true" data-skip-index="true">回调</span><span data-close-text="true">回调</span></a></h3><div class="droptext" data-targetname="drop-down4"><p class="dropspot">必须指定在<span data-keyref="Type_Resource_TimeSource">时间源</span>过期时调用的"回调"<a href="../../GML_Overview/Method_Variables.htm">方法</a>。</p></div><p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down6" href="#"><span data-open-text="true" data-skip-index="true">循环</span><span data-close-text="true">循环</span></a></p><p class="dropspot" data-targetname="drop-down6">时间源是否应循环。</p><p></p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><h4>语法:</h4><p class="code">call_later(period, unit, callback, [loop=false]);</p><table><colgroup><col><col><col></colgroup><tbody><tr><th>参数</th><th>类型</th><th>描述</th></tr><tr><td>period</td><td><span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Real</a></span></td><td><span data-keyref="Type_Resource_TimeSource">时间源</span>运行的时间段，以给定单位表示</td></tr><tr><td>units</td><td><span data-keyref="Type_Constant_TimeSource_Unit"><a target="_blank" href="Time_Source_Units.htm">Time Source Unit Constant</a></span></td><td>给定期间所在的单位</td></tr><tr><td>callback</td><td><span data-keyref="Type_Method"><a target="_blank" href="../../GML_Overview/Method_Variables.htm">Method</a></span>&nbsp;or&nbsp;<span data-keyref="Type_Function_Script"><a target="_blank" href="../../GML_Overview/Script_Functions.htm">Script Function</a></span></td><td>在指定时间之后要调用的方法或脚本函数</td></tr><tr><td>loop</td><td><span data-keyref="Type_Bool"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Boolean</a></span></td><td><span class="optional">可选</span> 是否循环<span data-keyref="Type_Resource_TimeSource">时间源</span>(默认为 <span class="inline2">false</span>)</td></tr></tbody></table><p>&nbsp;</p><h4>返回:</h4><p class="code"><span data-keyref="Type_ID_TimeSource"><a target="_blank" href="time_source_create.htm">Time Source</a></span></p><p>&nbsp;</p><h4>示例1：</h4><p class="code">var _callback = function()<br>{<br>&nbsp; &nbsp; show_debug_message("Five seconds have passed!");<br>}<br>var _handle = call_later(5, time_source_units_seconds, _callback);</p><p>在本例中，我们将创建一个回调函数，该函数显示五秒后的调试消息。之后，下面的<span data-keyref="Type_Resource_TimeSource">时间源</span>被销毁。</p><h4>示例2：</h4><p class="code">var _create_enemy = function()<br>{<br>&nbsp; &nbsp; var _x =&nbsp;random(room_width);<br>&nbsp; &nbsp; var _y = random(room_height);<br>&nbsp; &nbsp; instance_create_depth(_x, _y, depth, obj_enemy);<br>}<br><br>var _handle = call_later(10, time_source_units_seconds, _create_enemy, true);</p><p>在此示例中，我们创建一个回调函数，该函数在房间中的随机位置创建一个新敌人。然后将该函数传递给 <a href="call_later.htm">call_later</a>，每 10 秒执行一次。最后一个参数设置为 <span class="inline2">true</span>，因此该函数每 10 秒就会被调用一次。</p><p>使用 <a href="call_cancel.htm">call_cancel</a> 以及 <a href="call_later.htm">call_later</a> 返回的句柄来停止<span data-keyref="Type_Resource_TimeSource">时间源</span>和对回调的调用。</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div>Back:&nbsp;<a href="Time_Sources.htm">时间源</a>&nbsp;</div><div>Next:&nbsp;<a href="call_cancel.htm">call_cancel</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></div></body></html>