<!--?xml version="1.0" encoding="utf-8" ?--><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head>

  <script type="text/javascript" language="JavaScript">
    //<![CDATA[
    function reDo() {
      if (innerWidth != origWidth || innerHeight != origHeight)
        location.reload();
    }
    if ((parseInt(navigator.appVersion) == 4) && (navigator.appName == "Netscape")) {
      origWidth = innerWidth;
      origHeight = innerHeight;
      onresize = reDo;
    }
    onerror = null;
  //]]>
  </script>
  <style type="text/css">/*<![CDATA[*/

    < !-- div.WebHelpPopupMenu {
      position: absolute;
      left: 0px;
      top: 0px;
      z-index: 4;
      visibility: hidden;
    }

    p.WebHelpNavBar {
      text-align: right;
    }

    -->
  
/*]]>*/</style>

  <script type="text/javascript">//<![CDATA[

    gRootRelPath = "../../../..";
    gCommonRootRelPath = "../../../..";
    gTopicId = "8.2.2.3.5";
  
//]]></script>

  <script type="text/javascript" src="../../../../template/scripts/rh.min.js"></script>
  <script type="text/javascript" src="../../../../template/scripts/common.min.js"></script>
  <script type="text/javascript" src="../../../../template/scripts/topic.min.js"></script>
  <script type="text/javascript" src="../../../../template/scripts/topicwidgets.min.js"></script>
<script type="text/javascript" src="../../../../whxdata/projectsettings.js"></script>
  <link rel="stylesheet" type="text/css" href="../../../../template/styles/topic.min.css">
  <link rel="stylesheet" type="text/css" href="../../../../template/Charcoal_Grey/topicheader.css">
  <meta name="topic-status" content="Draft">

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>Audio</title>
  <meta name="generator" content="Adobe RoboHelp 2020">
  <link rel="stylesheet" href="../../../../assets/css/default.css" type="text/css">
  <script src="../../../../assets/scripts/main_script.js" type="module"></script>
  <meta name="rh-authors" content="Mark Alexander">
  <meta name="topic-comment" content="Page outlining the different functions and variables associated with Audio">
  <meta name="rh-index-keywords" content="">
  <meta name="search-keywords" content="Audio">
<meta name="brsnext" value="GameMaker_Language/GML_Reference/Asset_Management/Audio/audio_exists.htm"><meta name="brsprev" value="GameMaker_Language/GML_Reference/Asset_Management/Tilsets/tileset_get_uvs.htm"></head>

<body>
  <div class="topic-header rh-hide" id="rh-topic-header">
    <div class="logo">
    </div>
    <div class="nav">
      <div class="title" title="Audio">
        <span>Audio</span>
      </div>
      <div class="gotohome" title="Click here to see this page in full context">
        <a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a>
      </div>
    </div>
  </div>
  <div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div>



  <!--<div class="body-scroll" style="top: 150px;">-->
  <h1><span data-field="title" data-format="default">音频</span></h1>
  <p><span data-keyref="GameMaker Name">GameMaker</span> 拥有一个完整的音频引擎，该引擎基于 <span class="inline">*.ogg</span>、<span class="inline">*.mp3</span> 和 <span class="inline">*.wav</span> 声音格式。</p>
  <p>这些类型的声音<a href="../../../../The_Asset_Editors/Sounds.htm">添加到IDE</a>中，然后可以使用下面显示的基本音频函数在游戏中使用。</p>
  <p>对于比基本音效或播放一首音乐更复杂的事情，您可以参考高级音频功能，这些功能允许您修改声音的播放方式。此外，还有一系列更专业的功能，可用于流媒体音频、定位音频 (提供 3D 声音)、音频分组、同步音频和音频效果。</p>
  <div data-conref="../../../../assets/snippets/Note_HTML5_Web_Audio.hts">
  <p class="note"><b><span data-conref="../../../../assets/snippets/Tag_important.hts"><span class="important">重要</span></span></b> 在 HTML5 目标上使用音频时，您应该知道并非所有浏览器都支持 Web 音频，因此在运行时可能不会为项目播放任何声音。您可以通过以下链接了解 Web 音频支持的一般情况：<a href="https://caniuse.com/audio-api" target="_blank">我能使用网络音频吗?</a>。</p>

</div>
  <div class="minitoc" data-minitoc-targetid="drop-down1" style="">
    <p class="minitoc-caption" href="#" style="">目录</p>
    
  <ol class="minitoc-list" style=""><li><a href="#using_audio" class="minitoc-list-item">使用音频</a></li><li><a href="#advanced_audio" class="minitoc-list-item">高级音频</a></li><li><a href="#web_audio" class="minitoc-list-item">Web 音频</a></li><li><a href="#function_refere" class="minitoc-list-item">函数参考</a></li></ol></div>
  <h2 id="using_audio">使用音频</h2>
  <h3>播放音频</h3>
  <p>播放声音最直接的方法是使用 <span class="inline2"><a href="audio_play_sound.htm">audio_play_sound</a></span>：</p>
  <p class="code">audio_play_sound(snd_Explode, 10, false);</p>
  <p>您至少必须提供<span data-keyref="Type_Asset_Sound"><a target="_blank" href="../../../../../The_Asset_Editors/Sounds.htm">声音资源</a></span>、新声音实例的优先级以及声音是否应该循环。</p>
  <p>播放声音的另一种方法是使用 <span class="inline2"><a href="audio_play_sound_ext.htm">audio_play_sound_ext</a></span>。此函数与 <span class="inline2"><a href="audio_play_sound.htm">audio_play_sound</a></span> 相同，但允许您在结构中传递各种音频参数。使用此函数，您只需通过的 " 声音 " 键提供 <span data-keyref="Type_Asset_Sound"><a target="_blank" href="../../../../../The_Asset_Editors/Sounds.htm"> 声音资源 </a></span></p>
  <p class="code">audio_play_sound_ext({ sound: snd_Explode&nbsp;});</p>
  <p><span>此处，优先级将默认为 0，并且声音不会循环。您可以在结构中提供<a href="audio_play_sound_ext.htm">个附加键</a>以更改声音的属性。</span></p>
  <h3>声音实例(语音)</h3>
  <p>这些函数 <span class="inline2"><a href="audio_play_sound.htm">audio_play_sound</a></span> 和 <span class="inline2"><a href="audio_play_sound_ext.htm">audio_play_sound_ext</a></span> 创建声音(也称为"语音")的新<em>实例</em>并返回其 ID：</p>
  <p class="code">ins_sound = audio_play_sound(snd_Explode, 10, false);</p>
  <p>您可以在函数中使用此声音&nbsp;<strong>实例</strong> ID 来更改<strong>实例</strong>级别的音频属性(或直接将它们作为可选参数传递)。这只会更改该特定声音实例的属性。</p>
  <p>如果您将声音<strong>资源</strong> ID 传递给函数，则在<strong>资源</strong>级别的音频属性将设置为给定值。</p>
  <p class="note"><span data-conref="../../../../assets/snippets/Tag_note.hts"><span class="note">注意</span></span>&nbsp;<span class="inline2"><a href="audio_play_sound_at.htm">audio_play_sound_at</a></span>&nbsp;和 <span class="inline2"><a href="Audio_Emitters/audio_play_sound_on.htm">audio_play_sound_on</a></span>&nbsp;以相同的方式工作，并返回它们创建的声音实例的ID。</p>
  <p class="note"><span data-conref="../../../../assets/snippets/Tag_tip.hts"><span class="tip">提示</span></span>&nbsp;默认最大声音实例数为&nbsp;<span data-keyref="Max_Audio_Channels_Default">128</span>。可以使用函数&nbsp;<span class="inline2"><a href="audio_channel_num.htm">audio_channel_num</a></span> 更改此设置。</p>
  <h3>音频特性</h3>
  <p>每种声音都有应用于不同"级别"的基本属性。根据属性的不同，它要么充当乘数，要么覆盖在上一级别设置的值。</p>
  <p>这些音频属性是：&nbsp;</p>
  <ul class="Disc">
    <li><a href="audio_sound_gain.htm"><strong>增益</strong></a>：这是体积的乘数。资源级别上的增益的默认值是<a href="../../../../The_Asset_Editors/Sounds.htm">声音编辑器</a>中的"音量"滑块的值。所有其他级别的默认值为 1。也可以使用<a href="Audio_Effects/Audio_Effects.htm">音效</a>添加增益。</li>
    <li><a href="audio_sound_pitch.htm"><strong>音调</strong></a>：这是声音音调的倍增。所有级别上的间距的默认值都设置为 1。</li>
    <li><a href="audio_sound_set_track_position.htm"><strong>偏移/曲目位置</strong></a>：这是从开始播放的音频曲目开始的偏移量。如果在实例级别设置此值，它将覆盖在资源级别设置的值。默认情况下，该值为 0 (即无偏移)。</li>
    <li><a href="audio_sound_set_listener_mask.htm"><strong>监听器掩码</strong></a>：这是一个位掩码值，用于确定收听音频的监听器。默认值为 1( 或 <span class="inline2">0x01</span>)，表示默认监听程序。</li>
  </ul>
  <p>有关所有音频属性、级别及其值的计算方式的概述，请参阅<a href="Audio_Properties.htm">音频属性概述</a>。</p>
  <h3>音频循环</h3>
  <p>声音可以通过设置为循环来循环。这可以在使用任何 <span class="inline2">audio_play_sound_</span> 函数播放声音时完成：</p>
  <p class="code">ins_sound = audio_play_sound(snd_Engine, 100, true);</p>
  <p>或者之后，当声音已经播放时，使用函数 <span class="inline3_func"><a href="Audio_Loop_Points/audio_sound_loop.htm">audio_sound_loop</a></span>：</p>
  <p class="code">audio_sound_loop(ins_sound, true);</p>
  <p>默认情况下，声音从开始循环到结束。在播放声音时，也可以分别使用 <span class="inline3_func"><a href="Audio_Loop_Points/audio_sound_loop_start.htm">audio_sound_loop_start</a></span> 和 <span class="inline3_func"><a href="Audio_Loop_Points/audio_sound_loop_end.htm">audio_sound_loop_end</a></span> 更改开始和结束位置 (即，<span class="inline2">ins_sound</span> 指的是一个声音实例，其 <span class="inline3_func"><a href="audio_is_playing.htm">audio_is_playing</a></span> 返回 <span class="inline2">true</span>)。</p>
  <p>当音轨位置到达循环结束位置(如果声音设置为循环)时，它将从开始位置继续播放。</p>
  <p class="note"><span data-conref="../../../../assets/snippets/Tag_important.hts"><span class="important">重要</span></span> 循环结束位置<em>必须</em>超过循环开始位置。例外情况是循环结束的值为 0.0，它标记声音的结束(即&nbsp;<span class="inline3_func"><a href="audio_sound_length.htm">audio_sound_length</a></span>)。</p>
  <p>请参阅：<a href="Audio_Loop_Points/Audio_Loop_Points.htm">音频循环点</a></p>
  <h3>音效</h3>
  <p>最后，您可以为播放的音频添加效果，如混响、回声、延迟等。</p>
  <p>使用 <span class="inline2"><a href="Audio_Effects/audio_effect_create.htm">audio_effect_create</a></span> 创建音效，然后将其分配给音频总线的一个效果槽。您始终可以为其分配效果的音频总线是主音频总线 <span class="inline2"><a href="Audio_Effects/audio_bus_main.htm">audio_bus_main</a></span>。</p>
  <p>请参阅：<a href="Audio_Effects/Audio_Effects.htm">Audio Effects</a></p>
  <h2 id="advanced_audio">高级音频</h2>
  <h3>音频发射器和监听器</h3>
  <p>如果您需要位置音频或应该在三维环境中播放的音频，您可以使用<a href="Audio_Emitters/Audio_Emitters.htm">音频发射器</a>和<a href="Audio_Listeners/Audio_Listeners.htm">音频监听器</a>。</p>
  <p class="note"><span data-conref="../../../../assets/snippets/Tag_note.hts"><span class="note">注意</span></span> <a href="Audio_Emitters/Audio_Emitters.htm">音频发射器</a>为增益、音调和收听者掩码参数引入另一个级别。</p>
  <h3>音频组</h3>
  <p>除流式音频外，所有声音资源都属于单个<a href="../../../../Settings/Audio_Groups.htm">音频组</a>。音频组中的声音可以同时加载和卸载。</p>
  <p>音频组有自己的增益因子(请参阅 <span class="inline2"><a href="Audio_Groups/audio_group_set_gain.htm">audio_group_set_gain</a></span>&nbsp;/&nbsp;<span class="inline2"><a href="Audio_Groups/audio_group_get_gain.htm">audio_group_get_gain</a></span>)</p>
  <p class="note"><span data-conref="../../../../assets/snippets/Tag_note.hts"><span class="note">注意</span></span> 默认情况下，所有声音都添加到音频组 <span class="inline2"><a href="Audio_Groups/audiogroup_default.htm">audiogroup_default</a></span>。</p>
  <h3>音频串流</h3>
  <p><span data-keyref="GameMaker Name">GameMaker</span> 支持直接从 .ogg 文件加载流音频。为此，您可以使用 <span class="inline2"><a href="audio_create_stream.htm">audio_create_stream</a></span> 和 <span class="inline2"><a href="audio_destroy_stream.htm">audio_destroy_stream</a></span>.</p>
  <h3>同步组</h3>
  <p>对于应该在每个样本级别上完美同步播放的音频，<span data-keyref="GameMaker Name">GameMaker</span> 具有同步组。有关这方面的详细信息，请参阅 <a href="Audio_Synchronisation/Audio_Synchronisation.htm"> 音频同步 </a>。</p>
  <h2 id="web_audio">Web 音频</h2>
  <p>在为 HTML5 目标平台创建游戏时，音频引擎需要<b>Web 音频</b>支持，这反过来意味着有时您的音频不会在您期望的时间或方式播放。这是因为在玩游戏时，Web 音频上下文可能未运行或停止运行。导致这种情况的原因在浏览器之间，甚至在同一浏览器的不同版本之间差异很大，因此检测网络音频上下文状态何时改变是非常重要的，例如：检测上下文何时改变，并暂停/开始循环音频，如背景音乐。</p>
  <p>为了帮助解决这个问题，<span data-keyref="GameMaker Name">GameMaker</span>有两种不同的方法来检测Web音频上下文状态的变化，使用以下函数：</p>
  <ul class="colour">
    <li><a href="audio_system_is_available.htm">audio_system_is_available</a></li>
  </ul>
  <p>或者使用 <b> 异步系统事件 </b>，该事件将在网络音频状态发生变化时触发。在此事件中，您将获得内置 <span class="inline2"><a href="../../../GML_Overview/Variables/Builtin_Global_Variables/async_load.htm">async_load</a></span><span>DS 映射 </span>，其中填充了关键字 "<span class="inline">event_type</span>"，如果是音频事件，则该映射将包含字符串 "<span class="inline">audio_system_status</span>"。当此密钥存在时，还会有另一个 "<span class="inline"> 状态 </span>" 键，该键将是 "<span class="inline"> 可用 </span>" 或 "<span class="inline"> 不可用 </span>"。</p>
  <p>有关更多信息，请参阅小节：</p>
  <ul class="colour">
    <li><a href="../../../../The_Asset_Editors/Object_Properties/Async_Events/System.htm">异步系统事件</a></li>
  </ul>
  <p class="note"><span data-conref="../../../../assets/snippets/Tag_note.hts"><span class="note">注意</span></span>&nbsp;此事件将在<i>所有</i>平台上触发，但在除 HTML5 之外的所有平台上，它只会在游戏开始时音频引擎首次初始化时触发一次。</p>
  <p>要检查是否可以使用网络音频播放音频，可以使用&nbsp;<span class="inline2"><a href="audio_sound_is_playable.htm">audio_sound_is_playable</a></span>。</p>
  <h2 id="function_refere">函数参考</h2>
  <h3>资源信息</h3>
  <ul class="colour">
    <li><a href="audio_exists.htm">audio_exists</a></li>
    <li><a href="audio_get_name.htm">audio_get_name</a></li>
    <li><a href="audio_get_type.htm">audio_get_type</a></li>
    <li><a href="audio_sound_length.htm">audio_sound_length</a></li>
    <li><a href="audio_sound_is_playable.htm">audio_sound_is_playable</a></li>
  </ul>
  <h3>播放音频</h3>
  <ul class="colour">
    <li><a href="audio_play_sound.htm">audio_play_sound</a></li>
    <li><a href="audio_play_sound_ext.htm">audio_play_sound_ext</a></li>
    <li><a href="audio_play_sound_at.htm">audio_play_sound_at</a></li>
    <li><a href="audio_pause_sound.htm">audio_pause_sound</a></li>
    <li><a href="audio_pause_all.htm">audio_pause_all</a></li>
    <li><a href="audio_resume_sound.htm">audio_resume_sound</a></li>
    <li><a href="audio_resume_all.htm">audio_resume_all</a></li>
    <li><a href="audio_stop_sound.htm">audio_stop_sound</a></li>
    <li><a href="audio_stop_all.htm">audio_stop_all</a></li>
    <li><a href="audio_is_playing.htm">audio_is_playing</a></li>
    <li><a href="audio_is_paused.htm">audio_is_paused</a></li>
  </ul>
  <h3>音频特性</h3>
  <ul class="colour">
    <li><a href="audio_sound_gain.htm">audio_sound_gain</a></li>
    <li><a href="audio_sound_get_gain.htm">audio_sound_get_gain</a></li>
    <li><a href="audio_sound_pitch.htm">audio_sound_pitch</a></li>
    <li><a href="audio_sound_get_pitch.htm">audio_sound_get_pitch</a></li>
    <li><a href="audio_sound_set_track_position.htm">audio_sound_set_track_position</a></li>
    <li><a href="audio_sound_get_track_position.htm">audio_sound_get_track_position</a></li>
    <li><a href="audio_sound_set_listener_mask.htm">audio_sound_set_listener_mask</a></li>
    <li><a href="audio_sound_get_listener_mask.htm">audio_sound_get_listener_mask</a></li>
  </ul>
  <h3><a href="Audio_Loop_Points/Audio_Loop_Points.htm">音频循环点</a></h3>
  <ul class="colour">
    <li><a href="Audio_Loop_Points/audio_sound_loop.htm">audio_sound_loop</a></li>
    <li><a href="Audio_Loop_Points/audio_sound_get_loop.htm">audio_sound_get_loop</a></li>
    <li><a href="Audio_Loop_Points/audio_sound_loop_start.htm">audio_sound_loop_start</a></li>
    <li><a href="Audio_Loop_Points/audio_sound_get_loop_start.htm">audio_sound_get_loop_start</a></li>
    <li><a href="Audio_Loop_Points/audio_sound_loop_end.htm">audio_sound_loop_end</a></li>
    <li><a href="Audio_Loop_Points/audio_sound_get_loop_end.htm">audio_sound_get_loop_end</a></li>
  </ul>
  <h3>配置</h3>
  <ul class="colour">
    <li><a href="audio_master_gain.htm">audio_master_gain</a></li>
    <li><a href="audio_set_master_gain.htm">audio_set_master_gain</a></li>
    <li><a href="audio_get_master_gain.htm">audio_get_master_gain</a></li>
    <li><a href="audio_channel_num.htm">audio_channel_num</a></li>
    <li><a href="audio_falloff_set_model.htm">audio_falloff_set_model</a></li>
    <li><a href="audio_system_is_available.htm">audio_system_is_available</a></li>
    <li><a href="audio_system_is_initialised.htm">audio_system_is_initialised</a></li>
  </ul>
  <h3>调试</h3>
  <ul class="colour">
    <li><a href="audio_debug.htm">audio_debug</a></li>
  </ul>
  <h3>Gain Conversion</h3>
  <ul class="colour">
    <li><a href="lin_to_db.htm">lin_to_db</a></li>
    <li><a href="db_to_lin.htm">db_to_lin</a></li>
  </ul>
  <h3>音频串流</h3>
  <ul class="colour">
    <li><a href="audio_create_stream.htm">audio_create_stream</a></li>
    <li><a href="audio_destroy_stream.htm">audio_destroy_stream</a></li>
  </ul>
  <h3>高级音频</h3>
  <ul class="colour">
    <li><a href="Audio_Emitters/Audio_Emitters.htm">音频发射器</a></li>
    <li><a href="Audio_Listeners/Audio_Listeners.htm">音频监听器</a></li>
    <li><a href="Audio_Effects/Audio_Effects.htm">音效</a></li>
    <li><a href="Audio_Groups/Audio_Groups.htm">音频组</a></li>
    <li><a href="Audio_Buffers/Audio_Buffers.htm">音频缓冲区</a></li>
    <li><a href="Audio_Synchronisation/Audio_Synchronisation.htm">音频同步</a></li>
  </ul>
  <p>&nbsp;</p>
  <p>&nbsp;</p>
  <div class="footer">
    <div class="buttons">
      <div class="clear">
        <div style="float:left">Back:&nbsp;<a href="../Asset_Management.htm">资源管理</a></div>
        <div style="float:right">Next:&nbsp;<a href="../Paths/Paths.htm">路径</a></div>
      </div>
    </div>
    <h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2023 All Rights Reserved</span></h5>
  </div>
  <!-- KEYWORDS
Audio
-->
  <!-- TAGS
audio_functions
-->

</body></html>