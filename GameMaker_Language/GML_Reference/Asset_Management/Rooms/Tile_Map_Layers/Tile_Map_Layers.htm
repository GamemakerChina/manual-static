<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../../../../..",gTopicId="8.2.2.3.14.2"</script><script type="text/javascript" src="../../../../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../../../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../../../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../../../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../../../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../../../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../../../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Tile Map Elements</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../../../../assets/css/default.css" type="text/css"><script src="../../../../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Page outlining the different functions and variables associated with Tile Layers"><meta name="rh-index-keywords" content=""><meta name="search-keywords" content="Tile Map Layers"><meta name="brsnext" value="GameMaker_Language/GML_Reference/Asset_Management/Rooms/Tile_Map_Layers/layer_tilemap_get_id.htm"><meta name="brsprev" value="GameMaker_Language/GML_Reference/Asset_Management/Rooms/General_Layer_Functions/layer_reset_target_room.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="Tile Map Elements"><span>Tile Map Elements</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1 id="h2"><span data-field="title" data-format="default">平铺地图元素</span></h1><p>图块地图是图块集图块的集合，这些图块都被认为位于房间内的相同深度。</p><p>它可以可视化为一个网格，其中每个单元格存储一些图块数据：应在该单元格绘制的图块的索引，以及应如何绘制它 (旋转、翻转和 / 或镜像)。</p><p>每个图块地图都有自己唯一的元素 ID 和属性。</p><p>使用图块时，您会使用一些彼此相关的东西，如下所示：</p><ul class="colour"><li><strong>图块集</strong> 是用于创建图块图层和图块地图的资源。</li><li><strong>图块层</strong> 是您在 <a href="../../../../../The_Asset_Editors/Rooms.htm">房间编辑器</a> 中创建的用于添加图块集的层。请注意，图层仅在房间编辑器中属于某种类型，在代码中则不然。</li><li><strong>图块地图</strong> 是您所说的图块集合，这些图块可以在房间编辑器中或通过代码添加到层中，作为该层上的单个元素。</li></ul><p class="note"><span data-conref="../../../../../assets/snippets/Tag_note.hts"><span class="note">注意</span></span> 在房间编辑器中，每层只能使用一个图块地图，该地图是在您添加 <a href="../../../../../The_Asset_Editors/Room_Properties/Layer_Properties.htm">图块层</a> 时创建的，但在代码中使用它们时，您可以拥有多个分配给图层的平铺地图。</p><h3 id="tile_data_blob">平铺数据 "Blob"</h3><p>瓦片数据的 "blob" 存储为 32 位值。它由 <span data-keyref="Const_Tile_Data_Max_Index_Bits">19</span> 位组成，用于存储图块集中的图块索引 (位 0 到 18)，加上一些额外的位来指示应如何绘制图块数据：位 28 存储镜像位，位 29 位存储翻转位，位 30 存储旋转位，位 31 未使用。位 19 至 27 也未使用。您还可以使用这些未使用的位来存储您自己的数据。</p><p>为了更方便地访问某些位，您可以使用平铺掩码常量的值：</p><table id="table" style="caption-side:top"><caption>平铺掩模常数</caption><colgroup><col><col></colgroup><tbody><tr><th>常量</th><th>描述</th></tr><tr><td><span class="inline">tile_rotate</span></td><td>Used to set/get the rotate bit of a tile data blob.</td></tr><tr><td><span class="inline">tile_mirror</span></td><td>Used to set/get the mirror bit of a tile data blob.</td></tr><tr><td><span class="inline">tile_flip</span></td><td>Used to set/get the flip bit of a tile data blob.</td></tr><tr><td><span class="inline">tile_index_mask</span></td><td>A special constant that is for "and"-ing with the tile data blob to extract the&nbsp;<span data-keyref="Const_Tile_Data_Max_Index_Bits">19</span>&nbsp;bits of the tile index.</td></tr></tbody></table><p>您可以使用 <span class="inline3_func"><a href="tilemap_get.htm">tilemap_get</a></span> 或 <span class="inline3_func"><a href="tilemap_get_at_pixel.htm">tilemap_get_at_pixel</a></span> 获取特定地图单元格的图块数据，并使用 <span class="inline3_func"><a href="tilemap_set.htm">tilemap_set</a></span> 或 <span class="inline3_func"><a href="tilemap_set_at_pixel.htm">tilemap_set_at_pixel</a></span>设置数据。</p><h3 id="tile_map_bit_mask">平铺地图位掩码</h3><p>您可以将自己的位掩码添加到图块地图中，以便将图块数据 "blob" 的位供您自己使用，尽管这仅适用于高级用户，因为您将屏蔽为图块地图保留的位。瓷砖索引。为您的图块索引保留了 <span data-keyref="Const_Tile_Data_Max_Index_Bits">19</span> 位，但如果您只使用其中的 8 个，那么您还剩下 11 位可用于创建自定义掩码。然后可以使用该遮罩并在代码中检查以创建自定义图块碰撞或其他内容。</p><p>当 <i>绘制</i> 图块地图时，位掩码是针对图块数据的 "and"-ed<span class="inline2">&amp;</span> (因此它不会影响任何其他功能)，这意味着不在掩码中的位将被忽略，但用户仍然可以出于自己的目的读取和写入。</p><p>不过，您通常不需要创建自己的图块数据 blob，而是使用函数 <span class="inline3_func"><a href="tilemap_get.htm">tilemap_get</a></span> 获取图块数据，然后使用用于 <a href="Tile_Map_Layers.htm#editing_individual_tiles">编辑单个图块</a>的函数来操作它 ，然后您可以使用 <span class="inline3_func"><a href="tilemap_set.htm">tilemap_set</a></span> 再次设置它。</p><p class="note"><span data-conref="../../../../../assets/snippets/Tag_note.hts"><span class="note">注意</span></span> 除了每个图块地图的遮罩之外，还有一个 <a href="tilemap_set_global_mask.htm">全局</a> 遮罩。在用于绘图之前，<span class="inline2">GameMaker</span> 在内部将两者按位 " 与 "<span data-keyref="GameMaker Name">&amp;</span> 组合在一起。</p><h3 id="calculating_the_mask_bits">计算掩码位</h3><p>要获得初始索引掩码值，您需要获取图块集中的图块数量并减去 1，因此 16x16 图块集有 256 个图块，掩码值为 255( 或十六进制的 $ff)。如果图块集的图块数量不是 2 的幂，则向上舍入到最接近的 2 的幂以获得掩码，例如 20x20 的图块集有 400 个图块，您可以将其向上舍入到 512，因此得到掩码索引值 511( 十六进制 $1ff)。除了索引掩码之外，通常您还希望保留分配给图块的翻转、旋转和镜像值，为了帮助实现这一点，可以使用 <a href="Tile_Map_Layers.htm#table" title="Tile Mask Constant Table">Tile Mask Constant</a> 下的常量。这些可以与索引掩码值一起按位 " 或 " 组合 <span class="inline2">|</span> 以保留这些数据位。</p><p class="note"><span data-conref="../../../../../assets/snippets/Tag_note.hts"><span class="note">注意</span></span> 有关如何使用二进制和位掩码的详细信息，请参阅 <a href="../../../../../Additional_Information/Bitwise_Operators.htm">位运算符</a> 。</p><h2 id="func_ref">功能参考</h2><h3 id="func_ref_editing_tile_map_layers">编辑 <span data-field="title" data-format="default" id="">平铺地图元素</span></h3><ul class="colour"><li><a href="layer_tilemap_get_id.htm">layer_tilemap_get_id</a></li><li><a href="layer_tilemap_exists.htm">layer_tilemap_exists</a></li><li><a href="layer_tilemap_create.htm">layer_tilemap_create</a></li><li><a href="layer_tilemap_destroy.htm">layer_tilemap_destroy</a></li><li><a href="tilemap_tileset.htm">tilemap_tileset</a></li><li><a href="tilemap_clear.htm">tilemap_clear</a></li><li><a href="tilemap_x.htm">tilemap_x</a></li><li><a href="tilemap_y.htm">tilemap_y</a></li><li><a href="tilemap_set.htm">tilemap_set</a></li><li><a href="tilemap_set_at_pixel.htm">tilemap_set_at_pixel</a></li><li><a href="tilemap_set_mask.htm">tilemap_set_mask</a></li><li><a href="tilemap_set_global_mask.htm">tilemap_set_global_mask</a></li><li><a href="tilemap_set_width.htm">tilemap_set_width</a></li><li><a href="tilemap_set_height.htm">tilemap_set_height</a></li><li><a href="tilemap_get_mask.htm">tilemap_get_mask</a></li><li><a href="tilemap_get_global_mask.htm">tilemap_get_global_mask</a></li><li><a href="tilemap_get_tileset.htm">tilemap_get_tileset</a></li><li><a href="tilemap_get_frame.htm">tilemap_get_frame</a></li><li><a href="tilemap_get_tile_width.htm">tilemap_get_tile_width</a></li><li><a href="tilemap_get_tile_height.htm">tilemap_get_tile_height</a></li><li><a href="tilemap_get_width.htm">tilemap_get_width</a></li><li><a href="tilemap_get_height.htm">tilemap_get_height</a></li><li><a href="tilemap_get_x.htm">tilemap_get_x</a></li><li><a href="tilemap_get_y.htm">tilemap_get_y</a></li><li><a href="tilemap_get.htm">tilemap_get</a></li><li><a href="tilemap_get_at_pixel.htm">tilemap_get_at_pixel</a></li><li><a href="tilemap_get_cell_x_at_pixel.htm">tilemap_get_cell_x_at_pixel</a></li><li><a href="tilemap_get_cell_y_at_pixel.htm">tilemap_get_cell_y_at_pixel</a></li><li><a href="../../../Drawing/Sprites_And_Tiles/draw_tilemap.htm">draw_tilemap</a></li></ul><h3 id="func_ref_editing_individual_tiles">编辑单个图块</h3><ul class="colour"><li><a href="tile_get_empty.htm">tile_get_empty</a></li><li><a href="tile_get_index.htm">tile_get_index</a></li><li><a href="tile_get_flip.htm">tile_get_flip</a></li><li><a href="tile_get_mirror.htm">tile_get_mirror</a></li><li><a href="tile_get_rotate.htm">tile_get_rotate</a></li><li><a href="tile_set_empty.htm">tile_set_empty</a></li><li><a href="tile_set_index.htm">tile_set_index</a></li><li><a href="tile_set_flip.htm">tile_set_flip</a></li><li><a href="tile_set_mirror.htm">tile_set_mirror</a></li><li><a href="tile_set_rotate.htm">tile_set_rotate</a></li><li><a href="../../../Drawing/Sprites_And_Tiles/draw_tile.htm">draw_tile</a></li></ul><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back:&nbsp;<a href="../Rooms.htm">房间</a></div><div style="float:right">Next:&nbsp;<a href="../Background_Layers/Background_Layers.htm">背景元素</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>