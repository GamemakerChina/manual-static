<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../../..",gTopicId="8.2.2.1.0_47"</script><script type="text/javascript" src="../../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>ref_create</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" type="text/css" href="../../../assets/css/default.css"><script src="../../../assets/scripts/main_script.js" type="module">//<![CDATA[
    <
    meta name = "rh-authors"
    content = "" / >
      <
      meta name = "topic-comment"
    content = "" / >
      <
      meta name = "rh-index-keywords"
    content = "ref_create" / >
      <
      meta name = "search-keywords"
    content = "ref_create" / >
      <
      meta name = "template"
    content = "assets/masterpages/Manual_Keyword_Page.htt" / >
    //]]></script><meta name="rh-authors" content="Bart Teunis"><meta name="brsnext" value="GameMaker_Language/GML_Reference/Variable_Functions/int64.htm"><meta name="brsprev" value="GameMaker_Language/GML_Reference/Variable_Functions/ptr.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="ref_create"><span>ref_create</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1><span data-field="title" data-format="default">ref_create</span></h1><p>此函数在结构或实例中创建对<a href="../../GML_Overview/Variables_And_Variable_Scope.htm">变量</a>的引用。</p><p>您提供变量所属的结构体或实例，<em>或</em>对其的引用，以及变量的名称（<strong>作为字符串</strong>），<em>或</em>对存储变量的变量的引用 名称或索引。</p><p>对于<a href="../../GML_Overview/Arrays.htm">数组</a>，可以提供索引作为第三个参数，告诉其创建对哪个索引的引用。</p><p>可以创建更复杂的参考。 有关可能性的完整列表，请参阅示例。</p><p class="note"><span data-conref="../../../assets/snippets/Tag_note.hts"><span class="note">注意</span></span> 可以通过 <a href="../Debugging/The_Debug_Overlay.htm">调试覆盖层</a> 中的引用更改该值。</p><p class="note"><span data-conref="../../../assets/snippets/Tag_warning.hts"><span class="warning">警告</span></span> 您 <em>无法</em> 创建对 <a href="../../GML_Overview/Variables/Local_Variables.htm">局部变量</a> 的引用，因为它们只是暂时存在且无法被引用。</p><p>&nbsp;</p><h4>语法:</h4><p class="code"><span data-field="title" data-format="default">ref_create</span>(dbgrefOrStruct, dbgrefOrIndex[, index]);</p><table><colgroup><col><col><col></colgroup><tbody><tr><th>参数</th><th>类型</th><th>描述</th></tr><tr><td>dbgrefOrStruct</td><td><span data-keyref="Type_DbgRef"><a target="_blank" href="ref_create.htm">Reference</a></span>&nbsp;or&nbsp;<span data-keyref="Type_Struct"><a target="_blank" href="../../GML_Overview/Structs.htm">Struct</a></span></td><td>包含要引用的变量或其引用的<a href="../../GML_Overview/Structs.htm#struct">结构体</a>或<a href="../Asset_Management/Instances/Instances.htm">实例</a>。也接受<span class="inline"><a href="../../GML_Overview/Instance_Keywords.htm">自身</a></span>/<span class="inline"><a href="../../GML_Overview/Instance_Keywords.htm">其他</a></span>/<span class="inline"><a href="../../GML_Overview/Variables/Global_Variables.htm">全局</a></span>。</td></tr><tr><td>dbgrefOrIndex</td><td><span data-keyref="Type_DbgRef"><a target="_blank" href="ref_create.htm">Reference</a></span>&nbsp;or&nbsp;<span data-keyref="Type_String"><a target="_blank" href="../../GML_Overview/Data_Types.htm">String</a></span></td><td>变量的名称<strong>作为字符串</strong>，或对其的引用</td></tr><tr><td>index</td><td><span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Real</a></span></td><td><span data-conref="../../../assets/snippets/Tag_optional.hts"><span class="optional">可选</span></span>&amp;nbsp;数组中的索引(如果引用的是数组)<a href="../../GML_Overview/Arrays.htm"></a></td></tr></tbody></table><p>&nbsp;</p><h4>返回:</h4><p class="code"><span data-keyref="Type_DbgRef"><a target="_blank" href="ref_create.htm">Reference</a></span></p><p>&nbsp;</p><h4>示例 1：对实例变量的基本引用</h4><p class="code">text = "This is some text";<br>ref_to_text = <span data-field="title" data-format="default">ref_create</span>(self, "text");</p><p>上面的代码首先在 Create 事件中创建一个实例变量<span class="inline2">text</span>，然后使用<span class="inline3_func"><span data-field="title" data-format="default">ref_create</span></span>创建对其的引用，该引用存储在变量<span class="inline2">ref_to_text</span>中。</p><p>&nbsp;</p><h4>示例 2：对数组索引的基本引用</h4><p class="code">array = [1, 2, 3, 4, 5];<br>ref_to_index = <span data-field="title" data-format="default">ref_create</span>(self, "array", 2);</p><p>上面的代码首先在执行代码的实例中创建一个包含 5 个元素的数组<span class="inline2">array</span>。然后，它使用<span class="inline3_func"><span data-field="title" data-format="default">ref_create</span></span>创建对索引 2(第三个元素)的引用。该引用存储在新的实例变量<span class="inline2">ref_to_index</span>中。</p><p>&nbsp;</p><h4>示例 3：复杂引用</h4><p class="code">the_struct = {a: "text", b: 485};<br>ref_to_struct = <span data-field="title" data-format="default">ref_create</span>(self, "the_struct");<br>ref_to_struct_var = <span data-field="title" data-format="default">ref_create</span>(ref_to_struct, "a");</p><p>上面的代码首先在执行具有两个变量的代码的实例中创建一个结构体<span class="inline2">the_struct</span>。然后，它使用<span class="inline3_func"><span data-field="title" data-format="default">ref_create</span></span>创建对该结构的引用，然后将其作为<span class="inline2">dbgrefOrStruct</span>参数传递给下一次调用<span class="inline3_func"><span data-field="title" data-format="default">ref_create</span></span>。最后一次调用<span class="inline3_func"><span data-field="title" data-format="default">ref_create</span></span>会创建对结构体变量<span class="inline3_func">a</span>的引用，并将其存储在变量<span class="inline2">ref_to_struct_var</span>中。使用之前存储在变量<span class="inline2">ref_to_struct</span>中的引用，结构体本身会<em>间接</em>传递给函数。</p><p>&nbsp;</p><h4>示例 4：复杂数组参考</h4><p class="code">array = [3, 4, 1, 7, 8, 2];<br>index = 4;<br>ref_to_array =&nbsp;<span data-field="title" data-format="default">ref_create</span>(self, "array");<br>ref_to_index =&nbsp;<span data-field="title" data-format="default">ref_create</span>(self, "index");<br>ref_to_array_at_index = <span data-field="title" data-format="default">ref_create</span>(ref_to_array, ref_to_index);</p><p>上面的代码创建了对数组<span class="inline2">array</span>的引用，其中<span class="inline3_func"><span data-field="title" data-format="default">ref_create</span></span>的第一个参数(要引用的数组)和第二个参数(用作数组的索引)都是它们本身参考。这意味着，如果您稍后为变量<span class="inline2">index</span>分配不同的值，则由<span class="inline2">ref_to_array_at_index</span>索引的数组元素也会更改为新值集。如果您将一个全新的数组分配给实例变量<span class="inline2">array</span>，则<span class="inline2">ref_to_array_at_index</span>将引用该数组中同一索引处的元素。</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div>Back:&nbsp;<a href="Variable_Functions.htm">变量函数</a></div><div>Next:&nbsp;<a href="int64.htm">int64</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>