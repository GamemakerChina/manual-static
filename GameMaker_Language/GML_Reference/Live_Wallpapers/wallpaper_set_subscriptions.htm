<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../../..",gTopicId="8.2.2.24.0_2"</script><script type="text/javascript" src="../../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>wallpaper_set_subscriptions</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" type="text/css" href="../../../assets/css/default.css"><script src="../../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Gurpreet S. Matharoo"><meta name="topic-comment" content="Reference page for wallpaper_set_subscriptions"><meta name="rh-index-keywords" content="wallpaper_set_subscriptions"><meta name="search-keywords" content="wallpaper_set_subscriptions"><meta name="template" content="assets/masterpages/Manual_Keyword_Page.htt"><meta name="brsprev" value="GameMaker_Language/GML_Reference/Live_Wallpapers/wallpaper_set_config.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="wallpaper_set_subscriptions"><span>wallpaper_set_subscriptions</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1><span data-field="title" data-format="default">wallpaper_set_subscriptions</span></h1><p>此函数从 Companion 应用程序订阅给定的指标。用于获取实时系统信息，并启用鼠标输入，动态壁纸默认禁用鼠标输入。</p><p class="note"><span data-conref="../../../assets/snippets/Tag_important.hts"><span class="important">重要</span></span>&nbsp;<a href="https://help.gamemaker.io/hc/en-us/articles/10070287968285">See this guide</a> for making a basic Live Wallpaper and (optionally) setting up the Companion app on Windows.</p><p class="note"><span data-conref="../../../assets/snippets/Tag_note.hts"><span class="note">注意</span></span> 目标计算机上的图形驱动程序必须是最新的，GPU 指标才能正常工作。</p><p class="note"><span data-conref="../../../assets/snippets/Tag_note.hts"><span class="note">注意</span></span> 每次调用此函数都会取消之前所有活动的订阅，因此只有上次调用中包含的订阅仍保持活动状态。</p><h2>论点</h2><p>您向该函数传递一个数组，其中包含以下一个或多个字符串：<span class="inline2">"desktop_mouse"</span>、<span class="inline2">"cpu"</span>、<span class="inline2">"gpu"</span>、<span class="inline2">"battery"</span>、<span class="inline2">" 内存 "</span>、<span class="inline2">" 磁盘 "</span>、<span class="inline2">" 网络 "</span>、<span class="inline2">" 音频 "</span>。</p><p><span class="inline2">"desktop_mouse"</span> 为您的动态壁纸启用鼠标输入。其他选项允许触发 <a href="../../../The_Asset_Editors/Object_Properties/Wallpaper_Config_Event.htm#h">壁纸订阅数据</a> 事件，您可以在其中接收有关您选择订阅的指标的数据。</p><h2 id="h">接收指标</h2><p>在 <a href="../../../The_Asset_Editors/Object_Properties/Wallpaper_Config_Event.htm#h">壁纸订阅数据</a> 事件中，您将收到订阅指标的更新，大约每秒一次，音频除外，每秒十次。</p><p>该事件将包含一个 <span class="inline2">wallpaper_subscription_data</span> 变量，该变量是一个 <a href="../../GML_Overview/Structs.htm">结构体</a> ，包含以下成员：</p><p><a class="dropspot" data-rhwidget="DropSpot" data-target="drop-down" href="#"><span data-open-text="true" data-skip-index="true">wallpaper_subscription_data 结构</span> <span data-close-text="true">wallpaper_subscription_data 结构</span></a></p><div class="droptext" data-targetname="drop-down"><ul class="colour"><li><strong>cpu</strong>( <span data-keyref="Type_Array"><a target="_blank" href="../../GML_Overview/Arrays.htm">数组</a></span> )：CPU 设备数组。该数组中的每个条目都是一个结构体，包含以下成员：<ul><li><strong>name</strong>(<span data-keyref="Type_String"><a target="_blank" href="../../GML_Overview/Data_Types.htm">String</a></span>)：CPU 的名称。</li><li><strong>num_logic_cores</strong>( 整数 <span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Real</a></span>)：逻辑核心数量。</li><li><strong>num_physical_cores</strong>( 整数 <span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Real</a></span>)：物理核心数量。</li><li><strong>usage_pct</strong>( 整数 <span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Real</a></span>)：CPU 的负载百分比。</li><li><strong>current_clock_speed_MHz</strong>( 整数 <span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Real</a></span>)：当前时钟速度 CPU 的最大时钟速度，以 MHz 为单位。</li><li><strong>max_clock_speed_MHz</strong>( 整数 <span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Real</a></span>)：CPU 的最大时钟速度，以 MHz 为单位。</li><li><strong>电压 _V</strong>( 整数 <span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">实数</a></span> )：CPU 的当前电压 (以伏特为单位)。</li></ul></li><li><strong>gpu</strong> (<span data-keyref="Type_Array"><a target="_blank" href="../../GML_Overview/Arrays.htm">Array</a></span>): Array of GPU devices. Each entry in this array is a struct, containing the following members:<ul><li><strong>name</strong> (<span data-keyref="Type_String"><a target="_blank" href="../../GML_Overview/Data_Types.htm">String</a></span>): The name of the GPU.</li><li><strong>usage_pct</strong> (Integer <span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Real</a></span>): The load percentage of the GPU.</li><li><strong>clock_speed_MHz</strong> (Integer <span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Real</a></span>): The current clock speed of the GPU in MHz.</li><li><strong>fan_speed_pct</strong> or <strong>fan_speed_rpm</strong> (<span data-keyref="Type_Array"><a target="_blank" href="../../GML_Overview/Arrays.htm">Array</a></span>&nbsp;of Integer&nbsp;<span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Real</a></span>s): The target speed of each GPU fan. Expressed as a percentage of the maximum speed on NVIDIA GPUs and in RPM on AMD GPUs (AMD will only return one element in the array).</li><li><strong>power_usage_W</strong> (Integer <span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Real</a></span>): The power usage of the GPU in Watt.</li><li><strong>temperature_C</strong> (Integer <span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Real</a></span>): The temperature of the GPU in Celsius.</li><li><strong>memory_used_bytes</strong> (<span data-keyref="Type_String"><a target="_blank" href="../../GML_Overview/Data_Types.htm">String</a></span>): How much of the GPU memory is used up in bytes.</li><li><strong>memory_available_bytes</strong> (<span data-keyref="Type_String"><a target="_blank" href="../../GML_Overview/Data_Types.htm">String</a></span>): How much of the GPU memory is available in bytes.</li><li><strong>memory_total_bytes</strong> (<span data-keyref="Type_String"><a target="_blank" href="../../GML_Overview/Data_Types.htm">String</a></span>): The total GPU memory in bytes.</li></ul></li><li><strong>battery</strong> ( <span data-keyref="Type_Array"><a target="_blank" href="../../GML_Overview/Arrays.htm">数组</a></span> )：电池设备数组。该数组中的每个条目都是一个结构体，包含以下成员：<ul><li><strong>name</strong>(<span data-keyref="Type_String"><a target="_blank" href="../../GML_Overview/Data_Types.htm">String</a></span>)：电池的名称。</li><li><strong>is_charging</strong>(<span data-keyref="Type_Bool"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Boolean</a></span>)：指示电池是否正在充电。</li><li><strong>remaining_charge_pct</strong>(Integer<span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Real</a></span>)：电池中剩余电量的百分比。</li><li><strong>remaining_time_min</strong>( 整数 <span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">实数</a></span> )：估计电池剩余时间 (以分钟为单位)。</li></ul></li><li><strong>ram</strong> (<span data-keyref="Type_Array"><a target="_blank" href="../../GML_Overview/Arrays.htm">Array</a></span>): Array of RAM devices.&nbsp;Each entry in this array is a struct, containing the following members:<ul><li><strong>name</strong> (<span data-keyref="Type_String"><a target="_blank" href="../../GML_Overview/Data_Types.htm">String</a></span>): The name of the RAM.</li><li><strong>available_bytes</strong> (<span data-keyref="Type_String"><a target="_blank" href="../../GML_Overview/Data_Types.htm">String</a></span>): How much of the RAM memory is available in bytes.</li><li><strong>total_bytes</strong> (<span data-keyref="Type_String"><a target="_blank" href="../../GML_Overview/Data_Types.htm">String</a></span>): The total RAM memory in bytes.</li><li><strong>used_bytes</strong> (<span data-keyref="Type_String"><a target="_blank" href="../../GML_Overview/Data_Types.htm">String</a></span>): How much of the GPU memory is used up in bytes.</li></ul></li><li><strong>disk</strong> (<span data-keyref="Type_Array"><a target="_blank" href="../../GML_Overview/Arrays.htm">Array</a></span>): Array of disks.&nbsp;Each entry in this array is a struct, containing the following members:<ul><li><strong>name</strong> (<span data-keyref="Type_String"><a target="_blank" href="../../GML_Overview/Data_Types.htm">String</a></span>): The name of the disk.</li><li><strong>available_bytes</strong> (<span data-keyref="Type_String"><a target="_blank" href="../../GML_Overview/Data_Types.htm">String</a></span>): How much of the disk memory is available in bytes.</li><li><strong>total_bytes</strong> (<span data-keyref="Type_String"><a target="_blank" href="../../GML_Overview/Data_Types.htm">String</a></span>): The total disk memory in bytes.</li><li><strong>used_bytes</strong> (<span data-keyref="Type_String"><a target="_blank" href="../../GML_Overview/Data_Types.htm">String</a></span>): How much of the GPU memory is used up in bytes.</li></ul></li><li><strong>network</strong> (<span data-keyref="Type_Array"><a target="_blank" href="../../GML_Overview/Arrays.htm">Array</a></span>): Array of network devices.&nbsp;Each entry in this array is a struct, containing the following members:<ul><li><strong>bandwidth_bps</strong> (<span data-keyref="Type_String"><a target="_blank" href="../../GML_Overview/Data_Types.htm">String</a></span>): The bandwidth of the network in bits per second.</li><li><strong>send_bps</strong> (Integer <span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Real</a></span>): The current bytes sent per second on the network.</li><li><strong>received_bps</strong> (Integer <span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Real</a></span>): The current bytes received per second on the network.</li></ul></li><li><strong>audio</strong> (<span data-keyref="Type_Array"><a target="_blank" href="../../GML_Overview/Arrays.htm">Array</a></span>): Array of audio devices. Each entry in this array is a struct, containing the following members:<ul><li><strong>freq_resolution</strong> (Integer <span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Real</a></span>): The frequency resolution, is always 10.</li><li><strong>spectrum_amplitude</strong> (<span data-keyref="Type_Array"><a target="_blank" href="../../GML_Overview/Arrays.htm">Array</a></span>): Represents a spectrum analysis of measured sound amplitudes on the system. The frequency will span from 0 Hz up to the Nyquist frequency, i.e half that of the system's sampling rate. If it is, for example, 44.1 kHz (the most common), the frequencies will range from 0 Hz to 22050 Hz. Each bin will always represent a range of <strong>freq_resolution</strong>. E.g. if it is 10, this array will consist of 2205 data points if the sampling rate is 44.1 kHz, and 2400 if it is 48 kHz (also common).</li></ul></li></ul></div><p>如果无法从系统检索某些信息，则其相应的变量将不会出现在该结构中。如果您尝试访问不存在的变量，可能会导致崩溃。为了防止这种情况发生，请在访问变量之前使用 <span class="inline3_func"><a href="../Variable_Functions/variable_struct_exists.htm">struct_exists</a></span> 检查结构中是否存在变量。</p><p>&nbsp;</p><p>&nbsp;</p><h4>语法:</h4><p class="code"><span data-field="title" data-format="default">wallpaper_set_subscriptions</span>(subscriptions);</p><table><colgroup><col><col><col></colgroup><tbody><tr><th>参数</th><th>类型</th><th>描述</th></tr><tr><td>subscriptions</td><td><span data-keyref="Type_Array"><a target="_blank" href="../../GML_Overview/Arrays.htm">Array</a></span></td><td>包含字符串的数组，这些字符串是您要订阅的指标</td></tr></tbody></table><p>&nbsp;</p><h4>返回:</h4><p class="code"><span data-keyref="Type_Void">N/A</span></p><p>&nbsp;</p><h4>例子:</h4><div data-conref="../../../assets/snippets/Example_wallpaper_set_subscriptions.hts"><p class="code">// Create Event<br>wallpaper_set_subscriptions(["desktop_mouse", "cpu"]);<br><br><br>// Wallpaper Subscription Data Event<br>var _cpus = wallpaper_subscription_data.cpu;<br><br>file = file_text_open_append("sysinfo.txt");<br>file_text_writeln(file);<br>file_text_write_string(file, string(date_current_datetime()));<br>file_text_write_string(file, $"\nCPU count: {array_length(_cpus)}");<br><br>array_foreach(_cpus, function(_cpu, _num)<br>{<br>&nbsp;&nbsp; &nbsp;if (!struct_exists(_cpu, "usage_pct")) return;<br>&nbsp;&nbsp; &nbsp;var _str = $"\nCPU {_num} load: {_cpu.usage_pct}%";<br>&nbsp;&nbsp; &nbsp;file_text_write_string(file, _str);<br>});<br><br>file_text_close(file);</p><p>第一行在 Create 事件中运行，启用鼠标输入并订阅 CPU 指标。</p><p>在壁纸订阅数据事件中，它获取 CPU 的设备数组，并打开一个文本文件以写入指标。</p><p>在该文件中，它写入当前日期时间、CPU 设备计数 (即数组的长度)，然后继续写入数组中每个 CPU 设备的负载百分比。</p><p>此代码在 <a href="../File_Handling/File_Directories/working_directory.htm">工作目录</a> 中的 <span class="inline2">sysinfo.txt</span> 文件中生成以下文本：</p><p class="code_plain">45245.33<br>CPU count: 1<br>CPU 0 load: 3%<br>45245.33<br>CPU count: 1<br>CPU 0 load: 3%<br>45245.33<br>CPU count: 1<br>CPU 0 load: 3%</p></div><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div>Back:&nbsp;<a href="Live_Wallpapers.htm">动态壁纸</a></div><div>Next:&nbsp;<a href="wallpaper_set_config.htm">wallpaper_set_config</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>