<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../../..",gTopicId="8.2.2.18.0_2"</script><script type="text/javascript" src="../../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>buffer_create</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../../assets/css/default.css" type="text/css"><script src="../../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Mark Alexander"><meta name="topic-comment" content="Reference page for buffer_create"><meta name="rh-index-keywords" content="buffer_create,buffer_fixed,buffer_grow,buffer_wrap,buffer_fast,buffer_vbuffer"><meta name="search-keywords" content="buffer_create,buffer_fixed,buffer_grow,buffer_wrap,buffer_fast,buffer_vbuffer"><meta name="is_pure" content="true"><meta name="brsnext" value="GameMaker_Language/GML_Reference/Buffers/buffer_create_from_vertex_buffer.htm"><meta name="brsprev" value="GameMaker_Language/GML_Reference/Buffers/buffer_exists.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="buffer_create"><span>buffer_create</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1><span data-field="title" data-format="default">buffer_create</span></h1><p>该函数创建一个新的缓冲区并返回它。</p><p>该函数为缓冲区分配一部分内存，然后可用于存储不同类型的数据 (在使用 <span class="inline3_func"><a href="buffer_write.htm">buffer_write</a></span>、<span class="inline3_func"><a href="buffer_poke.htm">buffer_poke</a></span>{ 写入缓冲区时指定 )} 或 <span class="inline3_func"><a href="buffer_fill.htm">buffer_fill</a></span> 函数)。</p><p>以下常量可用于定义缓冲区类型：</p><div data-conref="../../../assets/snippets/Table_Buffer_Type_Constant.hts"><table><colgroup><col><col></colgroup><tbody><tr><th colspan="2"><span data-keyref="Type_Constant_Buffer_Type"><a target="_blank" href="buffer_create.htm">缓冲区类型常量</a></span></th></tr><tr><th>常量</th><th>描述</th></tr><tr><td><span class="inline">buffer_fixed</span></td><td>A buffer of fixed size.</td></tr><tr><td><span class="inline">buffer_grow</span></td><td>A buffer that will "grow" dynamically as data is added</td></tr><tr><td><span class="inline">buffer_wrap</span></td><td>A buffer where the data will "wrap". When the data being added reaches the limit of the buffer size, the overwrite will be placed back at the start of the buffer, and further writing will continue from that point.</td></tr><tr><td><span class="inline">buffer_fast</span></td><td>A special "stripped" buffer that is extremely fast to read/write to. Can only be used with <span class="inline">buffer_u8</span> <a href="buffer_write.htm">data types</a>, and <i>must</i> be 1 byte aligned.</td></tr></tbody></table></div><p>除了缓冲区类型之外，您还必须为缓冲区设置<i>字节对齐</i>。此值将根据您希望存储在缓冲区中的数据而变化，并且在大多数情况下，值为1是完全可以的。但是，请注意，对于某些操作，特定的对齐是<i>必不可少的</i>，并且不正确的对齐可能会导致错误 (有关对齐的更多详细信息，请参见<a href="../../../Additional_Information/Guide_To_Using_Buffers.htm">缓冲区</a>)。以下是显示哪些值最适合每种数据类型的通用指南 (如有疑问，请使用1的对齐方式):</p><ul class="colour"><li>字符串应对齐为1字节。</li><li>有符号或无符号的 8 位整数可以对齐到任何值，但请注意，对于快速缓冲区 (参见 <span class="inline3_func"><a href="buffer_write.htm">buffer_write</a></span>)，它必须 <i>对齐到 1。</i></li><li>有符号或无符号的16位整数应对齐2字节。</li><li>有符号或无符号的 32 位整数应对齐 4 个字节。</li><li>最多 16 位的浮点数应对齐 2 个字节。</li><li>最多 32 位的浮点数应与 4 字节对齐。</li><li>最多 64 位的浮点数应与 8 个字节对齐。</li></ul><p class="note"><span data-conref="../../../assets/snippets/Tag_note.hts"><span class="note">注意</span></span> 字节对齐非常重要，因为错误的选择可能会对性能产生不利影响。</p><p class="note"><span data-conref="../../../assets/snippets/Tag_important.hts"><span class="important">重要信息</span></span> 您无法创建 2 GB(<span>2,147,483,648 字节) 或更大的缓冲区。</span></p><div data-conref="../../../assets/snippets/Note_Buffer_Delete_Dynamic.hts"><p class="note"><span data-conref="../../../assets/snippets/Tag_note.hts"><span class="note">注意</span></span> 当不再需要此类动态创建的资源时，请务必将其从内存中删除，以防止内存泄漏，因此，当您使用完已创建的缓冲区时，应使用 <span class="inline3_func"><a href="buffer_delete.htm">buffer_delete</a></span> 再次释放它。</p></div><p>&nbsp;</p><h4>语法:</h4><p class="code"><span data-field="title" data-format="default">buffer_create</span>(size, type, alignment)</p><table><tbody><tr><th>参数</th><th>类型</th><th>描述</th></tr><tr><td>size</td><td><span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Real</a></span></td><td>缓冲区的大小 (以字节为单位)。</td></tr><tr><td>type</td><td><span data-keyref="Type_Constant_Buffer_Type"><a target="_blank" href="buffer_create.htm">缓冲区类型常量</a></span></td><td>要创建的缓冲区类型 (请参见上面的常量列表)。</td></tr><tr><td>alignment</td><td><span data-keyref="Type_Real"><a target="_blank" href="../../GML_Overview/Data_Types.htm">Real</a></span></td><td>缓冲区的字节对齐</td></tr></tbody></table><p>&nbsp;</p><h4>返回:</h4><p class="code"><span data-keyref="Type_ID_Buffer"><a target="_blank" href="buffer_create.htm">Buffer</a></span></p><p>&nbsp;</p><h4>例子:</h4><p class="code">player_buffer = <span data-field="title" data-format="default">buffer_create</span>(16384, buffer_fixed, 2);</p><p>上述代码将 16384 字节内存分配给缓冲区并返回该缓冲区，并将对其的引用存储在变量 <span class="inline2">player_buffer</span> 中以供将来使用。缓冲区与两字节边界对齐。</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div style="float:left">Back:&nbsp;<a href="Buffers.htm">缓冲区</a></div><div style="float:right">Next:&nbsp;<a href="buffer_create_from_vertex_buffer.htm">buffer_create_from_vertex_buffer</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>