<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><script type="text/javascript" language="JavaScript">function reDo(){innerWidth==origWidth&&innerHeight==origHeight||location.reload()}4==parseInt(navigator.appVersion)&&"Netscape"==navigator.appName&&(origWidth=innerWidth,origHeight=innerHeight,onresize=reDo),onerror=null</script><style type="text/css">p.WebHelpNavBar{text-align:right}</style><script type="text/javascript">gCommonRootRelPath=gRootRelPath="../..",gTopicId="5.2.0_3"</script><script type="text/javascript" src="../../template/scripts/rh.min.js"></script><script type="text/javascript" src="../../template/scripts/common.min.js"></script><script type="text/javascript" src="../../template/scripts/topic.min.js"></script><script type="text/javascript" src="../../template/scripts/topicwidgets.min.js"></script><script type="text/javascript" src="../../whxdata/projectsettings.js"></script><link rel="stylesheet" type="text/css" href="../../template/styles/topic.min.css"><link rel="stylesheet" type="text/css" href="../../template/Charcoal_Grey/topicheader.css"><meta name="topic-status" content="Draft"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Dynamic Textures</title><meta name="generator" content="Adobe RoboHelp 2022"><link rel="stylesheet" href="../../assets/css/default.css" type="text/css"><script src="../../assets/scripts/main_script.js" type="module"></script><meta name="rh-authors" content="Gurpreet S. Matharoo"><meta name="topic-comment" content="Dynamic Texture Groups and Pages"><meta name="rh-index-keywords" content="Dynamic Texture Groups"><meta name="search-keywords" content="Dynamic Texture Groups"><meta name="template" content="assets/masterpages/Manual_Page.htt"><meta name="brsnext" value="Settings/Configurations.htm"><meta name="brsprev" value="Settings/Texture_Information/Texture_Pages.htm"></head><body><div class="topic-header rh-hide" id="rh-topic-header"><div class="logo"></div><div class="nav"><div class="title" title="Dynamic Textures"><span>Dynamic Textures</span></div><div class="gotohome" title="Click here to see this page in full context"><a href="#" onclick="rh._.goToFullLayout()">Click here to see this page in full context</a></div></div></div><div class="topic-header-shadow rh-hide" id="rh-topic-header-shadow"></div><h1><span data-field="title" data-format="default">动态纹理</span></h1><p><img class="center" src="../../assets/Images/Settings/Texture_Groups_Dynamic_Option.png">在<a href="../Texture_Groups.htm">纹理组</a>设置中，可以将组标记为"<strong>默认值</strong>"或"<strong>动态</strong>"。</p><h2>纹理的工作原理</h2><div data-conref="../../assets/snippets/How_Textures_Work.hts"><p>游戏开始时，会将纹理组加载到RAM中，除非它是稍后加载的<a href="Dynamic_Textures.htm">动态纹理组</a>。</p><p>While in RAM memory, the Texture Group stays compressed, as it was on disk.</p><p>When an image from a Texture Group is drawn or one of the <a href="../../GameMaker_Language/GML_Reference/Drawing/Textures/texture_prefetch.htm">pre-fetch</a> functions is run, all texture pages of the Texture Group are loaded into <a class="tooltip" title="VRAM是视频可用的内存量，即：可以存储纹理和图像的内存空间。">VRAM</a>. For most texture group formats the texture is first decompressed before being loaded into VRAM. If you're using a <strong>Custom</strong> texture group format, however, the texture is decompressed in real time on the GPU.</p><p class="note"><span data-conref="../../assets/snippets/Tag_note.hts"><span class="note">NOTE</span></span>&nbsp;Texture decompression is asynchronous on all platforms except GX.games, which might cause stutters as textures are decompressed in-game. To avoid this, ensure your textures are prefetched during loading screens or other inactive parts of your game.</p><p>您可以<a href="../../GameMaker_Language/GML_Reference/Drawing/Textures/texture_flush.htm">刷新</a>纹理组以将其从VRAM中删除(这不会将其从RAM中删除)。</p></div><h2>"默认"组</h2><p>默认纹理组包含在最终游戏的软件包(WAD文件)中。游戏开始后，任何此类纹理组都会立即加载到RAM中，并在需要时预取到VRAM中，或者<a href="../../GameMaker_Language/GML_Reference/Drawing/Textures/texture_prefetch.htm">询问</a>。</p><h2 id="h">"动态"组</h2><p>游戏开始时不会加载动态纹理组。它可以在需要时加载(即从中绘制图像时)，也可以在手动加载时加载。</p><p>您可以通过调用<a href="../../GameMaker_Language/GML_Reference/Drawing/Textures/texturegroup_load.htm"><span class="inline">texturegroup_load()</span></a>将动态纹理组手动加载到RAM中。默认情况下，此功能还会解压缩该组并将其预取到VRAM中。</p><p>您可以通过将函数的第二个参数设置为<span class="inline2">false</span>来禁用预取。这将使您稍后手动<a href="../../GameMaker_Language/GML_Reference/Drawing/Textures/texture_prefetch.htm">预取</a>它，或者在从中绘制图像时自动获取它(由于它是同步的，不建议使用后者)。</p><p>也可以使用<span class="inline"><a href="../../GameMaker_Language/GML_Reference/Drawing/Textures/texturegroup_unload.htm">texturegroup_unload()</a></span>卸载纹理组，这将从内存中删除该纹理组并将其以其原始压缩形式放回磁盘。</p><p class="note"><span data-conref="../../assets/snippets/Tag_note.hts"><span class="note">注意</span></span>在加载动态纹理组之前，无法运行需要读取其包含的资源的操作，例如<a href="../../GameMaker_Language/GML_Reference/Asset_Management/Sprites/Sprite_Manipulation/sprite_duplicate.htm">复制精灵</a>(这将触发加载纹理组，但该功能仍将失败，因为无法立即加载)。但是，您可以读取纹理信息，如<a href="../../GameMaker_Language/GML_Reference/Drawing/Textures/texture_get_uvs.htm">UVs</a>和<a href="../../GameMaker_Language/GML_Reference/Asset_Management/Sprites/Sprite_Information/sprite_get_tpe.htm">TPE</a>。</p><h2 id="h1">动态组模式</h2><p>使用<a href="../../GameMaker_Language/GML_Reference/Drawing/Textures/texturegroup_set_mode.htm"><span class="inline">texturegroup_set_mode()</span></a>可以将动态组的"模式"设置为"<strong>隐式</strong>"(默认值)或"<strong>显式</strong>"。这将更改是否可以自动加载动态组。</p><p>此设置是全局设置，不能按组应用。</p><h3>隐式</h3><p class="code">texturegroup_set_mode(false, ...)</p><p>这是默认设置。这样可以自动加载动态组，因此当绘制来自已卸载的动态组的图像时，它将触发该纹理组的加载。<br><br>当纹理加载到 VRAM 中并解压缩时，这可能会导致小幅冻结，因此<strong>不推荐</strong>使用隐式加载。<br><br>当隐式触发纹理组时，仅加载所需的纹理页面。例如，如果您卸载的纹理组有 4 个纹理页面，而您尝试从 Texture Page 2 中绘制某些内容，则只加载该页面，纹理页面 1、3 和 4 将保留在磁盘上。</p><h3 id="h2">显式</h3><p class="code">texturegroup_set_mode(true, ...)</p><p>此设置禁用动态组的自动加载，这意味着您必须<a href="../../GameMaker_Language/GML_Reference/Drawing/Textures/texturegroup_load.htm">手动加载它们</a>。当您尝试从尚未加载的纹理组绘制图像时，图像将不会绘制，并且错误将打印到输出日志中。<br><br>您可以在<a href="../../GameMaker_Language/GML_Reference/Drawing/Textures/texturegroup_set_mode.htm"><span class="inline">texturegroup_set_mode()</span></a>中设置"回退"精灵，该精灵将代替尚未加载的纹理。</p><p><video src="../../assets/Videos/Runner/texture_loading_unloading.mp4" width="620" height="360" controls="" class="center"></video></p><p class="video_subtitle">在运行时卸载纹理，显示回退精灵</p><p>显示回退精灵时，将绘制其整个纹理页面，因此建议为回退精灵启用<a href="Texture_Pages.htm#h">单独纹理页面</a>，以防止出现意外的图形。回退精灵的纹理页面将自动加载，即使其设置为"动态"页面也是如此。</p><p>上面示例中使用的<a href="../../assets/Images/Settings/Texture_Groups_Fallbacktexture.png">回退精灵</a>是作为渐变棋盘创建的，因此您可以随时判断正在绘制回退纹理的哪个部分，以及绘制的比例，这可能有助于诊断与纹理相关的问题。</p><p><img class="center_shadow" src="../../assets/Images/Settings/Texture_Groups_Fallbacktexture.png"></p><h2>路径和建模</h2><p><img class="center" src="../../assets/Images/Settings/Texture_Groups_Path_Field.png">在<a href="../Texture_Groups.htm">纹理组</a>设置中，您可以设置动态组将放置在最终游戏目录中的路径。如果没有设置路径，纹理将被放置在游戏目录的根目录中。</p><p>如果将组格式设置为"PNG"，则导出的纹理文件将变为可直接编辑，允许玩家对其进行修改。</p><h2>更多功能</h2><p>下面是一些与动态组相关的更多功能：</p><ul class="colour"><li><a href="../../GameMaker_Language/GML_Reference/Drawing/Textures/texturegroup_set_mode.htm"><span class="inline">texturegroup_set_mode()</span></a>：除了设置模式外，还可以使用此函数启用调试，此函数将在屏幕上显示有关所有纹理页面的信息：<br><img class="center" src="../../assets/Images/Settings/Texture_Groups_Debug_Info.png"></li><li><a href="../../GameMaker_Language/GML_Reference/Drawing/Textures/texturegroup_get_status.htm"><span class="inline">texturegroup_get_status()</span></a>：这将返回纹理组的状态，告诉您该纹理组是已加载、已卸载、当前正在加载还是已读取到VRAM。</li></ul><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><div class="footer"><div class="buttons"><div class="clear"><div>Back:&nbsp;<a href="../Texture_Groups.htm">纹理组</a></div><div>Next:&nbsp;<a href="Texture_Pages.htm">纹理页</a></div></div></div><h5><span data-keyref="Copyright Notice">© Copyright YoYo Games Ltd. 2024 All Rights Reserved</span></h5></div></body></html>